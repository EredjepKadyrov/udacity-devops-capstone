{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/app/misc/misc.module.ts","webpack:///./src/app/lineage/details/operation/operation-icon.utils.ts","webpack:///./src/app/material-extension/material.module.ts","webpack:///./src/app/visjs/vis-model.ts","webpack:///./src/app/lineage/details/expression/expression-render.service.ts","webpack:///./src/app/visjs/vis-network.service.ts","webpack:///./src/app/dataset/dataset.service.ts","webpack:///../src lazy namespace object","webpack:///./src/app/dashboard/dashboard.component.ts","webpack:///./src/app/dashboard/dataset-browser/dataset-browser.service.ts","webpack:///./src/app/dashboard/welcome/welcome.component.ts","webpack:///./src/app/lineage/lineage.component.ts","webpack:///./src/app/lineage/lineage.service.ts","webpack:///./src/app/commons/promise-cache.ts","webpack:///./src/app/lineage/graph/graph.model.ts","webpack:///./src/app/visjs/cluster-manager.ts","webpack:///./src/app/lineage/lineage.resolver.ts","webpack:///./src/app/lineage/details/details.module.ts","webpack:///./src/app/lineage/details/expression/expression-dialog.component.ts","webpack:///./src/app/dataset/dataset.resolver.ts","webpack:///./src/app/dataset/lineage-overview/lineage-overview.resolver.ts","webpack:///./src/app/dataset/lineage-overview/lineage-overview.component.ts","webpack:///./src/app/xhr-timeout-rectifier/retry-popup-dialog.component.ts","webpack:///./src/main.ts","webpack:///./src/third-party-scripts/browser-check.exec.js","webpack:///./src/third-party-scripts/browser-check.exec.js?932b","webpack:///./src/app/app.module.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/dashboard/dashboard.module.ts","webpack:///./src/app/dashboard/dashboard.component.html","webpack:///./src/app/dashboard/dashboard.component.less","webpack:///./src/app/dashboard/dataset-browser/dataset-browser.component.ts","webpack:///./src/app/dashboard/dataset-browser/dataset-browser.model.ts","webpack:///./src/app/dashboard/dataset-browser/dataset-browser.component.html","webpack:///./src/app/dashboard/dataset-browser/dataset-browser.component.less","webpack:///./src/app/dashboard/welcome/welcome.component.html","webpack:///./src/app/dashboard/welcome/welcome.component.less","webpack:///./src/app/misc/version.component.ts","webpack:///./src/app/misc/loading-indicator/loading-indicator.component.ts","webpack:///./src/app/misc/loading-indicator/loading-indicator.component.html","webpack:///./src/app/misc/loading-indicator/loading-indicator.component.less","webpack:///./src/app/lineage/tabs.ts","webpack:///./src/app/lineage/lineage.component.html","webpack:///./src/app/lineage/lineage.component.less","webpack:///./src/app/lineage/lineage.module.ts","webpack:///./src/app/lineage/graph/graph.component.ts","webpack:///./src/app/lineage/graph/vis-options.ts","webpack:///./src/app/lineage/graph/graph-builder.ts","webpack:///./src/app/lineage/types.ts","webpack:///./src/app/lineage/details/operation/operation-icon.component.ts","webpack:///./src/app/lineage/details/operation/operation-details.component.ts","webpack:///./src/app/lineage/details/operation/operation-details.component.html","webpack:///./src/app/lineage/details/operation/operation-details.component.less","webpack:///./src/app/lineage/details/details-section-header.component.ts","webpack:///./src/app/lineage/details/details-panel-header.component.ts","webpack:///./src/app/lineage/details/expression/expression-inline.component.ts","webpack:///./src/app/lineage/details/expression/expression-dialog.component.less","webpack:///./src/app/lineage/details/attribute-list/attribute-list.component.ts","webpack:///./src/app/lineage/details/attribute-list/attribute-list.component.html","webpack:///./src/app/lineage/details/attribute-list/attribute-list.component.less","webpack:///./src/app/lineage/details/attribute-list/data-type-view/data-type-view.component.ts","webpack:///./src/app/lineage/details/attribute-list/data-type-view/data-type-view.component.html","webpack:///./src/app/lineage/details/attribute-list/data-type-view/data-type-view.component.less","webpack:///./src/app/dataset/dataset.module.ts","webpack:///./src/app/dataset/lineage-overview/lineage-overview.component.html","webpack:///./src/app/dataset/lineage-overview/lineage-overview.component.less","webpack:///./src/app/dataset/lineage-overview/lienage-overview-graph.component.ts","webpack:///./src/app/dataset/lineage-overview/vis-options.ts","webpack:///./src/app/dataset/lineage-overview/lineage-overview.model.ts","webpack:///./src/app/xhr-timeout-rectifier/xhr-timeout-rectifier.module.ts","webpack:///./src/app/xhr-timeout-rectifier/retry-popup-dialog.component.html","webpack:///./src/app/xhr-timeout-rectifier/retry-popup-dialog.component.less","webpack:///./src/app/xhr-timeout-rectifier/xhr-timeout-interceptor.service.ts","webpack:///./src/app/visjs/vis.module.ts","webpack:///./src/app/lineage/lineage.store.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","core_1","common_1","version_component_1","loading_indicator_component_1","MiscModule","__decorate","NgModule","imports","CommonModule","declarations","VersionComponent","LoadingIndicatorComponent","Icon","code","font","this","toVisNodeIcon","color","face","size","getIconForNodeType","nodeType","material_1","materialComponentModuleBunch","MatAutocompleteModule","MatCheckboxModule","MatDatepickerModule","MatInputModule","MatRadioModule","MatSelectModule","MatSliderModule","MatSlideToggleModule","MatMenuModule","MatSidenavModule","MatToolbarModule","MatListModule","MatGridListModule","MatCardModule","MatStepperModule","MatTabsModule","MatExpansionModule","MatButtonModule","MatButtonToggleModule","MatChipsModule","MatIconModule","MatProgressSpinnerModule","MatProgressBarModule","MatDialogModule","MatTooltipModule","MatSnackBarModule","MatTableModule","MatSortModule","MatPaginatorModule","MaterialModule","VisModel","nodes","edges","VisClusterNode","id","label","isHighlighted","icon","types_1","lineage_store_1","_","ExpressionRenderService","lineageStore","getName","expr","typeOfExpr","symbol","ar","lineageAccessors","getAttribute","refId","getText","_this","binaryExpr","leftOperand","children","rightOperand","render","operand","text","ae","child","alias","udf","paramList","map","join","renderAsGenericLeafExpr","gle","params","renderValue","isEmpty","obj","isArray","isPlainObject","toPairs","_a","k","v","toString","Injectable","LineageStore","VisNetworkService","_network","createNetwork","networkCreatorFn","clearNetwork","ngOnDestroy","destroy","http_1","promise_cache_1","DatasetService","http","datasetPromiseCache","PromiseCache","overviewPromiseCache","getDatasetDescriptor","getOrCreate","toPromise","getLineageOverview","datasetId","lineagePromise","then","lineage","datasets","forEach","ds","put","expandCacheForDatasetsRelatedTo","HttpClient","webpackEmptyAsyncContext","req","Promise","resolve","e","Error","keys","DashboardComponent","Component","template","styles","DatasetBrowserService","httpClient","getLineageDescriptors","searchRequest","q","asAtTime","offset","WelcomeComponent","router_1","tabs_1","LineageComponent","router","route","selectedTabIndex","Tab","Summary","hideableOperationTypes","subscriptions","isOperationTypeVisible","opType","hiddenOperationTypes","indexOf","ngOnInit","unshift","subscribe","presentHideableOperationTypes","intersection","uniq","operations","typeOfOperation","paramMap","pm","opId","selectedOperation","getOperation","queryParamMap","qps","selectedAttrIDs","getAll","highlightedNodeIDs","getOperationIdsByAnyAttributeId","fragment","fromFragment","valueOr","unsubscribe","getDataSourceCount","sumBy","node","onOperationSelected","navigate","relativeTo","parent","toFragment","Operation","queryParams","queryParamsHandling","onTabChanged","index","onAttributeSelected","attr","doSelectAttribute","clearSelection","gotoLineageOverview","attrIds","_i","arguments","preserveFragment","toggleOperationTypeVisibility","otherHiddenOpTypes","without","updatedHiddenOperationTypes","concat","hideOp","providers","Router","ActivatedRoute","LineageService","lineagePromiseCache","getLineage","dsId","cache","catch","err","operation_icon_utils_1","VisNode","operation","mainProps","VisEdge","from","to","title","ClusterManager","graph","network","clusterize","rebuildClusters","clusters","refreshHighlightedClustersForNodes","isCluster","clustering","body","setOptions","collapseAllClusters","collapseCluster","collapseClustersExceptForNode","nodeId","filter","some","cluster","clusterNodeProperties","joinCondition","nodeOps","expandClusterForNode","expandCluster","openCluster","lineage_service_1","LineageByDatasetIdResolver","lineageService","dataset","primeng_1","operation_icon_component_1","operation_details_component_1","details_section_header_component_1","details_panel_header_component_1","expression_inline_component_1","expression_dialog_component_1","angular_tree_component_1","attribute_list_component_1","data_type_view_component_1","DetailsModule","AccordionModule","SharedModule","TreeModule","forRoot","OperationDetailsComponent","OperationIconComponent","DetailsPanelHeaderComponent","DetailsSectionHeaderComponent","ExpressionInlineComponent","ExpressionDialogComponent","AttributeListComponent","DataTypeViewComponent","entryComponents","actionMapping","mouse","click","tree","ExpressionDialogComponent_1","onNodeClicked","treeOptions","allowDrag","allowDrop","exprString","expressionRenderer","exprTree","buildExprTree","seq","buildNode","ex","buildChildrenNodes","toggleExpanded","selector","__param","Inject","MAT_DIALOG_DATA","dataset_service_1","PersistentDatasetResolver","datasetService","DatasetLineageOverviewResolver","rxjs_1","operators_1","DatasetLineageOverviewComponent","selectedNode$","combineLatest","pipe","type","lineageAccessors$","lineage$","lin","LineageAccessors","linAccessors","selectedNode","getDataset","distinctUntilChanged","_b","la0","node0","la1","node1","isEqual","updateSelectedState","compositeOp","selectedDataSourceDescription","undefined","selectedDatasetSchema","attrs","getDatasetAttributes","source","destination","schema","timestamp","selectNode","gotoPartialLineage","RetryPopupDialogComponent","platform_browser_dynamic_1","app_module_1","enableProdMode","platformBrowserDynamic","bootstrapModule","AppModule","platform_browser_1","app_component_1","dashboard_module_1","dashboard_component_1","lineage_component_1","lineage_module_1","lineage_resolver_1","welcome_component_1","dataset_resolver_1","dataset_module_1","lineage_overview_resolver_1","lineage_overview_component_1","misc_module_1","xhr_timeout_rectifier_module_1","vis_module_1","lineageRoute","component","matcher","url","consumed","path","posParams","operationId","datasetRoute","routes","pathMatch","redirectTo","BrowserModule","RouterModule","enableTracing","XHRTimeoutRectifierModule","DashboardModule","LineageModule","DatasetModule","VisModule","AppComponent","bootstrap","loading","events","event","updateLoadingStatus","NavigationStart","NavigationEnd","NavigationCancel","NavigationError","material_module_1","forms_1","dataset_browser_component_1","dataset_browser_service_1","ngx_scroll_event_1","ReactiveFormsModule","HttpClientModule","ScrollEventModule","DatasetBrowserComponent","dataset_browser_model_1","dsBrowserService","searchText","FormControl","searchRequest$","BehaviorSubject","valueChanges","debounce","timer","newSearch","distinct","identity","sr","descriptors","getValue","setValue","next","SearchRequest","onScroll","isWindowEvent","isReachingBottom","withOffset","Date","now","appVersion","isActive","isDelayed","showActive","ngOnChanges","changes","setTimeout","Input","HostBinding","tsmonad_1","tab","maybe","exec","groups","animations_1","graph_component_1","details_module_1","expression_render_service_1","NoopAnimationsModule","GraphComponent","vis_options_1","graph_builder_1","vis","cluster_manager_1","graph_model_1","vis_model_1","vis_network_service_1","container","expressionRenderService","visNetworkService","zone","hiddenOperationTypes$","Subject","highlightedNodeIDs$","selectedOperationId$","operationSelected","EventEmitter","changedHiddenOperationTypes$","changedHighlightedNodeIds$","graphRebuildEvidence$","hiddenOpTypes","rebuildGraph","highlightedIds","refreshHighlightedNodes","selectedOpId","refreshSelectedNode","types","ids","sbc","runOutsideAngular","lineageToGraph","Network","nativeElement","visOptions","clusterManager","nodesGroups","siblingsTo","group","find","grp","on","run","emit","canvasElement","getElementsByTagName","style","cursor","ctx","getSelectedNodes","nodePosition","getPositions","fillStyle","circle","x","y","fill","fit","collapseNodes","unselectAll","selectNodes","nodeDataSet","updatedNodes","includes","update","Output","ElementRef","NgZone","autoResize","interaction","hover","selectConnectedEdges","hoverConnectedEdges","layout","hierarchical","enabled","sortMethod","direction","parentCentralization","nodeSpacing","levelSeparation","physics","hierarchicalRepulsion","nodeDistance","springLength","springConstant","damping","highlight","shadow","width","arrows","background","strokeWidth","shape","labelHighlightBold","getLabel","aggregationExpressions","aggregations","joinExpression","condition","filterExpression","sortExpressions","orders","replace","getFileName","sources","truncate","selectedOperationId","operationsByVisibility","groupBy","op","visibleOperations","true","hiddenOperations","false","hiddenOpIds","visibleNodes","visibleEdges","opIdsByInDsId","opIdByOutDsId","output","inputs","inDsId","opsForInput","attrsById","mapValues","attributes","first","datasetsById","datasetIdsThatFormEdges","flatMap","fromOperationId","toOperationId","hiddenOpId","hiddenInputEdges","remove","parentOpId","edgeTitle","attrId","createVisibleEdges","DataSet","typeOfAnyAssumingPrefix","expectedPrefix","typeSuffix","str","search","pos","lastIndexOf","substring","getNthLastIndexOf","_typeHint","prefixWithType","split","prefix","typeOfDataType","dataType","faIconCode","attributeSelected","operationType","getOperationIcon","getExprType","getDroppedAttributesIfAny","attributeIdsByDatasetId","inputAttributeIds","outputAttributeIds","removedAttributesSortedByName","difference","sortBy","selectAttribute","dialog","openExprViewDialog","preventDefault","open","MatDialog","expandRoot","attrClicked","$event","attrTree","a","buildAttrTree","selectedIds","highlightSelected","onTreeInit","attributeId","getDataType","buildChildren","dt","dtt","sdt","fields","f","dataTypeId","buildChildrenForStructType","elementDataTypeId","isExpanded","treeComponent","treeModel","roots","setIsActive","isSelected","ViewChild","TreeComponent","getArrayElementType","arrayDT","DataTypeViewComponent_1","suppressBrowserNativeBehaviour","stopPropagation","srcElement","blur","TreeNode","lienage_overview_graph_component_1","LineageOverviewGraphComponent","lineage_overview_model_1","nodeSelected","nodeActioned","lineagePairs$","pairwise","lineageContainsDataset","lin0","lin1","prevLineage","nextLineage","reactOnChange","eventToClickableNode","nodeIdWithPrefix","LineageOverviewGraphComponent_1","isClickableNodeId","ID_PREFIX_LENGTH","GraphNodeTypesByIdPrefixes","nonClickablePrefixes","ID_PREFIXES","datasource","extra","datasource_cluster","prf","startsWith","buildVisModel","VisNodeType","Dataset","dsNode","dataSource","datasetsIds","values","clickedNode","node_1","getIdentifiableDataSourcesOf","src","assign","recombineByDatasetIdAndLongestAppendSequence","typedMetadataSources","head","pairs","dataSources","datasetNodes","lastPathItemName","wrapText","VisDatasetNode","VisProcessNode","appName","opNodeId","inputEdges","dsNodeId","outputDsNodeId","outputEdge","line","textSize","Observable","_super","Process","__extends","op_","ds_","cl_","retry_popup_dialog_component_1","xhr_timeout_interceptor_service_1","provide","HTTP_INTERCEPTORS","useClass","XHRTimeoutInterceptor","multi","intercept","self","handle","catchError","res","status","dialogConfig","MatDialogConfig","disableClose","afterClosed","clone","setHeaders","X-SPLINE-TIMEOUT","throwError","_lineage$","ReplaySubject","_lineageAccessors","operationById","datasetById","attributeById","dataTypesById","dataTypes","attributesByDatasetId","operationIdsByAttributeId","opInputIds","opOutputId","opDatasetIds","partial","last","typeId"],"mappings":"aACA,SAAAA,EAAAC,GAQA,IAPA,IAMAC,EAAAC,EANAC,EAAAH,EAAA,GACAI,EAAAJ,EAAA,GACAK,EAAAL,EAAA,GAIAM,EAAA,EAAAC,KACQD,EAAAH,EAAAK,OAAoBF,IAC5BJ,EAAAC,EAAAG,GACAG,EAAAP,IACAK,EAAAG,KAAAD,EAAAP,GAAA,IAEAO,EAAAP,GAAA,EAEA,IAAAD,KAAAG,EACAO,OAAAC,UAAAC,eAAAC,KAAAV,EAAAH,KACAc,EAAAd,GAAAG,EAAAH,IAKA,IAFAe,KAAAhB,GAEAO,EAAAC,QACAD,EAAAU,OAAAV,GAOA,OAHAW,EAAAR,KAAAS,MAAAD,EAAAb,OAGAe,IAEA,SAAAA,IAEA,IADA,IAAAC,EACAf,EAAA,EAAiBA,EAAAY,EAAAV,OAA4BF,IAAA,CAG7C,IAFA,IAAAgB,EAAAJ,EAAAZ,GACAiB,GAAA,EACAC,EAAA,EAAkBA,EAAAF,EAAAd,OAA2BgB,IAAA,CAC7C,IAAAC,EAAAH,EAAAE,GACA,IAAAf,EAAAgB,KAAAF,GAAA,GAEAA,IACAL,EAAAQ,OAAApB,IAAA,GACAe,EAAAM,IAAAC,EAAAN,EAAA,KAGA,OAAAD,EAIA,IAAAQ,KAKApB,GACAqB,EAAA,GAGAZ,KAGA,SAAAS,EAAA1B,GAGA,GAAA4B,EAAA5B,GACA,OAAA4B,EAAA5B,GAAA8B,QAGA,IAAAC,EAAAH,EAAA5B,IACAK,EAAAL,EACAgC,GAAA,EACAF,YAUA,OANAhB,EAAAd,GAAAa,KAAAkB,EAAAD,QAAAC,IAAAD,QAAAJ,GAGAK,EAAAC,GAAA,EAGAD,EAAAD,QAKAJ,EAAAO,EAAAnB,EAGAY,EAAAQ,EAAAN,EAGAF,EAAAS,EAAA,SAAAL,EAAAM,EAAAC,GACAX,EAAAY,EAAAR,EAAAM,IACA1B,OAAA6B,eAAAT,EAAAM,GAA0CI,YAAA,EAAAC,IAAAJ,KAK1CX,EAAAgB,EAAA,SAAAZ,GACA,oBAAAa,eAAAC,aACAlC,OAAA6B,eAAAT,EAAAa,OAAAC,aAAwDC,MAAA,WAExDnC,OAAA6B,eAAAT,EAAA,cAAiDe,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAvC,OAAAwC,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAvC,OAAA6B,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAS,EAAAc,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAAtB,GACA,IAAAM,EAAAN,KAAAiB,WACA,WAA2B,OAAAjB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAL,EAAAS,EAAAE,EAAA,IAAAA,GACAA,GAIAX,EAAAY,EAAA,SAAAgB,EAAAC,GAAsD,OAAA7C,OAAAC,UAAAC,eAAAC,KAAAyC,EAAAC,IAGtD7B,EAAA8B,EAAA,UAEA,IAAAC,EAAAC,OAAA,aAAAA,OAAA,iBACAC,EAAAF,EAAAhD,KAAA2C,KAAAK,GACAA,EAAAhD,KAAAX,EACA2D,IAAAG,QACA,QAAAvD,EAAA,EAAgBA,EAAAoD,EAAAlD,OAAuBF,IAAAP,EAAA2D,EAAApD,IACvC,IAAAU,EAAA4C,EAIA1C,EAAAR,MAAA,QAEAU,ybCtIA,IAAA0C,EAAAnC,EAAA,GACAoC,EAAApC,EAAA,GACAqC,EAAArC,EAAA,KACAsC,EAAAtC,EAAA,KAgBAuC,EAAA,oBAAAA,KACA,OADaA,EAAUC,GAdtBL,EAAAM,UACGC,SACIN,EAAAO,cAEJC,cACIP,EAAAQ,iBACAP,EAAAQ,2BAEJ1C,SACIiC,EAAAQ,iBACAP,EAAAQ,8BAIKP,GAAb,GAAanC,EAAAmC,gGChBb,IAAAQ,EAAA,WACI,SAAAA,EAAmBrC,EACAsC,EACAC,GAFAC,KAAAxC,OACAwC,KAAAF,OACAE,KAAAD,OAWvB,OARWF,EAAA9D,UAAAkE,cAAP,SAAqBC,GACjB,OACIC,KAAMH,KAAKD,KACXK,KAAM,GACNN,KAAME,KAAKF,KACXI,MAAOA,IAGnBL,EAdA,GAAa3C,EAAA2C,OAgBb3C,EAAAmD,mBAAA,SAAmCC,GAC/B,IAAIP,EAAO,cAEX,OAAQO,GACJ,IAAK,QACD,OAAO,IAAIT,EAAK,cAAe,IAAUE,GAE7C,IAAK,SACD,OAAO,IAAIF,EAAK,YAAa,IAAUE,GAE3C,IAAK,OACD,OAAO,IAAIF,EAAK,sBAAuB,IAAUE,GAErD,IAAK,YACD,OAAO,IAAIF,EAAK,gBAAiB,IAAUE,GAE/C,IAAK,OACD,OAAO,IAAIF,EAAK,eAAgB,IAAUE,GAE9C,IAAK,QACD,OAAO,IAAIF,EAAK,UAAW,IAAUE,GAEzC,IAAK,aACD,OAAO,IAAIF,EAAK,yBAA0B,IAAUE,GAExD,IAAK,OACD,OAAO,IAAIF,EAAK,cAAe,IAAUE,GAE7C,IAAK,QACD,OAAO,IAAIF,EAAK,iBAAkB,IAAUE,GAEhD,IAAK,YACD,OAAO,IAAIF,EAAK,UAAW,IAAUE,GAEzC,IAAK,UACD,OAAO,IAAIF,EAAK,qBAAsB,IAAUE,GAEpD,QACI,OAAO,2bCzDnB,IAAAQ,EAAAzD,EAAA,IAgCAmC,EAAAnC,EAAA,GAEI0D,GAGAD,EAAAE,sBACAF,EAAAG,kBACAH,EAAAI,oBACAJ,EAAAK,eACAL,EAAAM,eACAN,EAAAO,gBACAP,EAAAQ,gBACAR,EAAAS,qBAGAT,EAAAU,cACAV,EAAAW,iBACAX,EAAAY,iBAGAZ,EAAAa,cACAb,EAAAc,kBACAd,EAAAe,cACAf,EAAAgB,iBACAhB,EAAAiB,cACAjB,EAAAkB,mBAGAlB,EAAAmB,gBACAnB,EAAAoB,sBACApB,EAAAqB,eACArB,EAAAsB,cACAtB,EAAAuB,yBACAvB,EAAAwB,qBAGAxB,EAAAyB,gBACAzB,EAAA0B,iBACA1B,EAAA2B,kBAGA3B,EAAA4B,eACA5B,EAAA6B,cACA7B,EAAA8B,oBAOJC,EAAA,oBAAAA,KACA,OADaA,EAAchD,GAJ1BL,EAAAM,UACGC,QAASgB,EACTtD,QAASsD,KAEA8B,GAAb,GAAapF,EAAAoF,oGChFb,IAAAC,EAAA,WAIA,OAHI,SAAmBC,EACAC,GADAzC,KAAAwC,QACAxC,KAAAyC,SAFvB,GAAavF,EAAAqF,WAMb,IAAAG,EAAA,WAcA,OAXI,SAA4BC,EACAC,EACAJ,EACAK,QAAA,IAAAA,OAAA,GAHA7C,KAAA2C,KACA3C,KAAA4C,QACA5C,KAAAwC,QACAxC,KAAA6C,gBACxB7C,KAAK8C,MACD3C,KAAM,cACNC,KAAM,GACNN,KAAM,IACNI,MAAO2C,EAAgB,UAAY,YAX/C,GAAa3F,EAAAwF,2kBCEb,IAAAK,EAAAjG,EAAA,IACAmC,EAAAnC,EAAA,GACAkG,EAAAlG,EAAA,IACAmG,EAAAnG,EAAA,IAGAoG,EAAA,WAEI,SAAAA,EAAoBC,GAAAnD,KAAAmD,eAsFxB,OAnFWD,EAAAnH,UAAAqH,QAAP,SAAeC,GACX,OAAQN,EAAAO,WAAWD,IACf,IAAK,UACD,MAAO,UAEX,IAAK,SACD,OAAiBA,EAAME,OAE3B,IAAK,QACD,MAAO,QAEX,IAAK,MACD,MAAO,OAAcF,EAAM7F,KAE/B,IAAK,UACD,IAAMgG,EAAeH,EACrB,OAAOrD,KAAKmD,aAAaM,iBAAiBC,aAAaF,EAAGG,OAAOnG,KAErE,IAAK,UACL,IAAK,cAED,OAD4B6F,EACnB7F,OAKd0F,EAAAnH,UAAA6H,QAAP,SAAeP,GAAf,IAAAQ,EAAA7D,KACI,OAAQ+C,EAAAO,WAAWD,IACf,IAAK,UACD,OAAQA,EAAkBpF,MAE9B,IAAK,SACD,IAAM6F,EAAsBT,EACtBU,EAAcD,EAAWE,SAAS,GAClCC,EAAeH,EAAWE,SAAS,GACnCE,EAAS,SAACC,GACZ,IAAMC,EAAOP,EAAKD,QAAQO,GAC1B,MAA8B,UAAvBpB,EAAAO,WAAWa,GAAuB,IAAIC,EAAI,IAAMA,GAE3D,OAAUF,EAAOH,GAAY,IAAID,EAAWP,OAAM,IAAIW,EAAOD,GAEjE,IAAK,QACD,IAAMI,EAAahB,EACnB,OAAUrD,KAAK4D,QAAQS,EAAGC,OAAM,OAAOD,EAAGE,MAE9C,IAAK,MACD,IAAMC,EAAYnB,EACZoB,EAAYxB,EAAEyB,IAAIF,EAAIR,SAAU,SAAAM,GAAS,OAAAT,EAAKD,QAAQU,KAC5D,MAAO,OAAOE,EAAIhH,KAAI,IAAIiH,EAAUE,KAAK,MAAK,IAElD,IAAK,UACD,IAAMnB,EAAeH,EACrB,OAAOrD,KAAKmD,aAAaM,iBAAiBC,aAAaF,EAAGG,OAAOnG,KAErE,IAAK,cACD,OAAOwC,KAAK4E,wBAAwBvB,GAExC,IAAK,UAGD,OAFiBrD,KAAK4E,wBAAwBvB,GAE9B,IADOA,EAAkBW,SAASU,IAAI,SAAAJ,GAAS,OAAAT,EAAKD,QAAQU,KAC1CK,KAAK,MAAK,MAKhDzB,EAAAnH,UAAA6I,wBAAR,SAAgCC,GAAhC,IAAAhB,EAAA7D,KACUyE,EAAYxB,EAAEyB,IAAIG,EAAIC,OAAQ,SAAC7G,EAAOT,GAAS,OAAGA,EAAI,IAAIqG,EAAKkB,YAAY9G,KACjF,OAAOgF,EAAE+B,QAAQP,GACXI,EAAIrH,KACDqH,EAAIrH,KAAI,IAAIiH,EAAUE,KAAK,MAAK,KAGrCzB,EAAAnH,UAAAgJ,YAAR,SAAoBE,GAApB,IAAApB,EAAA7D,KACI,OAAI+C,EAAAO,WAAW2B,GACJjF,KAAK4D,QAAQqB,GACbhC,EAAEiC,QAAQD,GACX,IAAIA,EAAIP,IAAI,SAAAhH,GAAK,OAAAmG,EAAKkB,YAAYrH,KAAIiH,KAAK,MAAK,IAC/C1B,EAAEkC,cAAcF,GAEjB,IADgBhC,EAAEmC,QAAQH,GAAKP,IAAI,SAACW,OAACC,EAAAD,EAAA,GAAGE,EAAAF,EAAA,GAAO,OAAGC,EAAC,KAAKzB,EAAKkB,YAAYQ,KACvDZ,KAAK,MAAK,IAE3BM,EAAIO,YAtFVtC,EAAuB5D,GADnCL,EAAAwG,oCAGqCzC,EAAA0C,gBAFzBxC,GAAb,GAAahG,EAAAgG,8cClBb,IAAAjE,EAAAnC,EAAA,GAKA6I,EAAA,oBAAAA,KAsBA,OAnBI7J,OAAA6B,eAAWgI,EAAA5J,UAAA,eAAX,WACI,OAAOiE,KAAK4F,0CAGTD,EAAA5J,UAAA8J,cAAP,SAAqBC,GAGjB,OAFA9F,KAAK+F,eACL/F,KAAK4F,SAAWE,IACT9F,KAAK4F,UAGTD,EAAA5J,UAAAiK,YAAP,WACIhG,KAAK+F,gBAGDJ,EAAA5J,UAAAgK,aAAR,WACQ/F,KAAK4F,UACL5F,KAAK4F,SAASK,WAnBbN,EAAiBrG,GAD7BL,EAAAwG,cACYE,GAAb,GAAazI,EAAAyI,8kBCHb,IAAA1G,EAAAnC,EAAA,GACAoJ,EAAApJ,EAAA,IAEAqJ,EAAArJ,EAAA,KAGAsJ,EAAA,WAII,SAAAA,EAAoBC,GAAArG,KAAAqG,OAHZrG,KAAAsG,oBAAsB,IAAIH,EAAAI,aAC1BvG,KAAAwG,qBAAuB,IAAIL,EAAAI,aAuBvC,OAlBIH,EAAArK,UAAA0K,qBAAA,SAAqB9D,GAArB,IAAAkB,EAAA7D,KACI,OAAOA,KAAKsG,oBAAoBI,YAAY/D,EAAI,WAC5C,OAAAkB,EAAKwC,KAAKxI,IAAiC,gBAAgB8E,EAAE,eAAegE,eAGpFP,EAAArK,UAAA6K,mBAAA,SAAmBC,GAAnB,IAAAhD,EAAA7D,KAWI,OAAOA,KAAKwG,qBAAqBE,YAAYG,EALjB,WACxB,IAAIC,EAAiBjD,EAAKwC,KAAKxI,IAAkB,gBAAgBgJ,EAAS,qBAAqBF,YAC/F,OAAOG,EAAeC,KAPc,SAACD,GAA0C,gBAACE,GAEhF,OADAA,EAAQC,SAASC,QAAQ,SAAAC,GAAM,OAAAtD,EAAK2C,qBAAqBY,IAAID,EAAGxE,GAAImE,KAC7DE,GAKoBK,CAAgCP,OApB1DV,EAAc9G,GAD1BL,EAAAwG,oCAK6BS,EAAAoB,cAJjBlB,GAAb,GAAalJ,EAAAkJ,oCCtBb,SAAAmB,EAAAC,GAGA,OAAAC,QAAAC,UAAAX,KAAA,WACA,IAAAY,EAAA,IAAAC,MAAA,uBAAAJ,EAAA,KAEA,MADAG,EAAA7H,KAAA,mBACA6H,IAGAJ,EAAAM,KAAA,WAA4C,UAC5CN,EAAAG,QAAAH,EACApK,EAAAD,QAAAqK,EACAA,EAAA5E,GAAA,wbCIA,IAAA1D,EAAAnC,EAAA,GAMAgL,EAAA,oBAAAA,KACA,OADaA,EAAkBxI,GAJ9BL,EAAA8I,WACGC,SAAUlL,EAAQ,KAClBmL,QAASnL,EAAQ,SAERgL,GAAb,GAAa5K,EAAA4K,+kBCNb,IAAA7I,EAAAnC,EAAA,GAEAoJ,EAAApJ,EAAA,IAIAoL,EAAA,WACI,SAAAA,EAAoBC,GAAAnI,KAAAmI,aAgBxB,OAbID,EAAAnM,UAAAqM,sBAAA,SAAsBC,GAClB,OAAOrI,KAAKmI,WAAWtK,IACnB,4BAEIiH,QACIwD,EAAGD,EAAcjE,KACjBmE,SAAU,GAAGF,EAAcE,SAC3BC,OAAQ,GAAGH,EAAcG,OACzBpI,KAAM,QAGhBuG,aAfGuB,EAAqB5I,GADjCL,EAAAwG,oCAEmCS,EAAAoB,cADvBY,GAAb,GAAahL,EAAAgL,4cCNb,IAAAjJ,EAAAnC,EAAA,GAMA2L,EAAA,oBAAAA,KACA,OADaA,EAAgBnJ,GAJ5BL,EAAA8I,WACGC,SAAUlL,EAAQ,KAClBmL,QAASnL,EAAQ,SAER2L,GAAb,GAAavL,EAAAuL,6kBCNb,IAAAxJ,EAAAnC,EAAA,GACA4L,EAAA5L,EAAA,IAEAkG,EAAAlG,EAAA,IACAiG,EAAAjG,EAAA,IACAmG,EAAAnG,EAAA,IAEA6L,EAAA7L,EAAA,KAQA8L,EAAA,WAiBI,SAAAA,EAAoBC,EACAC,EACA3F,GAFAnD,KAAA6I,SACA7I,KAAA8I,QACA9I,KAAAmD,eAjBpBnD,KAAA+I,iBAAwBJ,EAAAK,IAAIC,QAK5BjJ,KAAAkJ,wBAA2C,aAAc,SAAU,OAAQ,aAInElJ,KAAAmJ,iBA2GZ,OAzGIP,EAAA7M,UAAAqN,uBAAA,SAAuBC,GACnB,OAAOrJ,KAAKsJ,qBAAqBC,QAAQF,GAAU,GAQvDT,EAAA7M,UAAAyN,SAAA,eAAA3F,EAAA7D,KACIA,KAAKmJ,cAAcM,QAAQzJ,KAAK8I,MAAM3N,KAAKuO,UAAU,SAACvO,GAClD0I,EAAKmD,QAAU7L,EAAK6L,QACpBnD,EAAKV,aAAa6D,QAAU7L,EAAK6L,QACjCnD,EAAK8F,8BACD1G,EAAE2G,aACE3G,EAAE4G,KAAK1O,EAAK6L,QAAQ8C,WAAWpF,IAAI3B,EAAAgH,kBACnClG,EAAKqF,2BAGjBlJ,KAAKmJ,cAAcM,QAAQzJ,KAAK8I,MAAMkB,SAASN,UAAU,SAAAO,GACrD,IAAIC,EAAOD,EAAGpM,IAAI,eAClBgG,EAAKsG,kBAAoBtG,EAAKV,aAAaM,iBAAiB2G,aAAaF,MAG7ElK,KAAKmJ,cAAcM,QAAQzJ,KAAK8I,MAAMuB,cAAcX,UAAU,SAAAY,SAC1DzG,EAAK0G,gBAAkBD,EAAIE,OAAO,QAClC3G,EAAK4G,oBAAqBpF,EAAAxB,EAAKV,aAAaM,kBAAiBiH,gCAA+BpO,MAAA+I,EAAIxB,EAAK0G,iBACrG1G,EAAKyF,qBAAyCgB,EAAIE,OAAO,aAG7DxK,KAAKmJ,cAAcM,QAAQzJ,KAAK8I,MAAM6B,SAASjB,UAAU,SAAAiB,GACrD9G,EAAKkF,iBAAmBJ,EAAAK,IAAI4B,aAAaD,GAAUE,QAAQhH,EAAKkF,sBAIxEH,EAAA7M,UAAAiK,YAAA,WACIhG,KAAKmJ,cAAcjC,QAAQ,SAAAnK,GAAK,OAAAA,EAAE+N,iBAGtClC,EAAA7M,UAAAgP,mBAAA,WACI,OAAO9H,EAAE+H,MAAMhL,KAAKgH,QAAQ8C,WAAY,SAAAmB,GAAQ,QAA2B,QAAzBlI,EAAAgH,gBAAgBkB,OAGtErC,EAAA7M,UAAAmP,oBAAA,SAAoBhB,GACZA,EACAlK,KAAK6I,OAAOsC,UAAU,KAAMjB,IACpBkB,WAAYpL,KAAK8I,MAAMuC,OACvBV,SAAUhC,EAAAK,IAAIsC,WAAW3C,EAAAK,IAAIuC,WAC7BC,eACAC,oBAAqB,UAI7BzL,KAAK6I,OAAOsC,UAAU,MACdC,WAAYpL,KAAK8I,MAAMuC,OACvBV,SAAUhC,EAAAK,IAAIsC,WAAW3C,EAAAK,IAAIC,SAC7BuC,eACAC,oBAAqB,WAKrC7C,EAAA7M,UAAA2P,aAAA,SAAa/D,GACT3H,KAAK6I,OAAOsC,aACRR,SAAUhC,EAAAK,IAAIsC,WAAW3D,EAAEgE,OAC3BF,oBAAqB,cAK7B7C,EAAA7M,UAAA6P,oBAAA,SAAoBC,GAChB7L,KAAK8L,kBAAkBD,EAAKlJ,KAGhCiG,EAAA7M,UAAAgQ,eAAA,WACI/L,KAAK8L,qBAGTlD,EAAA7M,UAAAiQ,oBAAA,WACIhM,KAAK6I,OAAOsC,UAAU,aAClBR,SAAU,aACVS,WAAYpL,KAAK8I,MAAMuC,OAAOA,UAI9BzC,EAAA7M,UAAA+P,kBAAR,eAA0B,IAAAG,KAAAC,EAAA,EAAAA,EAAAC,UAAAxQ,OAAAuQ,IAAAD,EAAAC,GAAAC,UAAAD,GACtBlM,KAAK6I,OAAOsC,aACRK,aAAcK,KAAQI,GACtBR,oBAAqB,QACrBW,kBAAkB,KAI1BxD,EAAA7M,UAAAsQ,8BAAA,SAA8BhD,GAC1B,IAAIiD,EAAqBrJ,EAAEsJ,QAAQvM,KAAKsJ,qBAAsBD,GAC1DmD,EAA+BxM,KAAKsJ,qBAAqB3N,OAAS2Q,EAAmB3Q,OAC/E2Q,EACAtM,KAAKsJ,qBAAqBmD,OAAOpD,GAE3CrJ,KAAK6I,OAAOsC,aACRK,aAAckB,OAAUF,GACxBf,oBAAqB,QACrBW,kBAAkB,KAnHjBxD,EAAgBtJ,GAL5BL,EAAA8I,WACGC,SAAUlL,EAAQ,KAClBmL,QAASnL,EAAQ,MACjB6P,sCAmB4BjE,EAAAkE,OACDlE,EAAAmE,eACO7J,EAAA0C,gBAnBzBkD,GAAb,GAAa1L,EAAA0L,6kBCfb,IAAA3J,EAAAnC,EAAA,GACAoJ,EAAApJ,EAAA,IAEAqJ,EAAArJ,EAAA,KAGAgQ,EAAA,WAGI,SAAAA,EAAoB3E,GAAAnI,KAAAmI,aAFZnI,KAAA+M,oBAAsB,IAAI5G,EAAAI,aAStC,OAJIuG,EAAA/Q,UAAAiR,WAAA,SAAWC,GAAX,IAAApJ,EAAA7D,KACI,OAAOA,KAAK+M,oBAAoBrG,YAAYuG,EAAM,WAC9C,OAAApJ,EAAKsE,WAAWtK,IAAkB,gBAAgBoP,EAAI,oBAAoBtG,eARzEmG,EAAcxN,GAD1BL,EAAAwG,oCAImCS,EAAAoB,cAHvBwF,GAAb,GAAa5P,EAAA4P,oGCNb,IAAAvG,EAAA,oBAAAA,IACYvG,KAAAkN,SAsBZ,OApBW3G,EAAAxK,UAAAqL,IAAP,SAAW7I,EAAaN,GAEpB,OADA+B,KAAKkN,MAAM3O,GAAON,EACX+B,MAGJuG,EAAAxK,UAAA8B,IAAP,SAAWU,GACP,OAAOyB,KAAKkN,MAAM3O,IAGfgI,EAAAxK,UAAA2K,YAAP,SAAmBnI,EAAaD,GAAhC,IAAAuF,EAAA7D,KACQ/B,EAAoB+B,KAAKkN,MAAM3O,GAQnC,OAPKN,IACDA,EAAQK,EAAOC,GAAK4O,MAAM,SAACC,GAEvB,aADOvJ,EAAKqJ,MAAM3O,GACZ6O,IAEVpN,KAAKkN,MAAM3O,GAAON,GAEfA,GAEfsI,EAvBA,GAAarJ,EAAAqJ,kGCEb,IAAAxD,EAAAjG,EAAA,IAEAuQ,EAAAvQ,EAAA,KAEAwQ,EAAA,WAWA,OAPI,SAA4BC,EACA3K,EACAC,QAAA,IAAAA,OAAA,GAFA7C,KAAAuN,YACAvN,KAAA4C,QACA5C,KAAA6C,gBACxB7C,KAAK2C,GAAK4K,EAAUC,UAAU7K,GAC9B3C,KAAK8C,KAAOuK,EAAAhN,mBAAmB0C,EAAAgH,gBAAgBwD,IAC1CtN,cAAc4C,EAAgB,UAAY,YATvD,GAAa3F,EAAAoQ,UAab,IAAAG,EAAA,WAUA,OALI,SAAYC,EAAcC,EAAYC,GAClC5N,KAAK0N,KAAOA,EACZ1N,KAAK2N,GAAKA,EACV3N,KAAK4N,MAAQA,GARrB,GAAa1Q,EAAAuQ,6FClBb,IAAAxK,EAAAnG,EAAA,IAKA+Q,EAAA,WAII,SAAAA,EAAoBC,EACAC,EACAC,GAFAhO,KAAA8N,QACA9N,KAAA+N,UACA/N,KAAAgO,aAgDxB,OA7CWH,EAAA9R,UAAAkS,gBAAP,WACIjO,KAAKkO,SAAWlO,KAAKgO,WACjBhO,KAAK8N,MAAMtL,MAAM3E,MACjBmC,KAAK8N,MAAMrL,MAAM5E,QAGlBgQ,EAAA9R,UAAAoS,mCAAP,eAAAtK,EAAA7D,KACIA,KAAKiO,kBACLjO,KAAKkO,SAAShH,QAAQ,SAAA5J,GACduG,EAAKkK,QAAQK,UAAU9Q,EAAEqF,KAEnBkB,EAAKkK,QAASM,WAAWC,KAAK9L,MAAMlF,EAAEqF,IAAI4L,WAAWjR,MAIhEuQ,EAAA9R,UAAAyS,oBAAP,eAAA3K,EAAA7D,KACIA,KAAKkO,SAAShH,QAAQ,SAAA5J,GAAK,OAAAuG,EAAK4K,gBAAgBnR,MAG7CuQ,EAAA9R,UAAA2S,8BAAP,SAAqCC,GAArC,IAAA9K,EAAA7D,KACIA,KAAKkO,SACAU,OAAO,SAAAtR,GAAK,OAAC2F,EAAE4L,KAAKvR,EAAEkF,OAAQG,GAAIgM,MAClCzH,QAAQ,SAAA5J,GAAK,OAAAuG,EAAK4K,gBAAgBnR,MAGnCuQ,EAAA9R,UAAA0S,gBAAR,SAAwBK,GACpB9O,KAAK+N,QAAQe,SACTC,sBAAuBD,EACvBE,cAAe,SAAAC,GAAW,OAAAhM,EAAE4L,KAAKC,EAAQtM,OAAQG,GAAIsM,EAAQtM,SAI9DkL,EAAA9R,UAAAmT,qBAAP,SAA4BP,GAA5B,IAAA9K,EAAA7D,KACIA,KAAKkO,SACAU,OAAO,SAAAtR,GAAK,OAAA2F,EAAE4L,KAAKvR,EAAEkF,OAAQG,GAAIgM,MACjCzH,QAAQ,SAAA5J,GAAK,OAAAuG,EAAKsL,cAAc7R,MAGjCuQ,EAAA9R,UAAAoT,cAAR,SAAsBL,GAClB,IACI9O,KAAK+N,QAAQqB,YAAYN,EAAQnM,IACnC,MAAOgF,MAIjBkG,EAtDA,GAAa3Q,EAAA2Q,2kBCNb,IAAA5O,EAAAnC,EAAA,GAGAuS,EAAAvS,EAAA,KAGAwS,EAAA,WAEI,SAAAA,EAAoBC,GAAAvP,KAAAuP,iBAOxB,OAJID,EAAAvT,UAAA2L,QAAA,SAAQoB,GACJ,IAAI0G,EAAuC1G,EAAMuC,OAAOlQ,KAAc,QACtE,OAAO6E,KAAKuP,eAAevC,WAAWwC,EAAQ3I,YAPzCyI,EAA0BhQ,GADtCL,EAAAwG,oCAGuC4J,EAAAvC,kBAF3BwC,GAAb,GAAapS,EAAAoS,idCNb,IAAArQ,EAAAnC,EAAA,GACAoC,EAAApC,EAAA,GAEAA,EAAA,KACAA,EAAA,KACA,IAAA2S,EAAA3S,EAAA,KAEA4S,EAAA5S,EAAA,KACA6S,EAAA7S,EAAA,KACA8S,EAAA9S,EAAA,KACA+S,EAAA/S,EAAA,KACAgT,EAAAhT,EAAA,KACAiT,EAAAjT,EAAA,KACAkT,EAAAlT,EAAA,KACAmT,EAAAnT,EAAA,KACAoT,EAAApT,EAAA,KA6BAqT,EAAA,oBAAAA,KAEA,OAFaA,EAAa7Q,GA3BzBL,EAAAM,UACGC,SACIN,EAAAO,aACAgQ,EAAAW,gBACAX,EAAAY,aACAL,EAAAM,WAAWC,WAEf7Q,cACIiQ,EAAAa,0BACAd,EAAAe,uBACAZ,EAAAa,4BACAd,EAAAe,8BACAb,EAAAc,0BACAb,EAAAc,0BACAZ,EAAAa,uBACAZ,EAAAa,uBAEJC,iBACIjB,EAAAc,2BAEJ3T,SACIwS,EAAAe,uBACAd,EAAAa,0BACAP,EAAAa,uBACAjB,EAAAa,gCAGKP,GAAb,GAAajT,EAAAiT,8oBC5Cb,IAAA5P,EAAAzD,EAAA,IACAmC,EAAAnC,EAAA,GAkBA+T,EAAA,WAoBI,SAAAA,EAAqC1V,GAZ5B6E,KAAAiR,eACLC,OACIC,MAAO,SAACC,EAAMnG,GAAS,OAAAoG,EAA0BC,cAAcrG,MAI9DjL,KAAAuR,aACLN,cAAejR,KAAKiR,cACpBO,WAAW,EACXC,WAAW,GAIXzR,KAAKqD,KAAOlI,EAAKkI,KACjBrD,KAAK0R,WAAavW,EAAKuW,WACvB1R,KAAK2R,mBAAqBxW,EAAKwW,mBAC/B3R,KAAK4R,SAAW5R,KAAK6R,sBAwB7B,SAhDahB,EA2BDA,EAAA9U,UAAA8V,cAAR,eAAAhO,EAAA7D,KACQ8R,EAAM,EAEJC,EAAY,SAAC1O,GAAsB,OACrCV,GAAImP,IACJtU,KAAMqG,EAAK8N,mBAAmBvO,QAAQC,GACtCW,SAGJ,SAA4BgO,GACxB,IAAMhO,EAAWgO,EAAa,UAAMA,EAAU,QAAMA,EAAU,OAC9D,OAAOhO,GAAYA,EAASU,IAAIqN,GALtBE,CAAmB5O,KAQjC,OAAQ0O,EAAU/R,KAAKqD,QAGpBwN,EAAAS,cAAP,SAAqBrG,GACjBA,EAAKiH,kBA7CArB,EAAyBQ,EAAA/R,GAXrCL,EAAA8I,WACGoK,SAAU,oBACVlK,QAASnL,EAAQ,MACjBkL,SAAU,oPA4BGoK,EAAA,EAAAnT,EAAAoT,OAAO9R,EAAA+R,mDApBXzB,GAAb,GAAa3T,EAAA2T,slBCnBb,IAAA5R,EAAAnC,EAAA,GAIAyV,EAAAzV,EAAA,KAGA0V,EAAA,WAEI,SAAAA,EAAoBC,GAAAzS,KAAAyS,iBAQxB,OALID,EAAAzW,UAAA2L,QAAA,SAAQoB,GACJ,IAAImE,EAAOnE,EAAMkB,SAASnM,IAAI,MAC9B,OAAOmC,KAAKyS,eAAehM,qBAAqBwG,IAP3CuF,EAAyBlT,GADrCL,EAAAwG,oCAGuC8M,EAAAnM,kBAF3BoM,GAAb,GAAatV,EAAAsV,slBCPb,IAAAvT,EAAAnC,EAAA,GAGAyV,EAAAzV,EAAA,KAGA4V,EAAA,WAEI,SAAAA,EAAoBD,GAAAzS,KAAAyS,iBAQxB,OALIC,EAAA3W,UAAA2L,QAAA,SAAQoB,GACJ,IAAI0G,EAAuC1G,EAAMuC,OAAOlQ,KAAc,QACtE,OAAO6E,KAAKyS,eAAe7L,mBAAmB4I,EAAQ3I,YAPjD6L,EAA8BpT,GAD1CL,EAAAwG,oCAGuC8M,EAAAnM,kBAF3BsM,GAAb,GAAaxV,EAAAwV,2lBCNb,IAAAzT,EAAAnC,EAAA,GACA4L,EAAA5L,EAAA,IAEA6V,EAAA7V,EAAA,IACAmG,EAAAnG,EAAA,IAGAkG,EAAAlG,EAAA,IACA8V,EAAA9V,EAAA,IAQA+V,EAAA,WASI,SAAAA,EACY/J,EACAD,EACA1F,GAFAnD,KAAA8I,QACA9I,KAAA6I,SACA7I,KAAAmD,eALJnD,KAAAmJ,iBAyEZ,OAjEI0J,EAAA9W,UAAAyN,SAAA,eAAA3F,EAAA7D,KACIA,KAAKmJ,cAAcM,QACfzJ,KAAK8I,MAAM3N,KAAKuO,UAAU,SAACvO,GACvB,OAAA0I,EAAKV,aAAa6D,QAAU7L,EAAK6L,WAEzChH,KAAK8S,cACDH,EAAAI,cACI/S,KAAK8I,MAAM6B,SACX3K,KAAK8I,MAAMuC,OAAOlQ,MACpB6X,KAAKJ,EAAAlO,IAAI,SAACW,GACR,OACI4N,KAFK5N,EAAA,GAGL1C,GAHe0C,EAAA,GAGNmK,QAAQ3I,cAG7B,IAAIqM,EAAoBlT,KAAKmD,aAAagQ,SAASH,KAAKJ,EAAAlO,IAAI,SAAA0O,GAAO,WAAIpQ,EAAAqQ,iBAAiBD,MAExFpT,KAAKmJ,cAAcM,QAAQkJ,EAAAI,cAAcG,EAAmBlT,KAAK8S,eAC5DE,KACGJ,EAAAhE,OAAO,SAACvJ,OAACiO,EAAAjO,EAAA,GAAckO,EAAAlO,EAAA,GAAkB,QAAEiO,EAAaE,WAAWD,EAAa5Q,MAChFiQ,EAAAa,qBAAqB,SAACpO,EAAcqO,OAAbC,EAAAtO,EAAA,GAAKuO,EAAAvO,EAAA,GAASwO,EAAAH,EAAA,GAAKI,EAAAJ,EAAA,GAAW,OAAAC,EAAI3M,QAAQrE,IAAMkR,EAAI7M,QAAQrE,IAAMM,EAAE8Q,QAAQH,EAAOE,MAC7GpK,UAAU,SAACrE,OAACiO,EAAAjO,EAAA,GAAckO,EAAAlO,EAAA,GAAkB,OAAAxB,EAAKmQ,oBAAoBV,EAAcC,OAG5FV,EAAA9W,UAAAiK,YAAA,WACIhG,KAAKmJ,cAAcjC,QAAQ,SAAAnK,GAAK,OAAAA,EAAE+N,iBAGtC+H,EAAA9W,UAAAiY,oBAAA,SAAoBV,EAAgCrI,GAChD,IAAIgJ,EAA0BX,EAAalJ,aAAaa,EAAKtI,IAC7D,OAAQsI,EAAKgI,MACT,IAAK,YACDjT,KAAKkU,mCAAgCC,EACrCnU,KAAKmK,kBAAoB8J,EACzB,MACJ,IAAK,aACD,IAAMG,GAAyBC,MAAOf,EAAagB,qBAAqBrJ,EAAKtI,KAC7E3C,KAAKkU,+BACDK,OAAQN,EAAYO,YACpBC,OAAQL,EACRM,UAAWT,EAAYS,WAE3B1U,KAAKmK,uBAAoBgK,IAKrCtB,EAAA9W,UAAA4Y,WAAA,SAAWhG,EAAgBrO,GACvB,OAAQA,GACJ,IAAK,YACL,IAAK,aACDN,KAAK6I,OAAOsC,UACP,UAAWwD,EAAQ,UAAW,aAC3BvD,WAAYpL,KAAK8I,MAAMuC,OAAOA,OAAOA,OACrCV,SAAUrK,MAK9BuS,EAAA9W,UAAA6Y,mBAAA,SAAmB3H,GACfjN,KAAK6I,OAAOsC,UACP,UAAW8B,EAAM,UAAW,YACzB7B,WAAYpL,KAAK8I,MAAMuC,OAAOA,OAAOA,UA7ExCwH,EAA+BvT,GAN3CL,EAAA8I,WACGC,SAAUlL,EAAQ,KAClBmL,QAASnL,EAAQ,MACjB6P,WAAY3J,EAAA0C,uCAaOgD,EAAAmE,eACCnE,EAAAkE,OACM5J,EAAA0C,gBAZjBmN,GAAb,GAAa3V,EAAA2V,sdChBb,IAAA5T,EAAAnC,EAAA,GAMA+X,EAAA,oBAAAA,KACA,OADaA,EAAyBvV,GAJrCL,EAAA8I,WACGC,SAAUlL,EAAQ,KAClBmL,QAASnL,EAAQ,SAER+X,GAAb,GAAa3X,EAAA2X,+GCNb/X,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACA,IAAAgY,EAAAhY,EAAA,KACAiY,EAAAjY,EAAA,KACAA,EAAA,GAGyBkY,iBAEzBF,EAAAG,yBAAyBC,gBAAgBH,EAAAI,gCC3BzCrY,EAAQ,IAARA,CAA6FA,EAAQ,yBCArGK,EAAAD,QAAA,00BCgBA,IAAA+B,EAAAnC,EAAA,GACAsY,EAAAtY,EAAA,IACA4L,EAAA5L,EAAA,IACAA,EAAA,KACA,IAAAuY,EAAAvY,EAAA,KACAwY,EAAAxY,EAAA,KACAyY,EAAAzY,EAAA,KACA0Y,EAAA1Y,EAAA,KACA2Y,EAAA3Y,EAAA,KACA4Y,EAAA5Y,EAAA,KACA6Y,EAAA7Y,EAAA,KACA8Y,EAAA9Y,EAAA,KACA+Y,EAAA/Y,EAAA,KACAgZ,EAAAhZ,EAAA,KACAiZ,EAAAjZ,EAAA,KACAkZ,EAAAlZ,EAAA,KACAmZ,EAAAnZ,EAAA,KACAkG,EAAAlG,EAAA,IACAoZ,EAAApZ,EAAA,KAGMqZ,GACFC,UAAWZ,EAAA5M,iBACXyN,QAAS,SAACC,GACN,OAAgB,IAAfA,EAAI3a,QACG4a,SAAUD,GACI,IAAfA,EAAI3a,QAAgC,OAAhB2a,EAAI,GAAGE,MACtBD,SAAUD,EAAKG,WAAaC,YAAeJ,EAAI,KACjD,OAGZK,GACFH,KAAM,cACN9O,SAAW8H,QAASoG,EAAApD,2BACpBxO,WAEQwS,KAAM,UACNxS,WAEQwS,KAAM,WACN9O,SAAWV,QAAS8O,EAAApD,gCACpB0D,UAAWL,EAAAlD,kCAGX2D,KAAM,UACN9O,SAAWV,QAAS0O,EAAApG,4BACpBtL,UAAWmS,QAOzBS,IAEEJ,KAAM,GACNK,UAAW,OACXC,WAAY,eAGZN,KAAM,YACNJ,UAAWb,EAAAzN,mBACX9D,WAEQwS,KAAM,GACNK,UAAW,OACXT,UAAWT,EAAAlN,kBAEfkO,IAGRA,GAEIH,KAAM,KACNM,WAAY,eAqBpB3B,EAAA,oBAAAA,KACA,OADaA,EAAS7V,GAjBrBL,EAAAM,UACGC,SACI4V,EAAA2B,cACArO,EAAAsO,aAAazG,QAAQqG,GAAUK,eAAe,IAC9ChB,EAAAiB,0BACA5B,EAAA6B,gBACA1B,EAAA2B,cACAvB,EAAAwB,cACAnB,EAAAoB,UACAtB,EAAA3W,YAEJsN,WACI3J,EAAA0C,cAEJhG,cAAe2V,EAAAkC,cACfC,WAAYnC,EAAAkC,iBAEHpC,GAAb,GAAajY,EAAAiY,skBC/Fb,IAAAlW,EAAAnC,EAAA,GACA4L,EAAA5L,EAAA,IASAya,EAAA,WAGI,SAAAA,EAAoB1O,GAApB,IAAAhF,EAAA7D,KAAoBA,KAAA6I,SAFpB7I,KAAAyX,SAAmB,EAGf5O,EAAO6O,OAAOhO,UAAU,SAACiO,GACrB9T,EAAK+T,oBAAoBD,KAcrC,OAVIJ,EAAAxb,UAAA6b,oBAAA,SAAoBD,GACZA,aAAiBjP,EAAAmP,kBACjB7X,KAAKyX,SAAU,IAEfE,aAAiBjP,EAAAoP,eACdH,aAAiBjP,EAAAqP,kBACjBJ,aAAiBjP,EAAAsP,mBACpBhY,KAAKyX,SAAU,IAhBdF,EAAYjY,GAPxBL,EAAA8I,WACGoK,SAAU,MACVnK,SAAU,+IAQkBU,EAAAkE,UAHnB2K,GAAb,GAAara,EAAAqa,mcCTbza,EAAA,KACAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACA,IAAAmb,EAAAnb,EAAA,KAGAoC,EAAApC,EAAA,GACAmC,EAAAnC,EAAA,GACAob,EAAApb,EAAA,GACA4L,EAAA5L,EAAA,IACAoJ,EAAApJ,EAAA,IACAyY,EAAAzY,EAAA,KACAqb,EAAArb,EAAA,KACAsb,EAAAtb,EAAA,KACA6Y,EAAA7Y,EAAA,KACAkZ,EAAAlZ,EAAA,KACAub,EAAAvb,EAAA,KAyBAqa,EAAA,oBAAAA,KACA,OADaA,EAAe7X,GAvB3BL,EAAAM,UACGC,SACIN,EAAAO,aACAyY,EAAAI,oBACA5P,EAAAsO,aACA9Q,EAAAqS,iBACAN,EAAA3V,eACA0T,EAAA3W,WACAgZ,EAAAG,mBAEJ9Y,cACI6V,EAAAzN,mBACAqQ,EAAAM,wBACA9C,EAAAlN,kBAEJkE,WACIyL,EAAAlQ,uBAEJhL,SACIqY,EAAAzN,mBACA6N,EAAAlN,qBAGK0O,GAAb,GAAaja,EAAAia,qCC3Dbha,EAAAD,QAAA,ohECAAC,EAAAD,QAAA,+oRCgBA,IAAA+B,EAAAnC,EAAA,GACAob,EAAApb,EAAA,GACAsb,EAAAtb,EAAA,KAEA4b,EAAA5b,EAAA,KACA6V,EAAA7V,EAAA,IAEA8V,EAAA9V,EAAA,IAOA2b,EAAA,WAQI,SAAAA,EAAoBE,GAAA3Y,KAAA2Y,mBAJpB3Y,KAAA4Y,WAAa,IAAIV,EAAAW,YAET7Y,KAAA8Y,eAAiB,IAAInG,EAAAoG,gBAA+B,MAwChE,OAnCIN,EAAA1c,UAAAyN,SAAA,eAAA3F,EAAA7D,KACIA,KAAK4Y,WAAWI,aACXhG,KAAKJ,EAAAqG,SAAS,SAAA1T,GAAK,OAAAoN,EAAAuG,MAAM3T,EAAI,IAAM,MACnC2B,QAAQlH,KAAKmZ,UAAU3a,KAAKwB,OAEjCA,KAAK8Y,eACA9F,KACGJ,EAAAwG,WACAxG,EAAAhE,OAAY+D,EAAA0G,WACf3P,UAAU,SAAC4P,GACR,OAAAzV,EAAK8U,iBACAvQ,sBAAsBkR,GACtBvS,KAAK,SAAAwS,SACED,GAAMzV,EAAKiV,eAAeU,aACT,GAAbF,EAAG9Q,OACH3E,EAAK0V,YAAcA,GAEnBlU,EAAAxB,EAAK0V,aAAY1d,KAAIS,MAAA+I,EAAIkU,QAMjDvZ,KAAK4Y,WAAWa,SAAS,KAG7BhB,EAAA1c,UAAAod,UAAA,SAAU/U,GACNpE,KAAK8Y,eAAeY,KAAK,IAAIhB,EAAAiB,cAAcvV,KAG/CqU,EAAA1c,UAAA6d,SAAA,SAASjS,IACAA,EAAEkS,eAAiBlS,EAAEmS,kBACtB9Z,KAAK8Y,eAAeY,KAChB1Z,KAAK8Y,eAAeU,WAAWO,WAAW/Z,KAAKuZ,YAAY5d,UA5C9D8c,EAAuBnZ,GALnCL,EAAA8I,WACGoK,SAAU,kBACVnK,SAAUlL,EAAQ,KAClBmL,QAASnL,EAAQ,+BAUqBsb,EAAAlQ,yBAR7BuQ,GAAb,GAAavb,EAAAub,6GCdb,IAAAkB,EAAA,WACI,SAAAA,EAA4BvV,EACAmE,EACAC,QADA,IAAAD,MAAWyR,KAAKC,YAChB,IAAAzR,MAAA,GAFAxI,KAAAoE,OACApE,KAAAuI,WACAvI,KAAAwI,SAUhC,OAPWmR,EAAA5d,UAAAge,WAAP,SAAkBvR,GACd,OAAOA,GAAUxI,KAAKwI,OAChBxI,KACA,IAAI2Z,EAAc3Z,KAAKoE,KACrBpE,KAAKuI,SACLC,IAEhBmR,EAbA,GAAazc,EAAAyc,mCChBbxc,EAAAD,QAAA,goDCAAC,EAAAD,QAAA,4oBCAAC,EAAAD,QAAA,+4BCAAC,EAAAD,QAAA,4xDCgBA,IAAA+B,EAAAnC,EAAA,GAgBA6C,EAAA,WAZA,SAAAA,IAaIK,KAAAka,WAAqB,QACzB,OAFava,EAAgBL,GAZ5BL,EAAA8I,WACGoK,SAAU,UACVnK,SAAU,iFAGVC,QAAS,iHAOAtI,GAAb,GAAazC,EAAAyC,6kBChBb,IAAAV,EAAAnC,EAAA,GAOA8C,EAAA,WALA,SAAAA,IAOII,KAAAma,UAAoB,EAIpBna,KAAAoa,WAAqB,EAGrBpa,KAAAqa,YAAsB,EAK1B,OAHIza,EAAA7D,UAAAue,YAAA,SAAYC,GAAZ,IAAA1W,EAAA7D,KACQua,EAAkB,UAAGC,WAAW,WAAM,OAAA3W,EAAKwW,WAAaxW,EAAKsW,YAVrE7a,GADCL,EAAAwb,MAAM,mEAKPnb,GAFCL,EAAAwb,MAAM,WACNxb,EAAAyb,YAAY,2EAIbpb,GADCL,EAAAyb,YAAY,2EARJ9a,EAAyBN,GALrCL,EAAA8I,WACGoK,SAAU,oBACVnK,SAAUlL,EAAQ,KAClBmL,QAASnL,EAAQ,SAER8C,GAAb,GAAa1C,EAAA0C,+CCvBbzC,EAAAD,QAAA,k1BCAAC,EAAAD,QAAA,snBCgBA,IAAAyd,EAAA7d,EAAA,MAEA,SAAYkM,GAAMA,IAAA,qBAASA,IAAA,yBAA3B,CAAY9L,EAAA8L,MAAA9L,EAAA8L,SAEZ,SAAcA,GACMA,EAAAsC,WAAhB,SAA2BsP,GACvB,MAAO,OAASA,GAGJ5R,EAAA4B,aAAhB,SAA6B7N,GACzB,OAAO4d,EAAAE,MAAM,cAAcC,KAAK/d,IAAI2H,IAAI,SAAAqW,GAAU,OAACA,EAAO,MANlE,CAAc7d,EAAA8L,MAAA9L,EAAA8L,4BCpBd7L,EAAAD,QAAA,mrICAAC,EAAAD,QAAA,8wDCgBA,IAAA+B,EAAAnC,EAAA,GACA0Y,EAAA1Y,EAAA,KACAuS,EAAAvS,EAAA,KACAoC,EAAApC,EAAA,GACAoJ,EAAApJ,EAAA,IACA4L,EAAA5L,EAAA,IAGAA,EAAA,KACA,IAAAke,EAAAle,EAAA,IACAmb,EAAAnb,EAAA,KAEAA,EAAA,KACAA,EAAA,KACAA,EAAA,KAEA,IAAAme,EAAAne,EAAA,KACA4Y,EAAA5Y,EAAA,KACAoe,EAAApe,EAAA,KACAkZ,EAAAlZ,EAAA,KACAqe,EAAAre,EAAA,KA0BAsa,EAAA,oBAAAA,KAEA,OAFaA,EAAa9X,GAxBzBL,EAAAM,UACGC,SACIwb,EAAAI,qBACAlc,EAAAO,aACAiJ,EAAAsO,aACAiB,EAAA3V,eACA4D,EAAAqS,iBACA2C,EAAA/K,cACA6F,EAAA3W,YAEJK,cACI8V,EAAA5M,iBACAqS,EAAAI,gBAEJ1O,WACI0C,EAAAvC,eACA4I,EAAApG,2BACA6L,EAAAjY,yBAEJhG,SACIsY,EAAA5M,iBACAqS,EAAAI,mBAGKjE,GAAb,GAAala,EAAAka,0kBC9Cb,IAAAnY,EAAAnC,EAAA,GAEAA,EAAA,KACA,IAAAwe,EAAAxe,EAAA,KACAye,EAAAze,EAAA,KACA0e,EAAA1e,EAAA,KACAmG,EAAAnG,EAAA,IACA2e,EAAA3e,EAAA,KACA4e,EAAA5e,EAAA,KACAkG,EAAAlG,EAAA,IAEA6e,EAAA7e,EAAA,KACA6V,EAAA7V,EAAA,IACAqe,EAAAre,EAAA,KACA8V,EAAA9V,EAAA,IACA8e,EAAA9e,EAAA,KASAue,EAAA,WAwBI,SAAAA,EAAoBQ,EACAC,EACA3Y,EACA4Y,EACAC,GAJpB,IAAAnY,EAAA7D,KAAoBA,KAAA6b,YACA7b,KAAA8b,0BACA9b,KAAAmD,eACAnD,KAAA+b,oBACA/b,KAAAgc,OA3BZhc,KAAAic,sBAAwB,IAAItJ,EAAAuJ,QAC5Blc,KAAAmc,oBAAsB,IAAIxJ,EAAAuJ,QAC1Blc,KAAAoc,qBAAuB,IAAIzJ,EAAAoG,qBAAoC5E,GActDnU,KAAAqc,kBAAoB,IAAIpd,EAAAqd,aAarC,IAAMC,EAA+Bvc,KAAKic,sBAAsBjJ,KAAKJ,EAAAa,qBAAqBxQ,EAAE8Q,UACtFyI,EAA6Bxc,KAAKmc,oBAAoBnJ,KAAKJ,EAAAa,qBAAqBxQ,EAAE8Q,UAClF0I,EAAwB,IAAI9J,EAAAuJ,QAElClc,KAAKmJ,eACDwJ,EAAAI,eAAe/S,KAAKmD,aAAagQ,SAAUoJ,IACtC7S,UAAU,SAACrE,OAAC2B,EAAA3B,EAAA,GAASqX,EAAArX,EAAA,GAClBxB,EAAK8Y,aAAa3V,EAAS0V,GAC3BD,EAAsB/C,SAG9B/G,EAAAI,eAAeyJ,EAA4BC,IACtC/S,UAAU,SAACrE,OAACuX,EAAAvX,EAAA,GACTxB,EAAKgZ,wBAAwBD,KAGrCjK,EAAAI,eAAe/S,KAAKoc,qBAAsBK,IACrC/S,UAAU,SAACrE,OAACyX,EAAAzX,EAAA,GACTxB,EAAKkZ,oBAAoBD,MA2G7C,OAtJahhB,OAAA6B,eAAW0d,EAAAtf,UAAA,4BAAX,SAAgCihB,GACrChd,KAAKic,sBAAsBvC,KAAKsD,oCAG3BlhB,OAAA6B,eAAW0d,EAAAtf,UAAA,0BAAX,SAA8BkhB,GACnCjd,KAAKmc,oBAAoBzC,KAAKuD,oCAGzBnhB,OAAA6B,eAAW0d,EAAAtf,UAAA,2BAAX,SAA+BmO,GACpClK,KAAKoc,qBAAqB1C,KAAKxP,oCAuCnCmR,EAAAtf,UAAAiK,YAAA,WACIhG,KAAKmJ,cAAcjC,QAAQ,SAAAgW,GAAO,OAAAA,EAAIpS,iBAGlCuQ,EAAAtf,UAAA4gB,aAAR,SAAqB3V,EAAuBsC,GAA5C,IAAAzF,EAAA7D,KACIA,KAAKgc,KAAKmB,kBAAkB,WACxBtZ,EAAKiK,MAAQyN,EAAA6B,eACTpW,EACAnD,EAAKiY,wBACLjY,EAAKuY,qBAAqBne,MAAOqL,GAErC,IAAMyE,EAAUlK,EAAKkY,kBAAkBlW,cAAc,WACjD,WAAI2V,EAAI6B,QAAQxZ,EAAKgY,UAAUyB,cAAezZ,EAAKiK,MAAOwN,EAAAiC,cAE9D1Z,EAAK2Z,eACD,IAAI/B,EAAA5N,eAAehK,EAAKiK,MAAOC,EAAS,SAACvL,EAAOC,GAC5C,IAAMgb,KAUN,OATAjb,EAAM0E,QAAQ,SAAA+D,GACV,IAAMyS,EAAajb,EAAMmM,OAAO,SAAAjH,GAAK,OAAAA,EAAE+F,MAAQzC,EAAKtI,KAAI+B,IAAI,SAAAiD,GAAK,OAAAA,EAAEgG,KAEnE,GAA2B,GADNlL,EAAMmM,OAAO,SAAAjH,GAAK,OAAAA,EAAEgG,IAAM1C,EAAKtI,KAAI+B,IAAI,SAAAiD,GAAK,OAAAA,EAAE+F,OAClD/R,QAAoC,GAArB+hB,EAAW/hB,OAAa,CACpD,IAAMgiB,EAAQF,EAAYG,KAAK,SAAAC,GAAO,OAAA5a,EAAE4L,KAAKgP,EAAK,SAAApf,GAAK,OAAAA,EAAEkE,IAAM+a,EAAW,OACtEC,EAAOA,EAAM9hB,KAAKoP,GACjBwS,EAAY5hB,MAAMoP,OAGxBwS,EAAY/Y,IAAI,SAAClC,EAAO/G,GAC3B,IAAMkH,EAAK,WAAWlH,EAChBmH,EAAQ,IAAMJ,EAAM7G,OAAS,IAC7BkH,EAAgBI,EAAE4L,KAAKrM,EAAO,SAAA/D,GAAK,OAAAA,EAAEoE,gBAC3C,OAAO,IAAI8Y,EAAAjZ,eAAeC,EAAIC,EAAOJ,EAAOK,OAIxDgB,EAAK2Z,eAAevP,kBAEpBF,EAAQ+P,GAAG,QAAS,SAAAnG,GAChB,IAAMhJ,EAASgJ,EAAMnV,MAAM,GACvBuL,EAAQK,UAAUO,IAClBZ,EAAQqB,YAAYT,GACpB9K,EAAKkZ,oBAAoBlZ,EAAKuY,qBAAqBne,QAEnD4F,EAAKmY,KAAK+B,IAAI,WAAM,OAAAla,EAAKwY,kBAAkB2B,KAAKrP,OAIxD,IAAMsP,EAAgBpa,EAAKgY,UAAUyB,cAAcY,qBAAqB,UAAU,GAClFnQ,EAAQ+P,GAAG,YAAa,WAAM,OAAAG,EAAcE,MAAMC,OAAS,YAC3DrQ,EAAQ+P,GAAG,WAAY,WAAM,OAAAG,EAAcE,MAAMC,OAAS,YAC1DrQ,EAAQ+P,GAAG,gBAAiB,SAAAO,GACxBtQ,EAAQuQ,mBAAmBpX,QAAQ,SAAAyH,GAC/B,IAAM4P,EAAexQ,EAAQyQ,aAAa7P,GAC1C0P,EAAII,UAAY,UAChBJ,EAAIK,OAAOH,EAAa5P,GAAQgQ,EAAGJ,EAAa5P,GAAQiQ,EAAG,IAC3DP,EAAIQ,WAIZhb,EAAK2Z,eAAehP,yBAIrB6M,EAAAtf,UAAA+iB,IAAP,eAAAjb,EAAA7D,KACIA,KAAKgc,KAAKmB,kBAAkB,WACxBtZ,EAAKkY,kBAAkBhO,QAAQ+Q,SAIhCzD,EAAAtf,UAAAgjB,cAAP,eAAAlb,EAAA7D,KACIA,KAAKgc,KAAKmB,kBAAkB,WACxBtZ,EAAK2Z,eAAe9O,8BAA8B7K,EAAKuY,qBAAqBne,UAI5Eod,EAAAtf,UAAAghB,oBAAR,SAA4BD,GAA5B,IAAAjZ,EAAA7D,KACIA,KAAKgc,KAAKmB,kBAAkB,WACxB,IAAMpP,EAAUlK,EAAKkY,kBAAkBhO,QACvCA,EAAQiR,cACJlC,IACA/O,EAAQkR,aAAanC,IACrBjZ,EAAK2Z,eAAetO,qBAAqB4N,OAK7CzB,EAAAtf,UAAA8gB,wBAAR,SAAgCpS,GAAhC,IAAA5G,EAAA7D,KACIA,KAAKgc,KAAKmB,kBAAkB,WACxB,IAAM+B,EAAoCrb,EAAKiK,MAAMtL,MAE/C2c,EADeD,EAAYrhB,MACC6G,IAAI,SAAAuG,GAClC,IAAMpI,EAAgBI,EAAEmc,SAAS3U,EAAoBQ,EAAKtI,IAC1D,OAAQsI,EAAKpI,eAAiBA,EACxB,IAAI6Y,EAAApO,QAAQrC,EAAKsC,UAAWtC,EAAKrI,MAAOC,GACxCoI,IAGViU,EAAYG,OAAOF,GAEnBtb,EAAK2Z,eAAerP,wCAlJnB7O,GAARL,EAAAwb,wGAIQnb,GAARL,EAAAwb,sGAIQnb,GAARL,EAAAwb,yGAISnb,GAATL,EAAAqgB,0EAjBQjE,EAAc/b,GAP1BL,EAAA8I,WACGoK,SAAU,QACVnK,SAAU,GACV2E,WACIiP,EAAAjW,4CA2B2B1G,EAAAsgB,WACcpE,EAAAjY,wBACXF,EAAA0C,aACKkW,EAAAjW,kBACb1G,EAAAugB,UA5BjBnE,GAAb,GAAane,EAAAme,oGCtBAne,EAAAqgB,YACTkC,YAAY,EACZC,aACIC,OAAO,EACPC,sBAAsB,EACtBC,qBAAqB,GAEzBC,QACIC,cACIC,SAAS,EACTC,WAAY,WACZC,UAAW,KACXC,sBAAsB,EACtBC,YAAa,IACbC,gBAAiB,MAGzBC,SACIN,SAAS,EACTO,uBACIC,aAAc,IACdC,aAAc,IACdC,eAAgB,GAChBC,QAAS,IAIjBle,OACIvC,OACIA,MAAO,UACPyf,MAAO,UACPiB,UAAW,UAEfC,QAAQ,EACRC,MAAO,GACPC,OAAQ,KACRhhB,MACIG,MAAO,UACP8gB,WAAY,UACZC,YAAa,IAGrBze,OACI0e,MAAO,OACPL,QAAQ,EAERM,oBAAoB,EACpBphB,MACIG,MAAO,UACPE,KAAM,yFClDlB,IAAAsb,EAAA5e,EAAA,KACA0e,EAAA1e,EAAA,KACAmG,EAAAnG,EAAA,IACAiG,EAAAjG,EAAA,IACA6e,EAAA7e,EAAA,KAsCA,SAAgBskB,EAAS7T,EAAuBuO,GAC5C,IAAIlZ,EAAQ2K,EAAUC,UAAUhQ,KAAO,KACvC,OAAQuF,EAAAgH,gBAAgBwD,IACpB,IAAK,YACD,IAAI8T,EAA+B9T,EAAW+T,aAC9C1e,GAAS9G,OAAO+L,KAAKwZ,GAAwB1c,KAAK,KAClD,MACJ,IAAK,OACD,IAAI4c,EAAyBhU,EAAWiU,UACpCD,IACA3e,GAASkZ,EAAwBlY,QAAQ2d,IAC7C,MACJ,IAAK,SACD,IAAIE,EAA6BlU,EAAWiU,UAC5C5e,GAASkZ,EAAwBlY,QAAQ6d,GACzC,MACJ,IAAK,aAED,MACJ,IAAK,OACD,IAAIC,EAA0BnU,EAAWoU,OACzC/e,GAAS8e,EAAgB,GAAGxB,UAAY,IAAMpE,EAAwBlY,QAAQ8d,EAAgB,IAC9F,MACJ,IAAK,OAED9e,GAmBZ,SAAqB4T,GACjB,OAAOA,EAAKoL,QAAQ,YAAa,IApBhBC,CADoBtU,EAAWuU,QACJ,GAAGtL,MACvC,MACJ,IAAK,QACD5T,GAAkB2K,EAAWiJ,KAC7B,MACJ,QACI5T,EAAQ2K,EAAUC,UAAUhQ,KAGpC,OAAOyF,EAAE8e,SAASnf,GAAQjH,OAAQ,KApEtCuB,EAAAkgB,eAAA,SACIpW,EACA8U,EACAkG,EACA1Y,QAAA,IAAAA,UAEA,IAMI2Y,EAAyBhf,EAAEif,QAAQlb,EAAQ8C,WANV,SAACqY,GAC9B,IAAI9Y,EAAStG,EAAAgH,gBAAgBoY,GAC7B,OAAOA,EAAG3U,UAAU7K,IAAMqf,GACT,SAAV3Y,GACAC,EAAqBC,QAAQF,GAAU,IAGlD+Y,EAAkCH,EAAuBI,KACzDC,EAAiCL,EAAuBM,MACxDC,EAAwBvf,EAAEyB,IAAI4d,EAAkB,gBAChDG,EAAeL,EAAkB1d,IAAI,SAAAyd,GACjC,OAAO,IAAIzG,EAAApO,QAAQ6U,EAAIf,EAASe,EAAIrG,MAExC4G,EA+DR,SAA4B1b,EAAuBwb,GAC/C,IAAIG,KACAC,KAGJ5b,EAAQ8C,WAAW5C,QAAQ,SAAAib,GACvB,IAAIjY,EAAOiY,EAAG3U,UAAU7K,GACxBigB,EAAcT,EAAG3U,UAAUqV,QAAU3Y,EACrCiY,EAAG3U,UAAUsV,OAAO5b,QAAQ,SAAA6b,GACxB,IAAIC,EAAcL,EAAcI,OAChCJ,EAAcI,GAAUC,EACxBA,EAAYnnB,KAAKqO,OAKzB,IAAI+Y,EAA0ChgB,EAAEigB,UAAUjgB,EAAEif,QAAQlb,EAAQmc,WAAY,MAAOlgB,EAAEmgB,OAC7FC,EAA+CpgB,EAAEigB,UAAUjgB,EAAEif,QAAQlb,EAAQC,SAAU,MAAOhE,EAAEmgB,OAChGE,EAA0BrgB,EAAE2G,aAAa3G,EAAE4E,KAAK8a,GAAgB1f,EAAE4E,KAAK+a,IACvEngB,EAAsDQ,EAAEsgB,QAAQD,EAAyB,SAAArW,GACrF,IAAIuW,EAAkBZ,EAAc3V,GACpC,OAAO0V,EAAc1V,GAChB2B,OAAO,SAAA6U,GAAiB,OAAAD,GAAmBC,IAC3C/e,IAAI,SAAA+e,GAAiB,OAClB/V,KAAM8V,EACN7V,GAAI8V,EACJxW,KAAMA,OActB,OATAuV,EAAYtb,QAAQ,SAAAwc,GAChB,IAAIC,EAAmB1gB,EAAE2gB,OAAOnhB,EAAO,SAAAkF,GAAK,OAAAA,EAAEgG,IAAM+V,IACpD,GAA+B,GAA3BC,EAAiBhoB,OACjB,MAAMiM,MAAM,qCAAuC+b,EAAiBhoB,OAAS,oBAAsB+nB,EAAa,0BACpH,IAAIG,EAAaF,EAAiB,GAAGjW,KACrCjL,EAAMmM,OAAO,SAAAjH,GAAK,OAAAA,EAAE+F,MAAQgW,IAAYxc,QAAQ,SAAAS,GAAK,OAAAA,EAAE+F,KAAOmW,MAI3DphB,EAAMiC,IAAI,SAAAiD,GACb,IACImc,EAAY,IADAT,EAAa1b,EAAEsF,MAAMwH,OAAOJ,MAAM3P,IAAI,SAAAqf,GAAU,OAAAd,EAAUc,GAAQvmB,OAClDmH,KAAK,MAAQ,IAC7C,OAAO,IAAI+W,EAAAjO,QAAQ9F,EAAE+F,KAAM/F,EAAEgG,GAAImW,KA1GlBE,CAAmBhd,EAASwb,GAE/C,OAAO,IAAI7G,EAAApZ,SACP,IAAIiZ,EAAIyI,QAAiBxB,GACzB,IAAIjH,EAAIyI,QAAiBvB,KAWjCxlB,EAAAkkB,4CCIA,SAAS8C,EAAwBjf,EAAUkf,GACvC,IAAIC,EAUR,SAA2BC,EAAaC,EAAgB7lB,GACpD,GAAI4lB,EAEC,CAED,IADA,IAAIE,EAAMF,EAAI1oB,OACLF,EAAI,EAAGA,EAAIgD,EAAGhD,IACnB8oB,EAAMF,EAAIG,YAAYF,EAAQC,EAAM,GAExC,OAAOF,EAAII,UAAUF,EAAM,SAAMpQ,EANjC,OAZauQ,CAAkBzf,EAAI0f,UAAW,IAAK,GACnDC,EAAiBR,GAAcA,EAAWS,MAAM,KACpD,GAAID,GAA2C,GAAzBA,EAAejpB,OAAa,CACvC,IAAAmpB,EAAAF,EAAA,GAAQ3R,EAAA2R,EAAA,GACf,OAAQE,GAAUX,GAAkBlR,QAASkB,oDAjBrDjX,EAAA6M,gBAAA,SAAgCkB,GAC5B,OAAOiZ,EAAwBjZ,EAAM,OAGzC/N,EAAAoG,WAAA,SAA2BD,GACvB,OAAO6gB,EAAwB7gB,EAAM,SAGzCnG,EAAA6nB,eAAA,SAA+BC,GAC3B,OAAOd,EAAwBc,EAAU,ikBC5C7C,IAAA/lB,EAAAnC,EAAA,GAEAiG,EAAAjG,EAAA,IACAuQ,EAAAvQ,EAAA,KAOA2T,EAAA,oBAAAA,KAMA,OAHa3U,OAAA6B,eAAI8S,EAAA1U,UAAA,iBAAJ,SAAcomB,GACnBniB,KAAKilB,WAAa9C,GAAM9U,EAAAhN,mBAAmB0C,EAAAgH,gBAAgBoY,IAAK3kB,sCAD3D8B,GAARL,EAAAwb,+FAHQhK,EAAsBnR,GALlCL,EAAA8I,WACGoK,SAAU,iBACVnK,SAAU,oCACVC,QAAS,8BAEAwI,GAAb,GAAavT,EAAAuT,mlBCVb,IAAAxR,EAAAnC,EAAA,GAEAkG,EAAAlG,EAAA,IACAiG,EAAAjG,EAAA,IAEAuQ,EAAAvQ,EAAA,KAEAmG,EAAAnG,EAAA,IAOA0T,EAAA,WAEI,SAAAA,EAAoBrN,GAAAnD,KAAAmD,eAMVnD,KAAAklB,kBAAoB,IAAIjmB,EAAAqd,aAmDtC,OA/CI9L,EAAAzU,UAAA8L,KAAA,SAAKnJ,GACD,OAAO5C,OAAO+L,KAAKnJ,IAGvB8R,EAAAzU,UAAAue,YAAA,SAAYC,GACRva,KAAKmlB,cAAgBpiB,EAAAgH,gBAAgB/J,KAAKuN,YAG9CiD,EAAAzU,UAAAqpB,iBAAA,WACI,OAAO/X,EAAAhN,mBAAmBL,KAAKmlB,eAAe3nB,MAIlDgT,EAAAzU,UAAAspB,YAAA,SAAYhiB,GACR,OAAON,EAAAO,WAAWD,IAGtBmN,EAAAzU,UAAA2H,aAAA,SAAaf,GACT,OAAO3C,KAAKmD,aAAaM,iBAAiBC,aAAaf,IAG3D6N,EAAAzU,UAAAuY,qBAAA,SAAqBrH,GACjB,OAAOjN,KAAKmD,aAAaM,iBAAiB6Q,qBAAqBrH,IAGnEuD,EAAAzU,UAAAupB,0BAAA,eAAAzhB,EAAA7D,KACUulB,EACF,SAACtY,GAA2B,OAAApJ,EAAKV,aAAaM,iBAAiB+P,WAAWvG,GAAMwH,OAAOJ,OAErFmR,EAA8BviB,EAAEsgB,QAAQvjB,KAAKuN,UAAUC,UAAUsV,OAAQyC,GACzEE,EAA+BF,EAAwBvlB,KAAKuN,UAAUC,UAAUqV,QAEhF6C,EACFziB,EAAEuiB,GAAmBG,WAAWF,GAC3B/gB,IAAI,SAAAqf,GAAU,OAAAlgB,EAAKV,aAAaM,iBAAiBC,aAAaqgB,KAC9D6B,OAAO,SAAA/Z,GAAQ,OAAAA,EAAKrO,OACpBS,QAET,OAAOynB,EAA8B/pB,OAC/B+pB,OACAvR,GAGV3D,EAAAzU,UAAA8pB,gBAAA,SAAgB9B,GACZ/jB,KAAKklB,kBAAkBlH,KAAKhe,KAAKmD,aAAaM,iBAAiBC,aAAaqgB,KAnDvEzkB,GAARL,EAAAwb,iEACQnb,GAARL,EAAAwb,sEAESnb,GAATL,EAAAqgB,0EARQ9O,EAAyBlR,GALrCL,EAAA8I,WACGoK,SAAU,oBACVnK,SAAUlL,EAAQ,KAClBmL,QAASnL,EAAQ,+BAIiBkG,EAAA0C,gBAFzB8K,GAAb,GAAatT,EAAAsT,+CC9BbrT,EAAAD,QAAA,yxVCAAC,EAAAD,QAAA,i7CCgBA,IAAA+B,EAAAnC,EAAA,GAqBA6T,EAAA,oBAAAA,KAIA,OAHarR,GAARL,EAAAwb,+DACQnb,GAARL,EAAAwb,8DACQnb,GAARL,EAAAwb,iEAHQ9J,EAA6BrR,GAjBzCL,EAAA8I,WACGoK,SAAU,yBACVnK,SAAU,mJAMVC,QAAS,oJASA0I,GAAb,GAAazT,EAAAyT,0lBCrBb,IAAA1R,EAAAnC,EAAA,GA4BA4T,EAAA,oBAAAA,KAIA,OAHapR,GAARL,EAAAwb,+DACQnb,GAARL,EAAAwb,8DACQnb,GAARL,EAAAwb,iEAHQ/J,EAA2BpR,GA1BvCL,EAAA8I,WACGoK,SAAU,uBACVnK,SAAU,iJAMVC,QAAS,+WAkBAyI,GAAb,GAAaxT,EAAAwT,wlBC5Bb,IAAAzR,EAAAnC,EAAA,GACAyD,EAAAzD,EAAA,IACAiT,EAAAjT,EAAA,KAEAqe,EAAAre,EAAA,KAgBA8T,EAAA,WAKI,SAAAA,EAAoBkV,EACAnU,GADA3R,KAAA8lB,SACA9lB,KAAA2R,qBAiBxB,OAdIf,EAAA7U,UAAAue,YAAA,WACIta,KAAK0R,WAAa1R,KAAK2R,mBAAmB/N,QAAQ5D,KAAKqD,OAG3DuN,EAAA7U,UAAAgqB,mBAAA,SAAmBpe,GACfA,EAAEqe,iBACFhmB,KAAK8lB,OAAOG,KAAKlW,EAAAc,2BACb1V,MACIkI,KAAMrD,KAAKqD,KACXqO,WAAY1R,KAAK0R,WACjBC,mBAAoB3R,KAAK2R,uBAlB5BrS,GAARL,EAAAwb,4DADQ7J,EAAyBtR,GAdrCL,EAAA8I,WACGoK,SAAU,oBACVnK,SAAU,qJAKVC,QAAS,8DAKT0E,WAAYwO,EAAAjY,kDAOgB3C,EAAA2lB,UACY/K,EAAAjY,2BAN/B0N,GAAb,GAAa1T,EAAA0T,+CCpCbzT,EAAAD,QAAA,utDCgBA,IAAA+B,EAAAnC,EAAA,GAGAiG,EAAAjG,EAAA,IACAkT,EAAAlT,EAAA,KAEAmG,EAAAnG,EAAA,IACAkG,EAAAlG,EAAA,IAOAgU,EAAA,WA+BI,SAAAA,EAAoB3N,GAApB,IAAAU,EAAA7D,KAAoBA,KAAAmD,eApBXnD,KAAAmmB,YAAsB,EAErBnmB,KAAAomB,YAAc,IAAInnB,EAAAqd,aAMnBtc,KAAAiR,eACLC,OACIC,MAAO,SAACC,EAAMnG,EAAMob,GAAW,OAAAxiB,EAAKyN,cAAcrG,MAIjDjL,KAAAuR,aACLN,cAAejR,KAAKiR,cACpBO,WAAW,EACXC,WAAW,GA0DnB,OApFa3V,OAAA6B,eAAImT,EAAA/U,UAAA,aAAJ,SAAUsY,GAAnB,IAAAxQ,EAAA7D,KACIA,KAAKsmB,SAAWjS,EAAM3P,IAAI,SAAA6hB,GAAK,OAAA1iB,EAAK2iB,cAAcD,sCAG7CzqB,OAAA6B,eAAImT,EAAA/U,UAAA,uBAAJ,SAAoBkhB,GACzBjd,KAAKymB,YAAcxJ,EACnBjd,KAAK0mB,qDA0BT5V,EAAA/U,UAAA4qB,WAAA,WACI3mB,KAAK0mB,qBAGT5V,EAAA/U,UAAAuV,cAAA,SAAcrG,GACVjL,KAAKomB,YAAYpI,KAAK/S,EAAK9P,KAAKyrB,cAK5B9V,EAAA/U,UAAAyqB,cAAR,SAAsB3a,GAClB,IAAM+a,EAAc/a,EAAKlJ,GACnBkkB,EAAc5jB,EAAEzE,KAAKwB,KAAKmD,aAAaM,iBAAiBojB,YAAa7mB,KAAKmD,aAAaM,kBAE7F,SAASqjB,EAAcC,GACnB,IAAIC,EAAMjkB,EAAAgiB,eAAegC,GACzB,MAAe,UAAPC,OAAmB7S,EACb,UAAP6S,EAIX,SAAoCC,GAChC,OAAOA,EAAIC,OAAOxiB,IAAI,SAAAyiB,GAAK,OAAApV,EAAU8U,EAAYM,EAAEC,YAAaD,EAAE3pB,MAAM,KAL9C6pB,CAAqCN,GACrDD,EAAcD,EAAsBE,EAAIO,oBAOtD,SAASvV,EAAUgV,EAAevpB,EAAc+pB,GAC5C,OACIX,YAAaA,EACbppB,KAAMA,EACNyV,KAAM8T,EACN/iB,SAAU8iB,EAAcC,GACxBQ,WAAYA,GAIpB,OAAOxV,EAAU8U,EAAYhb,EAAKub,YAAavb,EAAKrO,KAAMwC,KAAKmmB,aAG3DrV,EAAA/U,UAAA2qB,kBAAR,eAAA7iB,EAAA7D,KACQA,KAAKwnB,eAAiBxnB,KAAKwnB,cAAcC,UAAUC,OACnC1nB,KAAKwnB,cAAcC,UACzBC,MAAMxgB,QAAQ,SAAC+D,GACrBA,EAAK0c,YAAY9jB,EAAK+jB,WAAW3c,EAAMpH,EAAK4iB,cAAc,MAK9D3V,EAAA/U,UAAA6rB,WAAR,SAAmB3c,EAAiBgS,GAChC,IAAIta,EAAKsI,EAAK9P,KAAKyrB,YACnB,OAAa,MAANjkB,GAAcM,EAAEmc,SAASnC,EAAKta,IAjFhCrD,GAARL,EAAAwb,yFAIQnb,GAARL,EAAAwb,mGAKQnb,GAARL,EAAAwb,mEAESnb,GAATL,EAAAqgB,oEAIkBhgB,GAAlBL,EAAA4oB,UAAU,wBAAuB7X,EAAA8X,oDAjBzBhX,EAAsBxR,GALlCL,EAAA8I,WACGoK,SAAU,iBACVnK,SAAUlL,EAAQ,KAClBmL,QAASnL,EAAQ,+BAiCiBkG,EAAA0C,gBA/BzBoL,GAAb,GAAa5T,EAAA4T,4CC9Bb3T,EAAAD,QAAA,6kCCAAC,EAAAD,QAAA,ssCCgBA,IAAA+B,EAAAnC,EAAA,GACAkT,EAAAlT,EAAA,KACAiG,EAAAjG,EAAA,IAEAkG,EAAAlG,EAAA,IAOAiU,EAAA,WAKI,SAAAA,EAAY5N,GACRnD,KAAKyD,iBAAmBN,EAAaM,uBAqB7C,SA3BasN,EASTA,EAAAhV,UAAAgpB,eAAA,SAAegC,GACX,OAAOhkB,EAAAgiB,eAAegC,IAG1BhW,EAAAhV,UAAAgsB,oBAAA,SAAoBC,GAChB,OAAOhoB,KAAKyD,iBAAiBojB,YAAYmB,EAAQV,oBAGrDvW,EAAAhV,UAAAmW,eAAA,SAAevK,GACX3H,KAAKiL,KAAKiH,iBACV+V,EAAsBC,+BAA+BvgB,IAG1CoJ,EAAAmX,+BAAf,SAA8CvQ,GAC1CA,EAAMwQ,kBACwBxQ,EAAMyQ,WAChCC,QAxBC/oB,GAARL,EAAAwb,wBAAczK,EAAAsY,sCADNvX,EAAqBkX,EAAA3oB,GALjCL,EAAA8I,WACGoK,SAAU,iBACVnK,SAAUlL,EAAQ,KAClBmL,QAASnL,EAAQ,+BAOSkG,EAAA0C,gBALjBqL,GAAb,GAAa7T,EAAA6T,2CC3Bb5T,EAAAD,QAAA,spDCAAC,EAAAD,QAAA,6qBCgBA,IAAA+B,EAAAnC,EAAA,GACAoJ,EAAApJ,EAAA,IAEAA,EAAA,KAEAA,EAAA,KACAA,EAAA,KACAA,EAAA,KACA,IAAA8Y,EAAA9Y,EAAA,KACAyV,EAAAzV,EAAA,KACAgZ,EAAAhZ,EAAA,KACAiZ,EAAAjZ,EAAA,KACAkZ,EAAAlZ,EAAA,KACAmb,EAAAnb,EAAA,KACAyrB,EAAAzrB,EAAA,KACAoC,EAAApC,EAAA,GACAoe,EAAApe,EAAA,KAqBAua,EAAA,oBAAAA,KAEA,OAFaA,EAAa/X,GAlBzBL,EAAAM,UACGC,SACI0G,EAAAqS,iBACAN,EAAA3V,eACA0T,EAAA3W,WACAH,EAAAO,aACAyb,EAAA/K,eAEJzQ,cACIqW,EAAAlD,gCACA0V,EAAAC,+BAEJ7b,WACI4F,EAAAnM,eACAwP,EAAApD,0BACAsD,EAAApD,mCAGK2E,GAAb,GAAana,EAAAma,mCCrDbla,EAAAD,QAAA,ipJCAAC,EAAAD,QAAA,ikCCgBA,IAAA+B,EAAAnC,EAAA,GAEAA,EAAA,KACA,IAAA0e,EAAA1e,EAAA,KACAmG,EAAAnG,EAAA,IACA6V,EAAA7V,EAAA,IAEAiG,EAAAjG,EAAA,IACAwe,EAAAxe,EAAA,KACA2rB,EAAA3rB,EAAA,KAUA2e,EAAA3e,EAAA,KACA6e,EAAA7e,EAAA,KACAuQ,EAAAvQ,EAAA,KACA8V,EAAA9V,EAAA,IACA8e,EAAA9e,EAAA,KASA0rB,EAAA,WAaI,SAAAA,EAAoB3M,EACAE,EACAC,GAFAhc,KAAA6b,YACA7b,KAAA+b,oBACA/b,KAAAgc,OAVVhc,KAAA0oB,aAAe,IAAIzpB,EAAAqd,aACnBtc,KAAA2oB,aAAe,IAAI1pB,EAAAqd,aAKrBtc,KAAAmJ,uBA4MZ,SAvNaqf,EAkBTA,EAAAzsB,UAAAyN,SAAA,eAAA3F,EAAA7D,KASU4oB,EACFjW,EAAAlG,OAAOzM,KAAKmT,SAASH,KAAKJ,EAAAwQ,SAAUpjB,KAAKmT,UAAUH,KAAKJ,EAAAiW,YAE5D7oB,KAAKmJ,cAAcM,QAAQkJ,EAAAI,eAAe6V,EAAe5oB,KAAK8S,gBACzDE,KACGJ,EAAAhE,OAAO,SAACvJ,GAAgC,OAbjB,SAAC+N,EAAmBnG,GAAiB,OAAAhK,EAAE4L,KAAKuE,EAAInM,UAAWtE,GAAIsK,IAa9C6b,CAA/BzjB,EAAA,GAAG,GAAUA,EAAA,GAA+D1C,MACrFiQ,EAAAa,qBAAqB,SAACpO,EAAmBqO,OAAfqV,EAAH1jB,EAAA,GAAG,GAAOuO,EAAAvO,EAAA,GAAY2jB,EAAHtV,EAAA,GAAG,GAAOI,EAAAJ,EAAA,GAAW,OAAAqV,EAAKpmB,IAAMqmB,EAAKrmB,IAAMM,EAAE8Q,QAAQH,EAAOE,MACzGpK,UAAU,SAACrE,OAACqO,EAAArO,EAAA,GAA8C,OAd3C,SAAC4jB,EAA2BC,EAA2B3V,GAC9D1P,EAAKkY,kBAAkBhO,SAAWmb,IAAgBD,GACnDplB,EAAK8Y,aAAauM,GACtBrlB,EAAK0P,aAAeA,EACpB1P,EAAKkZ,oBAAoBxJ,GAU8B4V,CAA7CzV,EAAA,GAAaA,EAAA,GAAcrO,EAAA,QAGjDmjB,EAAAzsB,UAAAiK,YAAA,WACIhG,KAAKmJ,cAAcjC,QAAQ,SAAAnK,GAAK,OAAAA,EAAE+N,iBAG/B0d,EAAAzsB,UAAA+iB,IAAP,eAAAjb,EAAA7D,KACIA,KAAKgc,KAAKmB,kBAAkB,WACxBtZ,EAAKkY,kBAAkBhO,QAAQ+Q,SAIhC0J,EAAAzsB,UAAAgjB,cAAP,eAAAlb,EAAA7D,KACIA,KAAKgc,KAAKmB,kBAAkB,WACxBtZ,EAAK2Z,eAAehP,yBAIbga,EAAAY,qBAAf,SAAoCzR,GAChC,IAAM0R,EAAmB1R,EAAMnV,MAAM7G,QAAUgc,EAAMnV,MAAM,GAC3D,OAAO8mB,EAA8BC,kBAAkBF,KAE/C1mB,GAAI0mB,EAAiB5E,UAAUgE,EAAAe,kBAC/BvW,KAAMwV,EAAAgB,2BAA2BJ,EAAiB5E,UAAU,EAAGgE,EAAAe,qBAI5DhB,EAAAe,kBAAf,SAAiC5a,GAC7B,IAAM+a,GAAwBjB,EAAAkB,YAAYC,WAAanB,EAAAkB,YAAYE,MAAOpB,EAAAkB,YAAYG,oBACtF,OAAOnb,IAAW1L,EAAE4L,KAAK6a,EAAsB,SAAAK,GAAO,OAAApb,EAAOqb,WAAWD,MAGpEvB,EAAAzsB,UAAA4gB,aAAR,SAAqB3V,GAArB,IAAAnD,EAAA7D,KACIA,KAAKgc,KAAKmB,kBAAkB,WACxB,IAAMrP,EAAQwb,EAA8BW,cAAcjjB,GACpD+G,EAAUlK,EAAKkY,kBAAkBlW,cAAc,WACjD,WAAI2V,EAAI6B,QAAQxZ,EAAKgY,UAAUyB,cAAexP,EAAOwN,EAAAiC,cAEzD1Z,EAAK2Z,eAAiB,IAAI/B,EAAA5N,eAAkCC,EAAOC,EAAS,SAACvL,GACzE,OAAAS,EAAET,GACGoM,OAAO,SAAC3D,GAAkB,OAAAA,EAAK3K,WAAamoB,EAAAyB,YAAYC,UACxDvb,OAAO,SAACwb,GAA2B,OAAAA,EAAOC,WAAWC,YAAY3uB,OAAS,IAC1EumB,QAAQ,SAACkI,GAA2B,OAAAA,EAAOC,WAAWC,YAAY,KAClEC,SACA7lB,IAAI,SAAClC,EAAO/G,GAAM,WAAIkgB,EAAAjZ,eAAe,GAAG+lB,EAAAkB,YAAYG,mBAAqBruB,EAAQ+G,EAAM,GAAGI,MAAK,KAAKJ,EAAM7G,OAAM,IAAK6G,KACrHvE,UAET4F,EAAK2Z,eAAevP,kBACpBpK,EAAK2Z,eAAehP,sBAEpBT,EAAQ+P,GAAG,QAAS,SAAAnG,GAChB,IAAM1M,EAAOqe,EAA8BF,qBAAqBzR,GAChE,GAAI1M,EACApH,EAAKmY,KAAK+B,IAAI,WAAM,OAAAla,EAAK6kB,aAAa1K,KAAK/S,SAC1C,CACDpH,EAAKkZ,oBAAoBlZ,EAAK0P,cAC9B,IAAMiX,EAAc7S,EAAMnV,MAAM,GAC5BuL,EAAQK,UAAUoc,IAClBzc,EAAQqB,YAAYob,MAKhCzc,EAAQ+P,GAAG,cAAe,SAAAnG,GACtB,GAA0B,GAAtBA,EAAMnV,MAAM7G,OAAa,CACzB,IAAM8uB,EAAOnB,EAA8BF,qBAAqBzR,GAC5D8S,GACA5mB,EAAKmY,KAAK+B,IAAI,WAAM,OAAAla,EAAK8kB,aAAa3K,KAAKyM,QAIvD,IAAMxM,EAAgBpa,EAAKgY,UAAUyB,cAAcY,qBAAqB,UAAU,GAClFnQ,EAAQ+P,GAAG,WAAY,WAAM,OAAAG,EAAcE,MAAMC,OAAS,YAC1DrQ,EAAQ+P,GAAG,YAAa,SAACnG,GACjB2R,EAA8BC,kBAAkB5R,EAAM1M,QACtDgT,EAAcE,MAAMC,OAAS,aAErCrQ,EAAQ+P,GAAG,gBAAiB,SAAAO,GACxBtQ,EAAQuQ,mBAAmBpX,QAAQ,SAAAyH,GAC/B,IAAM4P,EAAexQ,EAAQyQ,aAAa7P,GAC1C0P,EAAII,UAAY,UAChBJ,EAAIK,OAAOH,EAAa5P,GAAQgQ,EAAGJ,EAAa5P,GAAQiQ,EAAG,IAC3DP,EAAIQ,cAMZ2J,EAAAzsB,UAAAghB,oBAAR,SAA4BxJ,GAA5B,IAAA1P,EAAA7D,KACIA,KAAKgc,KAAKmB,kBAAkB,WACxB,IAAMpP,EAAUlK,EAAKkY,kBAAkBhO,QACvCA,EAAQiR,cACRjR,EAAQkR,aAAawJ,EAAAkB,YAAYpW,EAAaN,MAAQM,EAAa5Q,QAI5D6lB,EAAAyB,cAAf,SAA6BjjB,GACzB,IAAM0jB,EACF,SAACvI,GACG,OAAAlf,EAAEsgB,QAAQpB,EAAGL,QAAS,SAAC6I,EAAKlvB,GACxB,OAAAwH,EAAE+B,QAAQ2lB,EAAIL,aACRrnB,EAAE2nB,UAAWD,GAAML,aAAc7B,EAAAkB,YAAYE,MAAQpuB,EAAI,IAAM0mB,EAAG3U,UAAU7K,MAC5EgoB,KAEZE,EACF,SAACC,GACG,OAAO7nB,EAAE6nB,GACJvH,QAAQ,SAACoH,GAA8B,OAAAA,EAAIL,YAAY5lB,IAAI,SAAAuI,GAAQ,OAACA,EAAM0d,OAC1EzI,QAAQjf,EAAE8nB,MAAMR,SAChB7lB,IAAI,SAACsmB,GAA4C,OAAA/nB,EAAE2iB,OAAOoF,EAAO,SAAC3lB,GAAY,OAATA,EAAA,GAAcilB,YAAY3uB,SAAQ,KACvGsC,SAGPgtB,EACEhoB,EAAEsgB,QAAQvc,EAAQ8C,WAAY,SAACqY,GAC3B,OAAAuI,EAA6BvI,GAAI1V,OAAO0V,EAAG3N,eAEnD0W,EACIL,EAA6CI,GACxCvmB,IAAI,SAACW,OAACwB,EAAAxB,EAAA,GAAWslB,EAAAtlB,EAAA,GACR8lB,EAAmBR,EAAInU,KAAKiO,UAAUkG,EAAInU,KAAKoL,QAAQ,MAAO,IAAI4C,YAAY,KAAO,GACrF5hB,EAAQ0mB,EAA8B8B,SAAST,EAAI1X,KAAO,KAAOkY,GACvE,OAAO,IAAI1C,EAAA4C,eACPV,EACAlC,EAAAkB,YAAYC,WAAa/iB,EACzB8jB,EAAI1X,KAAO,IAAM0X,EAAInU,KACrB5T,EACA,IAAIyK,EAAAxN,KAAK,UAAW,IAAU,eACzBI,cAAc4G,EAAUmjB,WAAWvB,EAAAkB,YAAYE,OAAS,UAAY,cAYzFrnB,EAR0BwE,EAAQ8C,WAAWpF,IAAI,SAACyd,GAC9C,WAAIsG,EAAA6C,eACAnJ,EACAsG,EAAAkB,YAAYpc,UAAY4U,EAAG3U,UAAU7K,GACrC2mB,EAA8B8B,SAASjJ,EAAGoJ,SAC1Cle,EAAAhN,mBAAmB0C,EAAAgH,gBAAgBoY,IAAKliB,cAAc,cAGzCwM,OAAOye,GAE5BzoB,EAAoBQ,EAAEsgB,QAAQvc,EAAQ8C,WAAY,SAACqY,GAC/C,IAAMqJ,EAAW/C,EAAAkB,YAAYpc,UAAY4U,EAAG3U,UAAU7K,GAChD8oB,EACEZ,EAA6CH,EAA6BvI,IACrEzd,IAAI,SAACW,OAACwB,EAAAxB,EAAA,GACGqmB,EAAWjD,EAAAkB,YAAYC,WAAa/iB,EAC1C,OACIlE,GAAI+oB,EAAW,IAAMF,EACrB9d,KAAMge,EACN/d,GAAI6d,KAGpBG,EAAiBlD,EAAAkB,YAAYC,WAAazH,EAAG3U,UAAUqV,OACvD+I,GACIjpB,GAAI6oB,EAAW,IAAMG,EACrBje,KAAM8d,EACN7d,GAAIge,GAEZ,OAAOF,EAAWhf,OAAOmf,KAGjC,OAAO,IAAIjQ,EAAApZ,SACP,IAAIiZ,EAAIyI,QAAiBzhB,GACzB,IAAIgZ,EAAIyI,QAAkBxhB,KAI3B+lB,EAAA4C,SAAP,SAAgBhnB,GAAhB,IAAAP,EAAA7D,KAEI,OAAOoE,EAAKygB,MAAM,MAAMngB,IACpB,SAAAmnB,GACI,OAAIA,EAAKlwB,OAHA,GAIEkwB,EAEJA,EAAKpH,UAAU,EAAGqH,IAAgB,KAAOjoB,EAAKunB,SAASS,EAAKpH,UAAUqH,OAEnFnnB,KAAK,OAnNFrF,GAARL,EAAAwb,wBAAkB9H,EAAAoZ,4CACVzsB,GAARL,EAAAwb,wBAAuB9H,EAAAoZ,iDAEdzsB,GAATL,EAAAqgB,qEACShgB,GAATL,EAAAqgB,qEANQkJ,EAA6Bc,EAAAhqB,GAPzCL,EAAA8I,WACGoK,SAAU,yBACVnK,SAAU,GACV2E,WACIiP,EAAAjW,4CAgB2B1G,EAAAsgB,WACQ3D,EAAAjW,kBACb1G,EAAAugB,UAfjBgJ,GAAb,GAAatrB,EAAAsrB,mHC9BAtrB,EAAAqgB,YAETkC,YAAY,EACZC,aACIC,OAAO,EACPC,sBAAsB,EACtBC,qBAAqB,GAEzBC,QACIC,cACIC,SAAS,EACTC,WAAY,WACZC,UAAW,KACXC,sBAAsB,EACtBC,YAAa,IACbC,gBAAiB,MAGzBC,SACIN,SAAS,EACTO,uBACIC,aAAc,IACdC,aAAc,IACdC,eAAgB,GAChBC,QAAS,IAIjBle,OACIvC,OACIA,MAAO,UACPyf,MAAO,UACPiB,UAAW,UAEfC,QAAQ,EACRC,MAAO,GACPC,OAAQ,KACRhhB,MACIG,MAAO,UACP8gB,WAAY,UACZC,YAAa,IAGrBze,OACI0e,MAAO,OACPL,QAAQ,EAERM,oBAAoB,EACpBphB,MACIG,MAAO,UACPE,KAAM,4CC3CN8pB,oZAAZ,SAAYA,GACRA,IAAA,qBACAA,IAAA,qBAFJ,CAAYA,EAAAhtB,EAAAgtB,cAAAhtB,EAAAgtB,iBAKZ,IAAA5c,EAAA,WAMA,OALI,SAA6BhN,EACVqC,EACAC,EACAE,GAHU9C,KAAAM,WACVN,KAAA2C,KACA3C,KAAA4C,QACA5C,KAAA8C,QAJvB,GAAsB5F,EAAAoQ,UAQtB,IAAAge,EAAA,SAAAU,GACI,SAAAV,EAAmB/d,EACP5K,EACAC,EACAE,GAHZ,IAAAe,EAIImoB,EAAA/vB,KAAA+D,KAAMkqB,EAAY+B,QAAStpB,EAAIC,EAAOE,IAAK9C,YAJ5B6D,EAAA0J,cAMvB,OAPoC2e,EAAAZ,EAAAU,GAOpCV,EAPA,CAAoChe,GAAvBpQ,EAAAouB,iBASb,IAAAD,EAAA,SAAAW,GACI,SAAAX,EAAmBhB,EACP1nB,EACAiL,EACAhL,EACAE,GAJZ,IAAAe,EAKImoB,EAAA/vB,KAAA+D,KAAMkqB,EAAYC,QAASxnB,EAAIC,EAAOE,IAAK9C,YAL5B6D,EAAAwmB,eAOvB,OARoC6B,EAAAb,EAAAW,GAQpCX,EARA,CAAoC/d,GAAvBpQ,EAAAmuB,iBAUAnuB,EAAAssB,iBAAmB,EAEnBtsB,EAAAysB,aACTpc,UAAW,MACXqc,WAAY,MACZC,MAAO,MACPC,mBAAoB,OAGX5sB,EAAAusB,4BACT0C,IAAK,YACLC,IAAK,aACLC,IAAK,0cCrET,IAAAptB,EAAAnC,EAAA,GACAoJ,EAAApJ,EAAA,IAEAwvB,EAAAxvB,EAAA,KACAyvB,EAAAzvB,EAAA,KACAyD,EAAAzD,EAAA,IAmCAoa,EAAA,oBAAAA,KACA,OADaA,EAAyB5X,GAhBrCL,EAAAM,UACGC,SACIe,EAAAmB,gBACAnB,EAAAyB,iBAEJ2K,YACK6f,QAAStmB,EAAAumB,kBAAmBC,SAAUH,EAAAI,sBAAuBC,OAAO,IAEzEltB,cACI4sB,EAAAzX,2BAEJ7D,iBACIsb,EAAAzX,8BAIKqC,GAAb,GAAaha,EAAAga,+CCxCb/Z,EAAAD,QAAA,i6CCAAC,EAAAD,QAAA,spBCiBA,IAAA+B,EAAAnC,EAAA,GACA6V,EAAA7V,EAAA,IACA8V,EAAA9V,EAAA,IACAyD,EAAAzD,EAAA,IACAwvB,EAAAxvB,EAAA,KAGA6vB,EAAA,WAEI,SAAAA,EAAoB7G,GAAA9lB,KAAA8lB,SAuBxB,OApBI6G,EAAA5wB,UAAA8wB,UAAA,SAAUrlB,EAAuBkS,GAC7B,IAAMoT,EAAO9sB,KACb,OAAO0Z,EACFqT,OAAOvlB,GACPwL,KAAKJ,EAAAoa,WAAW,SAACC,GACd,GAAkB,KAAdA,EAAIC,OAAe,CACnB,IAAMC,EAAe,IAAI5sB,EAAA6sB,gBAEzB,OADAD,EAAaE,cAAe,EACrBP,EAAKhH,OACPG,KAAKqG,EAAAzX,0BAA2BsY,GAChCG,cACAta,KAAKJ,EAAA2Q,QAAQ,SAAA/mB,GACV,OAAAA,EACMkd,EAAKqT,OAAOvlB,EAAI+lB,OAAOC,YAAaC,mBAAoB,SACxD9a,EAAA+a,WAAWT,MAEzB,OAAOta,EAAA+a,WAAWT,OArBzBN,EAAqBrtB,GADjCL,EAAAwG,oCAG+BlF,EAAA2lB,aAFnByG,GAAb,GAAazvB,EAAAyvB,4cCTb,IAAA1tB,EAAAnC,EAAA,GACA8e,EAAA9e,EAAA,KAOAwa,EAAA,oBAAAA,KACA,OADaA,EAAShY,GALrBL,EAAAM,UACGoN,WACIiP,EAAAjW,sBAGK2R,GAAb,GAAapa,EAAAoa,+bCPb,IAAArY,EAAAnC,EAAA,GAEA6V,EAAA7V,EAAA,IACAmG,EAAAnG,EAAA,IACAiG,EAAAjG,EAAA,IAGA4I,EAAA,WADA,SAAAA,IAGY1F,KAAA2tB,UAAmC,IAAIhb,EAAAib,cAAc,GAgBjE,OAdI9xB,OAAA6B,eAAW+H,EAAA3J,UAAA,gBAAX,WACI,OAAOiE,KAAK2tB,2CAGhB7xB,OAAA6B,eAAW+H,EAAA3J,UAAA,eAAX,SAAmBiL,GACfhH,KAAK6tB,kBAAoB,IAAIxa,EAAiBrM,GAC9ChH,KAAK2tB,UAAUjU,KAAK1S,oCAKxBlL,OAAA6B,eAAW+H,EAAA3J,UAAA,wBAAX,WACI,OAAOiE,KAAK6tB,mDAhBPnoB,EAAYpG,GADxBL,EAAAwG,cACYC,GAAb,GAAaxI,EAAAwI,eAoBb,IAAA2N,EAAA,WAQI,SAAAA,EAAmBrM,GAAnB,IAAAnD,EAAA7D,KAAmBA,KAAAgH,UACfhH,KAAK8tB,cAAgB7qB,EAAEigB,UAAUjgB,EAAEif,QAAQlb,EAAQ8C,WAAY,gBAAiB7G,EAAEmgB,OAClFpjB,KAAK+tB,YAAc9qB,EAAEigB,UAAUjgB,EAAEif,QAAQlb,EAAQC,SAAU,MAAOhE,EAAEmgB,OACpEpjB,KAAKguB,cAAgB/qB,EAAEigB,UAAUjgB,EAAEif,QAAQlb,EAAQmc,WAAY,MAAOlgB,EAAEmgB,OACxEpjB,KAAKiuB,cAAgBhrB,EAAEigB,UAAUjgB,EAAEif,QAAQlb,EAAQknB,UAAW,MAAOjrB,EAAEmgB,OACvEpjB,KAAKmuB,sBACDlrB,EAAEigB,UAAUljB,KAAK+tB,YAAa,SAAA5mB,GAAM,OAAAA,EAAGsN,OAAOJ,MAAM3P,IAAI,SAAA/B,GAAM,OAAAkB,EAAKmqB,cAAcrrB,OAErF3C,KAAKouB,0BAAkCnrB,EAAE+D,EAAQ8C,YAC5CyZ,QAAQ,SAACpB,GACN,IAAIkM,EAC2B,QAAvBtrB,EAAAgH,gBAAgBoY,GACVA,EAAG3U,UAAUsV,UAEvBwL,EAAanM,EAAG3U,UAAUqV,OAC1B0L,EAAeF,EAAW5hB,OAAO6hB,GAErC,OADgBrrB,EAAE4G,KAAK5G,EAAEsgB,QAAQgL,EAAc,SAAAthB,GAAQ,OAAApJ,EAAKkqB,YAAY9gB,GAAMwH,OAAOJ,SACpE3P,IAAI,SAAAqf,GAAU,OAACA,EAAQ5B,EAAG3U,UAAU7K,QAExDuf,QAAQjf,EAAEmgB,OACVF,UAAUjgB,EAAEurB,QAAQvrB,EAAEyB,IAAKzB,EAAGA,EAAEwrB,OAChCxwB,QA2Bb,OAxBWoV,EAAAtX,UAAAqO,aAAP,SAAoBF,GAChB,OAAOlK,KAAK8tB,cAAc5jB,IAGvBmJ,EAAAtX,UAAAyX,WAAP,SAAkBvG,GACd,OAAOjN,KAAK+tB,YAAY9gB,IAGrBoG,EAAAtX,UAAAuY,qBAAP,SAA4BrH,GACxB,OAAOjN,KAAKmuB,sBAAsBlhB,IAG/BoG,EAAAtX,UAAA2H,aAAP,SAAoBqgB,GAChB,OAAO/jB,KAAKguB,cAAcjK,IAGvB1Q,EAAAtX,UAAA8qB,YAAP,SAAmB6H,GACf,OAAO1uB,KAAKiuB,cAAcS,IAGvBrb,EAAAtX,UAAA2O,gCAAP,mBAAA7G,EAAA7D,KAAuCiM,KAAAC,EAAA,EAAAA,EAAAC,UAAAxQ,OAAAuQ,IAAAD,EAAAC,GAAAC,UAAAD,GACnC,OAAOjJ,EAAE4G,KAAK5G,EAAEsgB,QAAQtX,EAAS,SAAA8X,GAAU,OAAAlgB,EAAKuqB,0BAA0BrK,OAGlF1Q,EAxDA,GAAanW,EAAAmW","file":"bundle.main.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"assets/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([268,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\nimport {VersionComponent} from \"./version.component\";\nimport {LoadingIndicatorComponent} from \"./loading-indicator/loading-indicator.component\";\n\n@NgModule({\n    imports: [\n        CommonModule\n    ],\n    declarations: [\n        VersionComponent,\n        LoadingIndicatorComponent\n    ],\n    exports: [\n        VersionComponent,\n        LoadingIndicatorComponent\n    ]\n})\n\nexport class MiscModule {\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {OperationType} from \"../../types\";\nimport {VisNodeIcon} from \"../../../visjs/vis-model\";\n\nexport class Icon {\n    constructor(public name: string,\n                public code: string,\n                public font: string) {\n    }\n\n    public toVisNodeIcon(color: string): VisNodeIcon {\n        return {\n            face: this.font,\n            size: 80,\n            code: this.code,\n            color: color\n        }\n    }\n}\n\nexport function getIconForNodeType(nodeType: OperationType): Icon {\n    let font = \"FontAwesome\";\n\n    switch (nodeType) {\n        case \"Write\":\n            return new Icon(\"fa-floppy-o\", \"\\uf0c7\", font);\n\n        case \"Filter\":\n            return new Icon(\"fa-filter\", \"\\uf0b0\", font);\n\n        case \"Sort\":\n            return new Icon(\"fa-sort-amount-desc\", \"\\uf161\", font);\n\n        case \"Aggregate\":\n            return new Icon(\"fa-calculator\", \"\\uf1ec\", font);\n\n        case \"Join\":\n            return new Icon(\"fa-code-fork\", \"\\uf126\", font);\n\n        case \"Union\":\n            return new Icon(\"fa-bars\", \"\\uf0c9\", font);\n\n        case \"Projection\":\n            return new Icon(\"fa-chevron-circle-down\", \"\\uf13a\", font);\n\n        case \"Read\":\n            return new Icon(\"fa-database\", \"\\uf1c0\", font);\n\n        case \"Alias\":\n            return new Icon(\"fa-circle-thin\", \"\\uf1db\", font);\n\n        case \"Composite\":\n            return new Icon(\"fa-cogs\", \"\\uf085\", font);\n\n        case \"Generic\":\n            return new Icon(\"fa-question-circle\", \"\\uf059\", font);\n\n        default:\n            return null;\n    }\n}\n","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n    MatAutocompleteModule,\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatCardModule,\n    MatCheckboxModule,\n    MatChipsModule,\n    MatDatepickerModule,\n    MatDialogModule,\n    MatExpansionModule,\n    MatGridListModule,\n    MatIconModule,\n    MatInputModule,\n    MatListModule,\n    MatMenuModule,\n    MatPaginatorModule,\n    MatProgressBarModule,\n    MatProgressSpinnerModule,\n    MatRadioModule,\n    MatSelectModule,\n    MatSidenavModule,\n    MatSliderModule,\n    MatSlideToggleModule,\n    MatSnackBarModule,\n    MatSortModule,\n    MatStepperModule,\n    MatTableModule,\n    MatTabsModule,\n    MatToolbarModule,\n    MatTooltipModule\n} from \"@angular/material\";\n\nimport {NgModule} from \"@angular/core\";\n\nlet materialComponentModuleBunch = [\n\n    // Form Controls\n    MatAutocompleteModule,\n    MatCheckboxModule,\n    MatDatepickerModule,\n    MatInputModule,\n    MatRadioModule,\n    MatSelectModule,\n    MatSliderModule,\n    MatSlideToggleModule,\n\n    // Navigation\n    MatMenuModule,\n    MatSidenavModule,\n    MatToolbarModule,\n\n    // Layout\n    MatListModule,\n    MatGridListModule,\n    MatCardModule,\n    MatStepperModule,\n    MatTabsModule,\n    MatExpansionModule,\n\n    // Buttons & Indicators\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatChipsModule,\n    MatIconModule,\n    MatProgressSpinnerModule,\n    MatProgressBarModule,\n\n    // Popups & Modals\n    MatDialogModule,\n    MatTooltipModule,\n    MatSnackBarModule,\n\n    // Data table\n    MatTableModule,\n    MatSortModule,\n    MatPaginatorModule\n]\n\n@NgModule({\n    imports: materialComponentModuleBunch,\n    exports: materialComponentModuleBunch,\n})\nexport class MaterialModule {\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as vis from \"vis\";\n\nexport class VisModel<TVisNode extends vis.Node, TVisEdge extends vis.Edge> implements vis.Data {\n    constructor(public nodes: vis.DataSet<TVisNode>,\n                public edges: vis.DataSet<TVisEdge>) {\n    }\n}\n\nexport class VisClusterNode<TVisNode> implements vis.Node {\n    public readonly icon: VisNodeIcon\n\n    constructor(public readonly id: string,\n                public readonly label: string,\n                public readonly nodes: TVisNode[],\n                public readonly isHighlighted: boolean = false) {\n        this.icon = {\n            face: \"FontAwesome\",\n            size: 80,\n            code: \"\\uf00a\",\n            color: isHighlighted ? \"#ffa807\" : \"#a4c4df\"\n        }\n    }\n}\n\nexport type VisNodeIcon = {\n    face?: string,\n    code?: string,\n    size?: number,\n    color?: string\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n    IAlias,\n    IAttrRef,\n    IBinary,\n    IExpression,\n    IGeneric,\n    IGenericLeaf,\n    ILiteral,\n    IUDF\n} from \"../../../../generated-ts/expression-model\";\nimport {typeOfExpr} from \"../../types\";\nimport {Injectable} from \"@angular/core\";\nimport {LineageStore} from \"../../lineage.store\";\nimport * as _ from \"lodash\"\n\n@Injectable()\nexport class ExpressionRenderService {\n\n    constructor(private lineageStore: LineageStore) {\n    }\n\n    public getName(expr: IExpression): string {\n        switch (typeOfExpr(expr)) {\n            case \"Literal\": {\n                return \"literal\"\n            }\n            case \"Binary\": {\n                return (<IBinary>expr).symbol\n            }\n            case \"Alias\": {\n                return \"alias\"\n            }\n            case \"UDF\": {\n                return `UDF:${(<IUDF>expr).name}`\n            }\n            case \"AttrRef\": {\n                const ar = <IAttrRef>expr\n                return this.lineageStore.lineageAccessors.getAttribute(ar.refId).name\n            }\n            case \"Generic\":\n            case \"GenericLeaf\": {\n                const e = <{ name: string }>expr\n                return e.name\n            }\n        }\n    }\n\n    public getText(expr: IExpression): string {\n        switch (typeOfExpr(expr)) {\n            case \"Literal\": {\n                return (expr as ILiteral).value\n            }\n            case \"Binary\": {\n                const binaryExpr = <IBinary>expr\n                const leftOperand = binaryExpr.children[0]\n                const rightOperand = binaryExpr.children[1]\n                const render = (operand: IExpression) => {\n                    const text = this.getText(operand)\n                    return typeOfExpr(operand) == \"Binary\" ? `(${text})` : text\n                }\n                return `${render(leftOperand)} ${binaryExpr.symbol} ${render(rightOperand)}`\n            }\n            case \"Alias\": {\n                const ae = <IAlias>expr\n                return `${this.getText(ae.child)} AS ${ae.alias}`\n            }\n            case \"UDF\": {\n                const udf = <IUDF>expr\n                const paramList = _.map(udf.children, child => this.getText(child))\n                return `UDF:${udf.name}(${paramList.join(\", \")})`\n            }\n            case \"AttrRef\": {\n                const ar = <IAttrRef>expr\n                return this.lineageStore.lineageAccessors.getAttribute(ar.refId).name\n            }\n            case \"GenericLeaf\": {\n                return this.renderAsGenericLeafExpr(expr as IGenericLeaf)\n            }\n            case \"Generic\": {\n                const leafText = this.renderAsGenericLeafExpr(expr as IGenericLeaf)\n                const childrenTexts = (expr as IGeneric).children.map(child => this.getText(child))\n                return leafText+`(${childrenTexts.join(\", \")})`\n            }\n        }\n    }\n\n    private renderAsGenericLeafExpr(gle: IGenericLeaf): string {\n        const paramList = _.map(gle.params, (value, name) => `${name}=${this.renderValue(value)}`)\n        return _.isEmpty(paramList)\n            ? gle.name\n            : `${gle.name}[${paramList.join(\", \")}]`\n    }\n\n    private renderValue(obj: any): string {\n        if (typeOfExpr(obj)) {\n            return this.getText(obj as IExpression)\n        } else if (_.isArray(obj)) {\n            return`[${obj.map(o => this.renderValue(o)).join(\", \")}]`\n        } else if (_.isPlainObject(obj)) {\n            const renderedPairs = _.toPairs(obj).map(([k, v]) => `${k}: ${this.renderValue(v)}`)\n            return`{${renderedPairs.join(\", \")}}`\n        } else\n            return obj.toString()\n    }\n}\n\n","/*\n * Copyright 2019 ABSA Group Limited\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport {Injectable} from \"@angular/core\";\nimport * as vis from \"vis\";\nimport {OnDestroy} from \"@angular/core/src/metadata/lifecycle_hooks\";\n\n@Injectable()\nexport class VisNetworkService implements OnDestroy {\n    private _network?: vis.Network\n\n    public get network(): vis.Network | undefined {\n        return this._network\n    }\n\n    public createNetwork(networkCreatorFn: () => vis.Network): vis.Network {\n        this.clearNetwork()\n        this._network = networkCreatorFn()\n        return this._network\n    }\n\n    public ngOnDestroy(): void {\n        this.clearNetwork()\n    }\n\n    private clearNetwork() {\n        if (this._network) {\n            this._network.destroy()\n        }\n    }\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Injectable} from \"@angular/core\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {IDataLineage, IPersistedDatasetDescriptor} from \"../../generated-ts/lineage-model\";\nimport {PromiseCache} from \"../commons/promise-cache\";\n\n@Injectable()\nexport class DatasetService {\n    private datasetPromiseCache = new PromiseCache<IPersistedDatasetDescriptor>()\n    private overviewPromiseCache = new PromiseCache<IDataLineage>()\n\n    constructor(private http: HttpClient) {\n    }\n\n    getDatasetDescriptor(id: string): Promise<IPersistedDatasetDescriptor> {\n        return this.datasetPromiseCache.getOrCreate(id, () =>\n            this.http.get<IPersistedDatasetDescriptor>(`rest/dataset/${id}/descriptor`).toPromise())\n    }\n\n    getLineageOverview(datasetId: string): Promise<IDataLineage> {\n        const expandCacheForDatasetsRelatedTo = (lineagePromise: Promise<IDataLineage>) => (lineage: IDataLineage) => {\n            lineage.datasets.forEach(ds => this.overviewPromiseCache.put(ds.id, lineagePromise))\n            return lineage\n        }\n\n        const fetchAndExpandCache = () => {\n            let lineagePromise = this.http.get<IDataLineage>(`rest/dataset/${datasetId}/lineage/overview`).toPromise()\n            return lineagePromise.then(expandCacheForDatasetsRelatedTo(lineagePromise))\n        }\n\n        return this.overviewPromiseCache.getOrCreate(datasetId, fetchAndExpandCache)\n    }\n}","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 175;","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component} from \"@angular/core\";\n\n@Component({\n    template: require('./dashboard.component.html'),\n    styles: [require('./dashboard.component.less')]\n})\nexport class DashboardComponent {\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Injectable} from \"@angular/core\";\nimport {IPersistedDatasetDescriptor} from \"../../../generated-ts/lineage-model\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {SearchRequest} from \"./dataset-browser.model\";\n\n@Injectable()\nexport class DatasetBrowserService {\n    constructor(private httpClient: HttpClient) {\n    }\n\n    getLineageDescriptors(searchRequest: SearchRequest): Promise<IPersistedDatasetDescriptor[]> {\n        return this.httpClient.get<IPersistedDatasetDescriptor[]>(\n            \"rest/dataset/descriptors\",\n            {\n                params: {\n                    q: searchRequest.text,\n                    asAtTime: `${searchRequest.asAtTime}`,\n                    offset: `${searchRequest.offset}`,\n                    size: \"20\"\n                }\n            }\n        ).toPromise()\n    }\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component} from \"@angular/core\";\n\n@Component({\n    template: require('./welcome.component.html'),\n    styles: [require('./welcome.component.less')]\n})\nexport class WelcomeComponent {\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component, OnDestroy, OnInit} from \"@angular/core\";\nimport {ActivatedRoute, Router} from \"@angular/router\";\nimport {IAttribute, IDataLineage, IOperation} from \"../../generated-ts/lineage-model\";\nimport {LineageStore} from \"./lineage.store\";\nimport {OperationType, typeOfOperation} from \"./types\";\nimport * as _ from \"lodash\";\nimport {MatTabChangeEvent} from \"@angular/material\";\nimport {Tab} from \"./tabs\";\nimport {Subscription} from \"rxjs\";\n\n@Component({\n    template: require('./lineage.component.html'),\n    styles: [require('./lineage.component.less')],\n    providers: []\n})\nexport class LineageComponent implements OnInit, OnDestroy {\n    lineage: IDataLineage\n    selectedTabIndex: Tab = Tab.Summary\n    selectedOperation?: IOperation\n    selectedAttrIDs: string[]\n    highlightedNodeIDs: string[]\n\n    hideableOperationTypes: OperationType[] = ['Projection', 'Filter', 'Sort', 'Aggregate']\n    presentHideableOperationTypes: OperationType[]\n    hiddenOperationTypes: OperationType[]\n\n    private subscriptions: Subscription[] = []\n\n    isOperationTypeVisible(opType: OperationType) {\n        return this.hiddenOperationTypes.indexOf(opType) < 0\n    }\n\n    constructor(private router: Router,\n                private route: ActivatedRoute,\n                private lineageStore: LineageStore) {\n    }\n\n    ngOnInit(): void {\n        this.subscriptions.unshift(this.route.data.subscribe((data: { lineage: IDataLineage }) => {\n            this.lineage = data.lineage\n            this.lineageStore.lineage = data.lineage\n            this.presentHideableOperationTypes =\n                _.intersection(\n                    _.uniq(data.lineage.operations.map(typeOfOperation)),\n                    this.hideableOperationTypes)\n        }))\n\n        this.subscriptions.unshift(this.route.paramMap.subscribe(pm => {\n            let opId = pm.get(\"operationId\")\n            this.selectedOperation = this.lineageStore.lineageAccessors.getOperation(opId)\n        }))\n\n        this.subscriptions.unshift(this.route.queryParamMap.subscribe(qps => {\n            this.selectedAttrIDs = qps.getAll(\"attr\")\n            this.highlightedNodeIDs = this.lineageStore.lineageAccessors.getOperationIdsByAnyAttributeId(...this.selectedAttrIDs)\n            this.hiddenOperationTypes = <OperationType[]> qps.getAll(\"hideOp\")\n        }))\n\n        this.subscriptions.unshift(this.route.fragment.subscribe(fragment => {\n            this.selectedTabIndex = Tab.fromFragment(fragment).valueOr(this.selectedTabIndex)\n        }))\n    }\n\n    ngOnDestroy(): void {\n        this.subscriptions.forEach(s => s.unsubscribe())\n    }\n\n    getDataSourceCount() {\n        return _.sumBy(this.lineage.operations, node => +(typeOfOperation(node) == 'Read'))\n    }\n\n    onOperationSelected(opId: string) {\n        if (opId)\n            this.router.navigate([\"op\", opId], {\n                    relativeTo: this.route.parent,\n                    fragment: Tab.toFragment(Tab.Operation),\n                    queryParams: {},\n                    queryParamsHandling: \"merge\"\n                }\n            )\n        else\n            this.router.navigate([\".\"], {\n                    relativeTo: this.route.parent,\n                    fragment: Tab.toFragment(Tab.Summary),\n                    queryParams: {},\n                    queryParamsHandling: \"merge\"\n                }\n            )\n    }\n\n    onTabChanged(e: MatTabChangeEvent) {\n        this.router.navigate([], {\n            fragment: Tab.toFragment(e.index),\n            queryParamsHandling: \"preserve\"\n        })\n\n    }\n\n    onAttributeSelected(attr: IAttribute) {\n        this.doSelectAttribute(attr.id)\n    }\n\n    clearSelection() {\n        this.doSelectAttribute()\n    }\n\n    gotoLineageOverview() {\n        this.router.navigate([\"overview\"], {\n            fragment: \"datasource\",\n            relativeTo: this.route.parent.parent\n        })\n    }\n\n    private doSelectAttribute(...attrIds: string[]) {\n        this.router.navigate([], {\n            queryParams: {'attr': attrIds},\n            queryParamsHandling: \"merge\",\n            preserveFragment: true\n        })\n    }\n\n    toggleOperationTypeVisibility(opType: OperationType) {\n        let otherHiddenOpTypes = _.without(this.hiddenOperationTypes, opType),\n            updatedHiddenOperationTypes = (this.hiddenOperationTypes.length > otherHiddenOpTypes.length)\n                ? otherHiddenOpTypes\n                : this.hiddenOperationTypes.concat(opType)\n\n        this.router.navigate([], {\n            queryParams: {'hideOp': updatedHiddenOperationTypes},\n            queryParamsHandling: \"merge\",\n            preserveFragment: true\n        })\n    }\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Injectable} from \"@angular/core\";\nimport {HttpClient} from \"@angular/common/http\";\nimport {IDataLineage} from \"../../generated-ts/lineage-model\";\nimport {PromiseCache} from \"../commons/promise-cache\";\n\n@Injectable()\nexport class LineageService {\n    private lineagePromiseCache = new PromiseCache<IDataLineage>()\n\n    constructor(private httpClient: HttpClient) {\n    }\n\n    getLineage(dsId: string): Promise<IDataLineage> {\n        return this.lineagePromiseCache.getOrCreate(dsId, () =>\n            this.httpClient.get<IDataLineage>(`rest/dataset/${dsId}/lineage/partial`).toPromise())\n    }\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class PromiseCache<V> {\n    private cache: { [key: string]: Promise<V>; } = {}\n\n    public put(key: string, value: Promise<V>): this {\n        this.cache[key] = value\n        return this\n    }\n\n    public get(key: string): Promise<V> | undefined {\n        return this.cache[key]\n    }\n\n    public getOrCreate(key: string, create: (key: string) => Promise<V>): Promise<V> {\n        let value: Promise<V> = this.cache[key]\n        if (!value) {\n            value = create(key).catch((err) => {\n                delete this.cache[key]\n                throw err\n            }) as Promise<V>\n            this.cache[key] = value\n        }\n        return value\n    }\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as vis from \"vis\";\nimport {IOperation} from \"../../../generated-ts/lineage-model\";\nimport {typeOfOperation} from \"../types\";\nimport {VisNodeIcon} from \"../../visjs/vis-model\";\nimport {getIconForNodeType} from \"../details/operation/operation-icon.utils\";\n\nexport class VisNode implements vis.Node {\n    public readonly id: string\n    public readonly icon: VisNodeIcon\n\n    constructor(public readonly operation: IOperation,\n                public readonly label: string,\n                public readonly isHighlighted: boolean = false) {\n        this.id = operation.mainProps.id\n        this.icon = getIconForNodeType(typeOfOperation(operation))\n            .toVisNodeIcon(isHighlighted ? \"#ff9600\" : \"#337ab7\")\n    }\n}\n\nexport class VisEdge implements vis.Edge {\n    from: string;\n    to: string;\n    title: string;\n\n    constructor(from: string, to: string, title: string) {\n        this.from = from;\n        this.to = to;\n        this.title = title;\n    }\n}\n","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as vis from \"vis\";\nimport * as _ from \"lodash\";\nimport {VisClusterNode, VisModel} from \"./vis-model\";\n\nexport type Clusterize<TVisNode, TVisEdge> = (nodes: TVisNode[], edges: TVisEdge[]) => VisClusterNode<TVisNode>[]\n\nexport class ClusterManager<TVisNode, TVisEdge> {\n\n    private clusters: VisClusterNode<TVisNode>[]\n\n    constructor(private graph: VisModel<TVisNode, TVisEdge>,\n                private network: vis.Network,\n                private clusterize: Clusterize<TVisNode, TVisEdge>) {\n    }\n\n    public rebuildClusters() {\n        this.clusters = this.clusterize(\n            this.graph.nodes.get(),\n            this.graph.edges.get())\n    }\n\n    public refreshHighlightedClustersForNodes() {\n        this.rebuildClusters()\n        this.clusters.forEach(c => {\n            if (this.network.isCluster(c.id))\n            // we can't use updateClusteredNode() method as it emits \"_dataChanged\" event that makes the graph shaking\n                (<any>this.network).clustering.body.nodes[c.id].setOptions(c)\n        })\n    }\n\n    public collapseAllClusters() {\n        this.clusters.forEach(c => this.collapseCluster(c))\n    }\n\n    public collapseClustersExceptForNode(nodeId: string) {\n        this.clusters\n            .filter(c => !_.some(c.nodes, {id: nodeId}))\n            .forEach(c => this.collapseCluster(c))\n    }\n\n    private collapseCluster(cluster: VisClusterNode<TVisNode>) {\n        this.network.cluster({\n            clusterNodeProperties: cluster,\n            joinCondition: nodeOps => _.some(cluster.nodes, {id: nodeOps.id})\n        })\n    }\n\n    public expandClusterForNode(nodeId: string) {\n        this.clusters\n            .filter(c => _.some(c.nodes, {id: nodeId}))\n            .forEach(c => this.expandCluster(c))\n    }\n\n    private expandCluster(cluster: VisClusterNode<TVisNode>) {\n        try {\n            this.network.openCluster(cluster.id)\n        } catch (e) {\n            // todo: fix clustering rather than swallowing this error\n        }\n    }\n}\n","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Injectable} from \"@angular/core\";\nimport {ActivatedRouteSnapshot, Resolve} from \"@angular/router\";\nimport {IDataLineage, IPersistedDatasetDescriptor} from \"../../generated-ts/lineage-model\";\nimport {LineageService} from \"./lineage.service\";\n\n@Injectable()\nexport class LineageByDatasetIdResolver implements Resolve<IDataLineage> {\n\n    constructor(private lineageService: LineageService) {\n    }\n\n    resolve(route: ActivatedRouteSnapshot): Promise<IDataLineage> {\n        let dataset: IPersistedDatasetDescriptor = route.parent.data['dataset']\n        return this.lineageService.getLineage(dataset.datasetId)\n    }\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {NgModule} from \"@angular/core\";\nimport {CommonModule} from \"@angular/common\";\n\nimport \"primeng/resources/primeng.min.css\";\nimport \"primeng/resources/themes/omega/theme.css\";\nimport {AccordionModule, SharedModule} from \"primeng/primeng\";\n\nimport {OperationIconComponent} from \"./operation/operation-icon.component\";\nimport {OperationDetailsComponent} from \"./operation/operation-details.component\";\nimport {DetailsSectionHeaderComponent} from \"./details-section-header.component\";\nimport {DetailsPanelHeaderComponent} from \"./details-panel-header.component\";\nimport {ExpressionInlineComponent} from \"./expression/expression-inline.component\";\nimport {ExpressionDialogComponent} from \"./expression/expression-dialog.component\";\nimport {TreeModule} from \"angular-tree-component\";\nimport {AttributeListComponent} from \"./attribute-list/attribute-list.component\";\nimport {DataTypeViewComponent} from \"./attribute-list/data-type-view/data-type-view.component\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        AccordionModule,\n        SharedModule,\n        TreeModule.forRoot()\n    ],\n    declarations: [\n        OperationDetailsComponent,\n        OperationIconComponent,\n        DetailsPanelHeaderComponent,\n        DetailsSectionHeaderComponent,\n        ExpressionInlineComponent,\n        ExpressionDialogComponent,\n        AttributeListComponent,\n        DataTypeViewComponent\n    ],\n    entryComponents: [\n        ExpressionDialogComponent\n    ],\n    exports: [\n        OperationIconComponent,\n        OperationDetailsComponent,\n        AttributeListComponent,\n        DetailsPanelHeaderComponent\n    ]\n})\nexport class DetailsModule {\n\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {MAT_DIALOG_DATA} from \"@angular/material\";\nimport {Component, Inject} from \"@angular/core\";\nimport {IExpression} from \"../../../../generated-ts/expression-model\";\nimport {ITreeNode} from 'angular-tree-component/dist/defs/api';\nimport {IActionMapping, ITreeOptions} from 'angular-tree-component';\nimport {ExpressionRenderService} from \"./expression-render.service\";\n\n\n@Component({\n    selector: \"expression-dialog\",\n    styles: [require('./expression-dialog.component.less')],\n    template: `\n        <code>{{ exprString }}</code>\n        <hr>\n        <tree-root #tree [nodes]=\"exprTree\" [options]=\"treeOptions\">\n            <ng-template #treeNodeTemplate let-node>{{ node.data.name }}</ng-template>\n        </tree-root>\n    `\n})\nexport class ExpressionDialogComponent {\n\n    private readonly expr: IExpression\n    private expressionRenderer: ExpressionRenderService\n\n    exprString: string\n    exprTree: any[]\n\n    readonly actionMapping: IActionMapping = {\n        mouse: {\n            click: (tree, node) => ExpressionDialogComponent.onNodeClicked(node)\n        }\n    }\n\n    readonly treeOptions: ITreeOptions = {\n        actionMapping: this.actionMapping,\n        allowDrag: false,\n        allowDrop: false,\n    }\n\n    constructor(@Inject(MAT_DIALOG_DATA) data: any) {\n        this.expr = data.expr\n        this.exprString = data.exprString\n        this.expressionRenderer = data.expressionRenderer\n        this.exprTree = this.buildExprTree()\n    }\n\n    private buildExprTree(): any[] {\n        let seq = 0\n\n        const buildNode = (expr: IExpression) => ({\n            id: seq++,\n            name: this.expressionRenderer.getName(expr),\n            children: buildChildrenNodes(expr)\n        })\n\n        function buildChildrenNodes(ex: IExpression): (any[] | undefined) {\n            const children = ex['children'] || (ex['child'] && [ex['child']])\n            return children && children.map(buildNode)\n        }\n\n        return [buildNode(this.expr)]\n    }\n\n    static onNodeClicked(node: ITreeNode) {\n        node.toggleExpanded()\n    }\n\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Injectable} from \"@angular/core\";\nimport {ActivatedRouteSnapshot, Resolve} from \"@angular/router\";\n\nimport {IPersistedDatasetDescriptor} from \"../../generated-ts/lineage-model\";\nimport {DatasetService} from \"./dataset.service\";\n\n@Injectable()\nexport class PersistentDatasetResolver implements Resolve<IPersistedDatasetDescriptor> {\n\n    constructor(private datasetService: DatasetService) {\n    }\n\n    resolve(route: ActivatedRouteSnapshot): Promise<IPersistedDatasetDescriptor> {\n        let dsId = route.paramMap.get('id')\n        return this.datasetService.getDatasetDescriptor(dsId)\n    }\n\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Injectable} from \"@angular/core\";\nimport {ActivatedRouteSnapshot, Resolve} from \"@angular/router\";\nimport {IDataLineage, IPersistedDatasetDescriptor} from \"../../../generated-ts/lineage-model\";\nimport {DatasetService} from \"../dataset.service\";\n\n@Injectable()\nexport class DatasetLineageOverviewResolver implements Resolve<IDataLineage> {\n\n    constructor(private datasetService: DatasetService) {\n    }\n\n    resolve(route: ActivatedRouteSnapshot): Promise<IDataLineage> {\n        let dataset: IPersistedDatasetDescriptor = route.parent.data['dataset']\n        return this.datasetService.getLineageOverview(dataset.datasetId)\n    }\n\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component, OnDestroy, OnInit} from \"@angular/core\";\nimport {ActivatedRoute, Router} from \"@angular/router\";\nimport {IAttribute, IDataLineage} from \"../../../generated-ts/lineage-model\";\nimport {combineLatest, Observable, Subscription} from \"rxjs\";\nimport * as _ from \"lodash\";\nimport {GraphNode, GraphNodeType} from \"./lineage-overview.model\";\nimport {IComposite, ITypedMetaDataSource} from \"../../../generated-ts/operation-model\";\nimport {LineageAccessors, LineageStore} from \"../../lineage/lineage.store\";\nimport {distinctUntilChanged, filter, map} from \"rxjs/operators\";\n\n@Component({\n    template: require('./lineage-overview.component.html'),\n    styles: [require('./lineage-overview.component.less')],\n    providers: [LineageStore]\n})\n\nexport class DatasetLineageOverviewComponent implements OnInit, OnDestroy {\n\n    selectedNode$: Observable<GraphNode>\n\n    selectedDataSourceDescription: DataSourceDescription\n    selectedOperation: IComposite\n\n    private subscriptions: Subscription[] = []\n\n    constructor(\n        private route: ActivatedRoute,\n        private router: Router,\n        private lineageStore: LineageStore) {\n    }\n\n    ngOnInit(): void {\n        this.subscriptions.unshift(\n            this.route.data.subscribe((data: { lineage: IDataLineage }) =>\n                this.lineageStore.lineage = data.lineage))\n\n        this.selectedNode$ =\n            combineLatest(\n                this.route.fragment,\n                this.route.parent.data\n            ).pipe(map(([fragment, data]) =>\n                <GraphNode>{\n                    type: fragment,\n                    id: data.dataset.datasetId\n                }))\n\n        let lineageAccessors$ = this.lineageStore.lineage$.pipe(map(lin => new LineageAccessors(lin)))\n\n        this.subscriptions.unshift(combineLatest(lineageAccessors$, this.selectedNode$)\n            .pipe(\n                filter(([linAccessors, selectedNode]) => !!linAccessors.getDataset(selectedNode.id)),\n                distinctUntilChanged(([la0, node0], [la1, node1]) => la0.lineage.id == la1.lineage.id && _.isEqual(node0, node1)))\n            .subscribe(([linAccessors, selectedNode]) => this.updateSelectedState(linAccessors, selectedNode)))\n    }\n\n    ngOnDestroy(): void {\n        this.subscriptions.forEach(s => s.unsubscribe())\n    }\n\n    updateSelectedState(linAccessors: LineageAccessors, node: GraphNode) {\n        let compositeOp = <IComposite>linAccessors.getOperation(node.id)\n        switch (node.type) {\n            case \"operation\":\n                this.selectedDataSourceDescription = undefined\n                this.selectedOperation = compositeOp\n                break\n            case \"datasource\":\n                const selectedDatasetSchema = {attrs: linAccessors.getDatasetAttributes(node.id)}\n                this.selectedDataSourceDescription = {\n                    source: compositeOp.destination,\n                    schema: selectedDatasetSchema,\n                    timestamp: compositeOp.timestamp\n                }\n                this.selectedOperation = undefined\n                break\n        }\n    }\n\n    selectNode(nodeId: string, nodeType: GraphNodeType) {\n        switch (nodeType) {\n            case \"operation\":\n            case \"datasource\":\n                this.router.navigate(\n                    [\"dataset\", nodeId, \"lineage\", \"overview\"], {\n                        relativeTo: this.route.parent.parent.parent,\n                        fragment: nodeType\n                    })\n        }\n    }\n\n    gotoPartialLineage(dsId: string) {\n        this.router.navigate(\n            [\"dataset\", dsId, \"lineage\", \"partial\"], {\n                relativeTo: this.route.parent.parent.parent\n            })\n    }\n}\n\ninterface DataSourceDescription {\n    source: ITypedMetaDataSource\n    schema: { attrs: IAttribute[] }\n    timestamp: number\n}\n","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component} from \"@angular/core\";\n\n@Component({\n    template: require('./retry-popup-dialog.component.html'),\n    styles: [require('./retry-popup-dialog.component.less')]\n})\nexport class RetryPopupDialogComponent {\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport \"./third-party-scripts/browser-check.exec.js\";\nimport \"es6-shim\";\nimport \"reflect-metadata\";\nimport \"zone.js\";\nimport {platformBrowserDynamic} from \"@angular/platform-browser-dynamic\";\nimport {AppModule} from \"./app/app.module\";\nimport {enableProdMode} from \"@angular/core\";\n\ndeclare const __PRODUCTION_MODE__: boolean\nif (__PRODUCTION_MODE__) enableProdMode()\n\nplatformBrowserDynamic().bootstrapModule(AppModule)","require(\"!!/mnt/agent/work/b9d0f995b110e2f3/web/ui/node_modules/script-loader/addScript.js\")(require(\"!!/mnt/agent/work/b9d0f995b110e2f3/web/ui/node_modules/script-loader/node_modules/raw-loader/index.js!/mnt/agent/work/b9d0f995b110e2f3/web/ui/src/third-party-scripts/browser-check.exec.js\"))","module.exports = \"/**\\n * Generated by Browser-Update.org\\n */\\n\\nvar $buoop = {vs: {i: 13, f: -4, o: -4, s: 8, c: -6}, api: 4};\\nfunction $buo_f() {\\n    var e = document.createElement(\\\"script\\\");\\n    e.src = \\\"//browser-update.org/update.min.js\\\";\\n    document.body.appendChild(e);\\n}\\ntry {\\n    document.addEventListener(\\\"DOMContentLoaded\\\", $buo_f, false)\\n}\\ncatch (e) {\\n    window.attachEvent(\\\"onload\\\", $buo_f)\\n}\\n\"","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { NgModule } from \"@angular/core\";\nimport { BrowserModule } from \"@angular/platform-browser\";\nimport { RouterModule, Routes, UrlSegment } from \"@angular/router\";\nimport \"hammerjs/hammer\";\nimport { AppComponent } from \"./app.component\";\nimport { DashboardModule } from \"./dashboard/dashboard.module\";\nimport { DashboardComponent } from \"./dashboard/dashboard.component\";\nimport { LineageComponent } from \"./lineage/lineage.component\";\nimport { LineageModule } from \"./lineage/lineage.module\";\nimport { LineageByDatasetIdResolver } from \"./lineage/lineage.resolver\";\nimport { WelcomeComponent } from \"./dashboard/welcome/welcome.component\";\nimport { PersistentDatasetResolver } from \"./dataset/dataset.resolver\";\nimport { DatasetModule } from \"./dataset/dataset.module\";\nimport { DatasetLineageOverviewResolver } from \"./dataset/lineage-overview/lineage-overview.resolver\";\nimport { DatasetLineageOverviewComponent } from \"./dataset/lineage-overview/lineage-overview.component\";\nimport { MiscModule } from \"./misc/misc.module\";\nimport { XHRTimeoutRectifierModule } from \"./xhr-timeout-rectifier/xhr-timeout-rectifier.module\";\nimport { LineageStore } from \"./lineage/lineage.store\";\nimport {VisModule} from \"./visjs/vis.module\";\n\n\nconst lineageRoute = {\n    component: LineageComponent,\n    matcher: (url: UrlSegment[]) =>\n        (url.length === 0)\n            ? { consumed: url }\n            : (url.length === 2 && url[0].path === 'op')\n                ? { consumed: url, posParams: { 'operationId': url[1] } }\n                : null\n}\n\nconst datasetRoute = {\n    path: \"dataset/:id\",\n    resolve: { dataset: PersistentDatasetResolver },\n    children: [\n        {\n            path: \"lineage\",\n            children: [\n                {\n                    path: \"overview\",\n                    resolve: { lineage: DatasetLineageOverviewResolver },\n                    component: DatasetLineageOverviewComponent\n                },\n                {\n                    path: \"partial\",\n                    resolve: { lineage: LineageByDatasetIdResolver },\n                    children: [lineageRoute]\n                }\n            ]\n        }\n    ]\n}\n\nconst routes: Routes = [\n    {\n        path: '',\n        pathMatch: 'full',\n        redirectTo: '/dashboard'\n    },\n    {\n        path: 'dashboard',\n        component: DashboardComponent,\n        children: [\n            {\n                path: '',\n                pathMatch: 'full',\n                component: WelcomeComponent\n            },\n            datasetRoute\n        ]\n    },\n    datasetRoute,\n    {\n        path: '**',\n        redirectTo: '/dashboard'\n    },\n]\n\n@NgModule({\n    imports: [\n        BrowserModule,\n        RouterModule.forRoot(routes, { enableTracing: false }),\n        XHRTimeoutRectifierModule,\n        DashboardModule,\n        LineageModule,\n        DatasetModule,\n        VisModule,\n        MiscModule\n    ],\n    providers: [\n        LineageStore\n    ],\n    declarations: [AppComponent],\n    bootstrap: [AppComponent]\n})\nexport class AppModule {\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component} from '@angular/core';\nimport {Event as RouterEvent, NavigationCancel, NavigationEnd, NavigationError, NavigationStart, Router} from \"@angular/router\";\n\n@Component({\n    selector: 'app',\n    template: `\n        <router-outlet></router-outlet>\n        <loading-indicator [active]=\"loading\"></loading-indicator>\n    `,\n})\nexport class AppComponent {\n    loading: boolean = false\n\n    constructor(private router: Router) {\n        router.events.subscribe((event: RouterEvent) => {\n            this.updateLoadingStatus(event)\n        })\n    }\n\n    updateLoadingStatus(event: RouterEvent): void {\n        if (event instanceof NavigationStart) {\n            this.loading = true\n        }\n        if (event instanceof NavigationEnd\n            || event instanceof NavigationCancel\n            || event instanceof NavigationError) {\n            this.loading = false\n        }\n    }\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// CSS, Icons and other UI frameworks stuff\nimport \"font-awesome/css/font-awesome.min.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"bootstrap/dist/css/bootstrap-theme.min.css\";\nimport \"@angular/material/prebuilt-themes/indigo-pink.css\";\nimport {MaterialModule} from \"../material-extension/material.module\";\n\n// Other imports\nimport {CommonModule} from \"@angular/common\";\nimport {NgModule} from \"@angular/core\";\nimport {ReactiveFormsModule} from \"@angular/forms\";\nimport {RouterModule} from \"@angular/router\";\nimport {HttpClientModule} from \"@angular/common/http\";\nimport {DashboardComponent} from \"./dashboard.component\";\nimport {DatasetBrowserComponent} from \"./dataset-browser/dataset-browser.component\";\nimport {DatasetBrowserService} from \"./dataset-browser/dataset-browser.service\";\nimport {WelcomeComponent} from \"./welcome/welcome.component\";\nimport {MiscModule} from \"../misc/misc.module\";\nimport {ScrollEventModule} from \"ngx-scroll-event\";\n\n@NgModule({\n    imports: [\n        CommonModule,\n        ReactiveFormsModule,\n        RouterModule,\n        HttpClientModule,\n        MaterialModule,\n        MiscModule,\n        ScrollEventModule\n    ],\n    declarations: [\n        DashboardComponent,\n        DatasetBrowserComponent,\n        WelcomeComponent\n    ],\n    providers: [\n        DatasetBrowserService\n    ],\n    exports: [\n        DashboardComponent,\n        WelcomeComponent\n    ]\n})\nexport class DashboardModule {\n}","module.exports = \"<!--\\n  ~ Copyright 2017 ABSA Group Limited\\n  ~\\n  ~ Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n  ~ you may not use this file except in compliance with the License.\\n  ~ You may obtain a copy of the License at\\n  ~\\n  ~     http://www.apache.org/licenses/LICENSE-2.0\\n  ~\\n  ~ Unless required by applicable law or agreed to in writing, software\\n  ~ distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n  ~ See the License for the specific language governing permissions and\\n  ~ limitations under the License.\\n  -->\\n\\n<mat-grid-list cols=\\\"4\\\">\\n\\n    <!-- Left-side panel -->\\n    <mat-grid-tile>\\n        <div class=\\\"left-block\\\">\\n            <mat-toolbar color=\\\"primary\\\">\\n                <button mat-icon-button [matMenuTriggerFor]=\\\"menu\\\">\\n                    <mat-icon><i class=\\\"fa fa-bars main-menu\\\"></i></mat-icon>\\n                </button>\\n                <mat-menu #menu=\\\"matMenu\\\">\\n                    <button mat-menu-item disabled>\\n                        <mat-icon><i class=\\\"fa fa-sign-in\\\"></i></mat-icon>\\n                        <span>Sign in</span>\\n                    </button>\\n                    <a mat-menu-item href=\\\"https://github.com/AbsaOSS/spline/wiki\\\" target=\\\"_blank\\\">\\n                        <mat-icon><i class=\\\"fa fa-info\\\"></i></mat-icon>\\n                        <span>Spline Wiki</span>\\n                    </a>\\n                </mat-menu>\\n                <span class=\\\"spacer\\\"></span>\\n                <mat-toolbar-row>\\n                    <h1 class=\\\"spline-icon\\\">\\n                        <span>Data Lineage Tracking for Apache Spark&trade;</span>\\n                    </h1>\\n                </mat-toolbar-row>\\n            </mat-toolbar>\\n            <dataset-browser></dataset-browser>\\n        </div>\\n    </mat-grid-tile>\\n\\n    <!-- Lineage View -->\\n    <mat-grid-tile colspan=\\\"3\\\">\\n        <router-outlet></router-outlet>\\n    </mat-grid-tile>\\n</mat-grid-list>\\n\"","module.exports = \":host,mat-grid-list,mat-grid-tile,div.left-block{height:100%;width:100%}.mat-toolbar.mat-primary{background:#303a40}i.main-menu{font-size:21px}.mat-menu-item .mat-icon i.fa{position:absolute;top:12px;left:25px;font-size:21px}a[mat-menu-item]{color:inherit;text-decoration:inherit}div.left-block mat-toolbar{height:128px}div.left-block mat-toolbar h1{display:block;height:120px;margin-top:-10px;padding:50px 0 0 65px;color:#d9d2c7}div.left-block mat-toolbar h1>span{display:block;font-size:medium;color:gray;white-space:normal}div.left-block>dataset-browser{display:block;height:calc(100% - 128px)}.spline-icon{background-image:url(\\\"data:image/png;base64,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\\\");background-repeat:no-repeat;background-position:62px 0;background-size:130px}\"","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component, OnInit} from \"@angular/core\";\nimport {FormControl} from '@angular/forms';\nimport {DatasetBrowserService} from \"./dataset-browser.service\";\nimport {IPersistedDatasetDescriptor} from \"../../../generated-ts/lineage-model\";\nimport {SearchRequest} from \"./dataset-browser.model\";\nimport {BehaviorSubject, identity, timer} from \"rxjs\";\nimport {ScrollEvent} from \"ngx-scroll-event\";\nimport {debounce, distinct, filter} from \"rxjs/operators\";\n\n@Component({\n    selector: \"dataset-browser\",\n    template: require('./dataset-browser.component.html'),\n    styles: [require('./dataset-browser.component.less')]\n})\nexport class DatasetBrowserComponent implements OnInit {\n\n    descriptors: IPersistedDatasetDescriptor[]\n\n    searchText = new FormControl()\n\n    private searchRequest$ = new BehaviorSubject<SearchRequest>(null)\n\n    constructor(private dsBrowserService: DatasetBrowserService) {\n    }\n\n    ngOnInit(): void {\n        this.searchText.valueChanges\n            .pipe(debounce(v => timer(v ? 300 : 0)))\n            .forEach(this.newSearch.bind(this))\n\n        this.searchRequest$\n            .pipe(\n                distinct(),\n                filter(<any>identity))\n            .subscribe((sr:SearchRequest) =>\n                this.dsBrowserService\n                    .getLineageDescriptors(sr)\n                    .then(descriptors => {\n                        if (sr == this.searchRequest$.getValue()) {\n                            if (sr.offset == 0 ){\n                                this.descriptors = descriptors\n                            } else {\n                                this.descriptors.push(...descriptors)\n                            }\n                        }\n                    }))\n\n        // set initial values\n        this.searchText.setValue(\"\")\n    }\n\n    newSearch(text: string) {\n        this.searchRequest$.next(new SearchRequest(text))\n    }\n\n    onScroll(e: ScrollEvent) {\n        if (!e.isWindowEvent && e.isReachingBottom)\n            this.searchRequest$.next(\n                this.searchRequest$.getValue().withOffset(this.descriptors.length))\n    }\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport class SearchRequest {\n    constructor(public readonly text: string,\n                public readonly asAtTime = Date.now(),\n                public readonly offset: number = 0) {\n    }\n\n    public withOffset(offset: number): SearchRequest {\n        return offset == this.offset\n            ? this\n            : new SearchRequest(this.text,\n                this.asAtTime,\n                offset)\n    }\n}","module.exports = \"<!--\\n  ~ Copyright 2017 ABSA Group Limited\\n  ~\\n  ~ Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n  ~ you may not use this file except in compliance with the License.\\n  ~ You may obtain a copy of the License at\\n  ~\\n  ~     http://www.apache.org/licenses/LICENSE-2.0\\n  ~\\n  ~ Unless required by applicable law or agreed to in writing, software\\n  ~ distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n  ~ See the License for the specific language governing permissions and\\n  ~ limitations under the License.\\n  -->\\n\\n<div class=\\\"search input-group\\\">\\n    <span class=\\\"input-group-addon\\\"><mat-icon>search</mat-icon></span>\\n    <input [formControl]=\\\"searchText\\\" class=\\\"form-control\\\" placeholder=\\\"Search\\\">\\n    <button mat-icon-button class=\\\"cancel\\\"\\n            *ngIf=\\\"searchText.value.length\\\"\\n            (click)=\\\"searchText.reset('')\\\">\\n        <mat-icon>cancel</mat-icon>\\n    </button>\\n</div>\\n\\n<ul class=\\\"nav nav-pills nav-stacked\\\"\\n    detect-scroll\\n    [bottomOffset]=\\\"300\\\"\\n    (onScroll)=\\\"onScroll($event)\\\">\\n\\n    <li role=\\\"presentation\\\"\\n        *ngFor=\\\"let d of descriptors\\\"\\n        [routerLink]=\\\"'dataset/'+d.datasetId+'/lineage/overview'\\\"\\n        fragment=\\\"datasource\\\"\\n        [routerLinkActive]=\\\"['active']\\\">\\n        <a href=\\\"javascript:void(0)\\\">\\n            <b>{{d.path}}</b>\\n            <br/>\\n            <span class=\\\"small\\\" title=\\\"Spark application name\\\">{{d.appName}}</span>\\n        </a>\\n    </li>\\n</ul>\\n\\n<loading-indicator [active]=\\\"descriptors == null\\\"></loading-indicator>\"","module.exports = \":host{height:100%;width:100%}:host>div.search{width:100%;background-color:#fbfbfb;position:relative}:host>div.search input,:host>div.search .input-group-addon{border:none;outline:none;box-shadow:none;background:none}:host>div.search input{height:35px;font-size:larger;padding-right:36px}:host>div.search .input-group-addon{padding-right:0}:host>div.search button.cancel{position:absolute;top:-3px;right:0;z-index:10}:host>ul{height:calc(100% - 35px);overflow-y:auto;padding:0;background:whitesmoke}:host>ul>li>a{border-radius:0}:host>ul>li>a>span.small{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:xx-small}\"","module.exports = \"<!DOCTYPE html>\\n<!--\\n  ~ Copyright 2017 ABSA Group Limited\\n  ~\\n  ~ Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n  ~ you may not use this file except in compliance with the License.\\n  ~ You may obtain a copy of the License at\\n  ~\\n  ~     http://www.apache.org/licenses/LICENSE-2.0\\n  ~\\n  ~ Unless required by applicable law or agreed to in writing, software\\n  ~ distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n  ~ See the License for the specific language governing permissions and\\n  ~ limitations under the License.\\n  -->\\n\\n<h2>Welcome to Spline - Data Lineage Tracking for Apache Spark™</h2>\\n\\n<h5>\\n    <span class=\\\"arrow\\\"></span>\\n    Please select a dataset from the left-hand side menu to display the data lineage for.\\n</h5>\\n\\n<version></version>\"","module.exports = \"h2{margin-bottom:30%;opacity:.6}h5{position:relative;opacity:.5}h5 .arrow{display:block;position:absolute;top:-3px;left:-100px;width:100%;height:20px;background-image:url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE3LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgogICAgIHZpZXdCb3g9IjUuMiA2OTkuNyA1ODAgMTUwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDUuMiA2OTkuNyA1ODAgMTUwIiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+CiAgICA8cmVjdCBpZD0iWE1MSURfMV8iIHg9IjcuNSIgeT0iNzY3LjYiIGZpbGw9IiNBREFEQUQiIHdpZHRoPSI1NjYuOCIgaGVpZ2h0PSIxNC40Ii8+CiAgICA8ZyBpZD0iWE1MSURfNl8iPgogICAgICAgIDxwb2x5Z29uIGlkPSJYTUxJRF8zXyIgZmlsbD0iI0FEQURBRCIgcG9pbnRzPSI1MDguMiw4NDkuNiA0OTguMSw4MzkuNSA1NjIuOCw3NzQuNyA0OTguMSw3MTAuMSA1MDguMiw2OTkuOSA1ODMsNzc0LjcgICAgICAgICAiLz4KICAgIDwvZz4KPC9nPgo8L3N2Zz4K');background-repeat:no-repeat;background-position-x:right;transform:rotate(180deg);-o-transform:rotate(180deg);-ms-transform:rotate(180deg);-moz-transform:rotate(180deg);-webkit-transform:rotate(180deg);opacity:.7}\"","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component} from \"@angular/core\";\n\ndeclare const __APP_VERSION__: string\n\n@Component({\n    selector: \"version\",\n    template: `\n        <span class=\"small text-muted\">Spline v{{ appVersion }}</span>\n    `,\n    styles: [`span {\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        margin: 2px 6px\n    }`]\n})\nexport class VersionComponent {\n    appVersion: string = __APP_VERSION__\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component, HostBinding, Input, OnChanges, SimpleChanges} from \"@angular/core\";\n\n@Component({\n    selector: \"loading-indicator\",\n    template: require('./loading-indicator.component.html'),\n    styles: [require('./loading-indicator.component.less')],\n})\nexport class LoadingIndicatorComponent implements OnChanges {\n    @Input(\"active\")\n    isActive: boolean = false\n\n    @Input(\"delayed\")\n    @HostBinding('class.delayed')\n    isDelayed: boolean = true\n\n    @HostBinding('class.active')\n    showActive: boolean = false\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes[\"isActive\"]) setTimeout(() => this.showActive = this.isActive)\n    }\n}","module.exports = \"<!--\\n  ~ Copyright 2017 ABSA Group Limited\\n  ~\\n  ~ Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n  ~ you may not use this file except in compliance with the License.\\n  ~ You may obtain a copy of the License at\\n  ~\\n  ~     http://www.apache.org/licenses/LICENSE-2.0\\n  ~\\n  ~ Unless required by applicable law or agreed to in writing, software\\n  ~ distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n  ~ See the License for the specific language governing permissions and\\n  ~ limitations under the License.\\n  -->\\n\\n<div class=\\\"background\\\"></div>\\n<div class=\\\"foreground\\\">\\n    <p>\\n        <i class=\\\"fa fa-circle-o-notch fa-spin fa-5x\\\"></i>\\n        <span>loading, please wait</span>\\n    </p>\\n</div>\"","module.exports = \":host{pointer-events:none;position:absolute;top:0;width:100%;height:100%;opacity:0;transition:opacity .15s;transition-delay:0s}:host.active{opacity:1;z-index:999}:host.active.delayed{transition:opacity 1s;transition-delay:.8s}:host .background{opacity:.85;background:white;position:absolute;width:100%;height:100%}:host .foreground{position:absolute;width:100%;height:100%;display:flex;align-items:center}:host p{width:100%;text-align:center;color:#337ab7}:host p i{font-weight:800}:host p span{font-size:x-large;display:block;padding-top:15px}\"","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {maybe, Maybe} from \"tsmonad\";\n\nexport enum Tab { Summary, Operation }\n\nexport module Tab {\n    export function toFragment(tab: Tab): string {\n        return \"tab-\" + tab\n    }\n\n    export function fromFragment(s: string): Maybe<Tab> {\n        return maybe(/^tab-(\\d+)$/.exec(s)).map(groups => +groups[1])\n    }\n}\n","module.exports = \"<!--\\n  ~ Copyright 2017 ABSA Group Limited\\n  ~\\n  ~ Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n  ~ you may not use this file except in compliance with the License.\\n  ~ You may obtain a copy of the License at\\n  ~\\n  ~     http://www.apache.org/licenses/LICENSE-2.0\\n  ~\\n  ~ Unless required by applicable law or agreed to in writing, software\\n  ~ distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n  ~ See the License for the specific language governing permissions and\\n  ~ limitations under the License.\\n  -->\\n\\n<div>\\n    <mat-grid-list cols=\\\"3\\\">\\n        <mat-grid-tile colspan=\\\"2\\\">\\n            <graph #graph\\n                   [selectedOperationId]=\\\"selectedOperation?.mainProps.id\\\"\\n                   (operationSelected)=\\\"onOperationSelected($event)\\\"\\n                   [highlightedNodeIDs]=\\\"highlightedNodeIDs\\\"\\n                   [hiddenOperationTypes]=\\\"hiddenOperationTypes\\\">\\n            </graph>\\n            <div class=\\\"graph-toolbar top left\\\">\\n                <button mat-button (click)=\\\"gotoLineageOverview()\\\" title=\\\"Show a high level lineage graph\\\">\\n                    <mat-icon>keyboard_arrow_left</mat-icon>\\n                    Lineage Overview\\n                </button>\\n            </div>\\n            <div class=\\\"graph-toolbar top right\\\">\\n                <ng-template ngFor let-opType [ngForOf]=\\\"presentHideableOperationTypes\\\">\\n                    <button mat-icon-button\\n                            (click)=\\\"toggleOperationTypeVisibility(opType)\\\"\\n                            title=\\\"{{isOperationTypeVisible(opType) ? 'Hide' : 'Show'}} '{{opType}}' operations\\\">\\n                        <mat-icon>{{isOperationTypeVisible(opType) ? 'visibility' : 'visibility_off'}}</mat-icon>\\n                        {{opType}}\\n                    </button>\\n                </ng-template>\\n            </div>\\n            <div class=\\\"graph-toolbar bottom right\\\">\\n                <button *ngIf=\\\"selectedAttrIDs.length\\\"\\n                        mat-button (click)=\\\"clearSelection()\\\" title=\\\"Collapse groups of nodes\\\">\\n                    <mat-icon title=\\\"Clear selection\\\">clear</mat-icon>\\n                    Clear selection\\n                </button>\\n                <button mat-button (click)=\\\"graph.collapseNodes()\\\" title=\\\"Collapse groups of nodes\\\">\\n                    <mat-icon>fullscreen_exit</mat-icon>\\n                </button>\\n                <button mat-button (click)=\\\"graph.fit()\\\" title=\\\"Fit to screen\\\">\\n                    <mat-icon>filter_none</mat-icon>\\n                </button>\\n            </div>\\n        </mat-grid-tile>\\n        <mat-grid-tile>\\n            <div class=\\\"details-container\\\">\\n                <mat-tab-group [selectedIndex]=\\\"selectedTabIndex\\\"\\n                               (selectChange)=\\\"onTabChanged($event)\\\">\\n\\n                    <mat-tab label=\\\"Summary\\\">\\n                        <h2>{{lineage.appName}}</h2>\\n                        <pre class=\\\"small\\\">#{{lineage.appId}}</pre>\\n                        <p>Spark version: <b>{{lineage.sparkVer}}</b></p>\\n                        <p>Timestamp: <b>{{lineage.timestamp | date:'long'}}</b></p>\\n                        <p>Operations: <b>{{lineage.operations.length}}</b></p>\\n                        <p>Input data sources: <b>{{getDataSourceCount()}}</b></p>\\n                    </mat-tab>\\n\\n                    <mat-tab *ngIf=\\\"selectedOperation\\\">\\n                        <ng-template mat-tab-label>\\n                            <operation-icon [operation]=\\\"selectedOperation\\\" class=\\\"spl-tab-node\\\"></operation-icon>\\n                            {{selectedOperation.mainProps.name}}\\n                        </ng-template>\\n\\n                        <operation-details\\n                                [operation]=\\\"selectedOperation\\\"\\n                                [selectedAttrIDs]=\\\"selectedAttrIDs\\\"\\n                                (attributeSelected)=\\\"onAttributeSelected($event)\\\">\\n                        </operation-details>\\n                    </mat-tab>\\n                </mat-tab-group>\\n            </div>\\n        </mat-grid-tile>\\n    </mat-grid-list>\\n</div>\\n\\n<version></version>\"","module.exports = \":host{height:100%;width:100%}:host>div{height:100%}:host>div mat-grid-list{height:100%}:host>div mat-grid-tile{height:100%}:host>div graph{display:block;height:100%;width:100%}:host>div .graph-toolbar{background:white;opacity:.8;border-radius:100px;box-shadow:0 0 100px 50px white;position:absolute}:host>div .graph-toolbar.top{top:20px}:host>div .graph-toolbar.left{left:25px}:host>div .graph-toolbar.right{right:25px}:host>div .graph-toolbar.bottom{bottom:20px}:host>div .graph-toolbar .mat-button{min-width:0}:host>div .graph-toolbar .mat-icon-button{width:auto;padding:0 7px}:host>div .graph-toolbar .mat-icon-button .mat-icon{font-size:1.4em}:host>div .details-container{height:100%;width:100%;background:whitesmoke}:host>div .details-container mat-tab-group{height:100%}:host>div .details-container mat-tab-group operation-node-details{width:100%}:host>div .details-container mat-tab-group a.btn.__view-executions{float:right}:host>div .details-container mat-tab-group/deep/.mat-tab-header .mat-tab-label i{font-size:x-large;position:absolute;left:6px;top:10px}:host>div .details-container mat-tab-group/deep/.mat-tab-header .mat-tab-label i.spl-tab-attr{color:lightseagreen}:host>div .details-container mat-tab-group/deep/.mat-tab-body-wrapper{height:100%}:host>div .details-container mat-tab-group/deep/.mat-tab-body-wrapper .mat-tab-body-content{height:100%}\"","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { NgModule } from \"@angular/core\";\nimport { LineageComponent } from \"./lineage.component\";\nimport { LineageService } from \"./lineage.service\";\nimport { CommonModule } from \"@angular/common\";\nimport { HttpClientModule } from \"@angular/common/http\";\nimport { RouterModule } from \"@angular/router\";\n\n\nimport \"@angular/material/prebuilt-themes/indigo-pink.css\";\nimport { NoopAnimationsModule } from \"@angular/platform-browser/animations\";\nimport { MaterialModule } from \"../material-extension/material.module\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"bootstrap/dist/css/bootstrap-theme.min.css\";\nimport \"font-awesome/css/font-awesome.min.css\";\n\nimport { GraphComponent } from \"./graph/graph.component\";\nimport { LineageByDatasetIdResolver } from \"./lineage.resolver\";\nimport { DetailsModule } from \"./details/details.module\";\nimport { MiscModule } from \"../misc/misc.module\";\nimport { ExpressionRenderService } from \"./details/expression/expression-render.service\";\n\n@NgModule({\n    imports: [\n        NoopAnimationsModule,\n        CommonModule,\n        RouterModule,\n        MaterialModule,\n        HttpClientModule,\n        DetailsModule,\n        MiscModule\n    ],\n    declarations: [\n        LineageComponent,\n        GraphComponent\n    ],\n    providers: [\n        LineageService,\n        LineageByDatasetIdResolver,\n        ExpressionRenderService\n    ],\n    exports: [\n        LineageComponent,\n        GraphComponent\n    ]\n})\nexport class LineageModule {\n\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component, ElementRef, EventEmitter, Input, NgZone, OnDestroy, Output} from \"@angular/core\";\nimport {IDataLineage} from \"../../../generated-ts/lineage-model\";\nimport \"vis/dist/vis.min.css\";\nimport {visOptions} from \"./vis-options\";\nimport {lineageToGraph} from \"./graph-builder\";\nimport * as vis from \"vis\";\nimport * as _ from \"lodash\";\nimport {ClusterManager} from \"../../visjs/cluster-manager\";\nimport {VisEdge, VisNode} from \"./graph.model\";\nimport {LineageStore} from \"../lineage.store\";\nimport {OperationType} from \"../types\";\nimport {VisClusterNode, VisModel} from \"../../visjs/vis-model\";\nimport {BehaviorSubject, combineLatest, Subject, Subscription} from \"rxjs\";\nimport {ExpressionRenderService} from \"../details/expression/expression-render.service\";\nimport {distinctUntilChanged} from \"rxjs/operators\";\nimport {VisNetworkService} from \"../../visjs/vis-network.service\";\n\n@Component({\n    selector: 'graph',\n    template: '',\n    providers: [\n        VisNetworkService\n    ]\n})\nexport class GraphComponent implements OnDestroy {\n    private hiddenOperationTypes$ = new Subject<OperationType[]>()\n    private highlightedNodeIDs$ = new Subject<string[]>()\n    private selectedOperationId$ = new BehaviorSubject<string | undefined>(undefined)\n\n    @Input() public set hiddenOperationTypes(types: OperationType[]) {\n        this.hiddenOperationTypes$.next(types)\n    }\n\n    @Input() public set highlightedNodeIDs(ids: string[]) {\n        this.highlightedNodeIDs$.next(ids)\n    }\n\n    @Input() public set selectedOperationId(opId: string | undefined) {\n        this.selectedOperationId$.next(opId)\n    }\n\n    @Output() public operationSelected = new EventEmitter<string>()\n\n    private graph: VisModel<VisNode, VisEdge>\n    private clusterManager: ClusterManager<VisNode, VisEdge>\n\n    private readonly subscriptions: Subscription[]\n\n    constructor(private container: ElementRef,\n                private expressionRenderService: ExpressionRenderService,\n                private lineageStore: LineageStore,\n                private visNetworkService: VisNetworkService,\n                private zone: NgZone) {\n\n        const changedHiddenOperationTypes$ = this.hiddenOperationTypes$.pipe(distinctUntilChanged(_.isEqual))\n        const changedHighlightedNodeIds$ = this.highlightedNodeIDs$.pipe(distinctUntilChanged(_.isEqual))\n        const graphRebuildEvidence$ = new Subject<void>()\n\n        this.subscriptions = [\n            combineLatest([this.lineageStore.lineage$, changedHiddenOperationTypes$])\n                .subscribe(([lineage, hiddenOpTypes]) => {\n                    this.rebuildGraph(lineage, hiddenOpTypes)\n                    graphRebuildEvidence$.next()\n                }),\n\n            combineLatest([changedHighlightedNodeIds$, graphRebuildEvidence$])\n                .subscribe(([highlightedIds]) => {\n                    this.refreshHighlightedNodes(highlightedIds)\n                }),\n\n            combineLatest([this.selectedOperationId$, graphRebuildEvidence$])\n                .subscribe(([selectedOpId]) => {\n                    this.refreshSelectedNode(selectedOpId)\n                })\n        ]\n    }\n\n    ngOnDestroy(): void {\n        this.subscriptions.forEach(sbc => sbc.unsubscribe())\n    }\n\n    private rebuildGraph(lineage: IDataLineage, hiddenOperationTypes: OperationType[]) {\n        this.zone.runOutsideAngular(() => {\n            this.graph = lineageToGraph(\n                lineage,\n                this.expressionRenderService,\n                this.selectedOperationId$.value, hiddenOperationTypes)\n\n            const network = this.visNetworkService.createNetwork(() =>\n                new vis.Network(this.container.nativeElement, this.graph, visOptions))\n\n            this.clusterManager =\n                new ClusterManager(this.graph, network, (nodes, edges) => {\n                    const nodesGroups: VisNode[][] = []\n                    nodes.forEach(node => {\n                        const siblingsTo = edges.filter(e => e.from == node.id).map(e => e.to)\n                        const siblingsFrom = edges.filter(e => e.to == node.id).map(e => e.from)\n                        if (siblingsFrom.length == 1 && siblingsTo.length == 1) {\n                            const group = nodesGroups.find(grp => _.some(grp, n => n.id == siblingsTo[0]))\n                            if (group) group.push(node)\n                            else nodesGroups.push([node])\n                        }\n                    })\n                    return nodesGroups.map((nodes, i) => {\n                        const id = `cluster:${i}`\n                        const label = \"(\" + nodes.length + \")\"\n                        const isHighlighted = _.some(nodes, n => n.isHighlighted)\n                        return new VisClusterNode(id, label, nodes, isHighlighted)\n                    })\n                })\n\n            this.clusterManager.rebuildClusters()\n\n            network.on(\"click\", event => {\n                const nodeId = event.nodes[0]\n                if (network.isCluster(nodeId)) {\n                    network.openCluster(nodeId)\n                    this.refreshSelectedNode(this.selectedOperationId$.value)\n                } else {\n                    this.zone.run(() => this.operationSelected.emit(nodeId))\n                }\n            })\n\n            const canvasElement = this.container.nativeElement.getElementsByTagName(\"canvas\")[0]\n            network.on('hoverNode', () => canvasElement.style.cursor = 'pointer')\n            network.on('blurNode', () => canvasElement.style.cursor = 'default')\n            network.on(\"beforeDrawing\", ctx => {\n                network.getSelectedNodes().forEach(nodeId => {\n                    const nodePosition = network.getPositions(nodeId)\n                    ctx.fillStyle = \"#e0e0e0\"\n                    ctx.circle(nodePosition[nodeId].x, nodePosition[nodeId].y, 65)\n                    ctx.fill()\n                })\n            })\n\n            this.clusterManager.collapseAllClusters();\n        })\n    }\n\n    public fit() {\n        this.zone.runOutsideAngular(() => {\n            this.visNetworkService.network.fit()\n        })\n    }\n\n    public collapseNodes() {\n        this.zone.runOutsideAngular(() => {\n            this.clusterManager.collapseClustersExceptForNode(this.selectedOperationId$.value)\n        })\n    }\n\n    private refreshSelectedNode(selectedOpId: string | undefined) {\n        this.zone.runOutsideAngular(() => {\n            const network = this.visNetworkService.network\n            network.unselectAll()\n            if (selectedOpId) {\n                network.selectNodes([selectedOpId])\n                this.clusterManager.expandClusterForNode(selectedOpId)\n            }\n        })\n    }\n\n    private refreshHighlightedNodes(highlightedNodeIDs: string[]) {\n        this.zone.runOutsideAngular(() => {\n            const nodeDataSet = <vis.DataSet<VisNode>>this.graph.nodes\n            const currentNodes = nodeDataSet.get()\n            const updatedNodes = currentNodes.map(node => {\n                const isHighlighted = _.includes(highlightedNodeIDs, node.id)\n                return (node.isHighlighted != isHighlighted)\n                    ? new VisNode(node.operation, node.label, isHighlighted)\n                    : node\n            })\n\n            nodeDataSet.update(updatedNodes)\n\n            this.clusterManager.refreshHighlightedClustersForNodes()\n        })\n    }\n\n}\n","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Options} from \"vis\";\n\nexport const visOptions: Options = {\n    autoResize: true,\n    interaction: {\n        hover: true,\n        selectConnectedEdges: false,\n        hoverConnectedEdges: false\n    },\n    layout: {\n        hierarchical: {\n            enabled: true,\n            sortMethod: 'directed',\n            direction: 'UD',\n            parentCentralization: true,\n            nodeSpacing: 200,\n            levelSeparation: 200\n        }\n    },\n    physics: {\n        enabled: true,\n        hierarchicalRepulsion: {\n            nodeDistance: 250,\n            springLength: 150,\n            springConstant: 10,\n            damping: 1\n        }\n    },\n\n    edges: {\n        color: {\n            color: '#E0E0E0',\n            hover: '#E0E0E0',\n            highlight: 'E0E0E0'\n        },\n        shadow: false,\n        width: 10,\n        arrows: \"to\",\n        font: {\n            color: '#343434',\n            background: '#ffffff',\n            strokeWidth: 0\n        }\n    },\n    nodes: {\n        shape: 'icon',\n        shadow: false,\n        // margin: 10,\n        labelHighlightBold: false,\n        font: {\n            color: '#343434',\n            size: 20\n        }\n    }\n}\n","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {IAttribute, IDataLineage, IMetaDataset, IOperation} from \"../../../generated-ts/lineage-model\";\nimport {VisNode, VisEdge} from \"./graph.model\";\nimport * as vis from \"vis\";\nimport * as _ from \"lodash\";\nimport {OperationType, typeOfOperation} from \"../types\";\nimport {VisModel} from \"../../visjs/vis-model\";\nimport {ExpressionRenderService} from \"../details/expression/expression-render.service\";\nimport {IJoin, IFilter, ISort, IRead, IWrite} from \"../../../generated-ts/operation-model\";\n\nexport function lineageToGraph(\n    lineage: IDataLineage,\n    expressionRenderService: ExpressionRenderService,\n    selectedOperationId: string | undefined,\n    hiddenOperationTypes: OperationType[] = []): VisModel<VisNode, VisEdge> {\n\n    const operationVisibilityPredicate = (op: IOperation) => {\n            let opType = typeOfOperation(op)\n            return op.mainProps.id == selectedOperationId\n                || opType != \"Alias\"\n                && hiddenOperationTypes.indexOf(opType) < 0\n        },\n        operationsByVisibility = _.groupBy(lineage.operations, operationVisibilityPredicate),\n        visibleOperations: IOperation[] = operationsByVisibility.true,\n        hiddenOperations: IOperation[] = operationsByVisibility.false,\n        hiddenOpIds: string[] = _.map(hiddenOperations, \"mainProps.id\"),\n        visibleNodes = visibleOperations.map(op => {\n            return new VisNode(op, getLabel(op, expressionRenderService))\n        }),\n        visibleEdges = createVisibleEdges(lineage, hiddenOpIds)\n\n    return new VisModel(\n        new vis.DataSet<VisNode>(visibleNodes),\n        new vis.DataSet<VisEdge>(visibleEdges))\n}\n\n/**\n * Get label from an operation\n *\n * @param operation the operation where the label should be retrieved\n * @param expressionRenderService service to render expressions\n *\n * @returns the label from the operation\n */\nexport function getLabel(operation: IOperation, expressionRenderService: ExpressionRenderService) {\n    let label = operation.mainProps.name + \"\\n\"\n    switch (typeOfOperation(operation)) {\n        case \"Aggregate\":\n            let aggregationExpressions = (<any>operation).aggregations\n            label += Object.keys(aggregationExpressions).join(\",\")\n            break\n        case \"Join\":\n            let joinExpression = (<IJoin>operation).condition\n            if (joinExpression)\n                label += expressionRenderService.getText(joinExpression)\n            break\n        case \"Filter\":\n            let filterExpression = (<IFilter>operation).condition\n            label += expressionRenderService.getText(filterExpression)\n            break\n        case \"Projection\":\n            // TODO : Define what to display for the second label\n            break\n        case \"Sort\":\n            let sortExpressions = (<ISort>operation).orders\n            label += sortExpressions[0].direction + \" \" + expressionRenderService.getText(sortExpressions[0])\n            break\n        case \"Read\":\n            let readExpression = (<IRead>operation).sources\n            label += getFileName(readExpression[0].path)\n            break\n        case \"Write\":\n            label += (<IWrite>operation).path\n            break\n        default:\n            label = operation.mainProps.name\n    }\n\n    return _.truncate(label, {length: 50});\n}\n\n/**\n * Get the filename from a path\n *\n * @param path string where the filename should be extracted\n *\n * @returns the the filename of the path in parameters\n */\nfunction getFileName(path: string): string {\n    return path.replace(/^.*[\\\\\\/]/, '')\n}\n\nfunction createVisibleEdges(lineage: IDataLineage, hiddenOpIds: string[]): VisEdge[] {\n    let opIdsByInDsId: { [key: string]: string[] } = {},\n        opIdByOutDsId: { [key: string]: string } = {}\n\n    // group operations by their input & output\n    lineage.operations.forEach(op => {\n        let opId = op.mainProps.id\n        opIdByOutDsId[op.mainProps.output] = opId\n        op.mainProps.inputs.forEach(inDsId => {\n            let opsForInput = opIdsByInDsId[inDsId] || []\n            opIdsByInDsId[inDsId] = opsForInput\n            opsForInput.push(opId)\n        })\n    })\n\n    // create edges\n    let attrsById: { [id: string]: IAttribute } = _.mapValues(_.groupBy(lineage.attributes, \"id\"), _.first),\n        datasetsById: { [id: string]: IMetaDataset } = _.mapValues(_.groupBy(lineage.datasets, \"id\"), _.first),\n        datasetIdsThatFormEdges = _.intersection(_.keys(opIdsByInDsId), _.keys(opIdByOutDsId)),\n        edges: { from: string, to: string, dsId: string }[] = _.flatMap(datasetIdsThatFormEdges, dsId => {\n            let fromOperationId = opIdByOutDsId[dsId]\n            return opIdsByInDsId[dsId]\n                .filter(toOperationId => fromOperationId != toOperationId)\n                .map(toOperationId => ({\n                    from: fromOperationId,\n                    to: toOperationId,\n                    dsId: dsId\n                }))\n        })\n\n    // reduce edges by visibility\n    hiddenOpIds.forEach(hiddenOpId => {\n        let hiddenInputEdges = _.remove(edges, e => e.to == hiddenOpId)\n        if (hiddenInputEdges.length != 1)\n            throw Error(\"Unexpected number of input edges (\" + hiddenInputEdges.length + \") for operation (\" + hiddenOpId + \") that should be unary\")\n        let parentOpId = hiddenInputEdges[0].from\n        edges.filter(e => e.from == hiddenOpId).forEach(e => e.from = parentOpId)\n    })\n\n    // convert to vis.Edge\n    return edges.map(e => {\n        let attrNames = datasetsById[e.dsId].schema.attrs.map(attrId => attrsById[attrId].name),\n            edgeTitle = '[' + attrNames.join(', ') + ']'\n        return new VisEdge(e.from, e.to, edgeTitle)\n    })\n}\n","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {IOperation} from \"../../generated-ts/lineage-model\";\nimport {IExpression} from \"../../generated-ts/expression-model\";\nimport {IDataType} from \"../../generated-ts/datatype-model\";\n\nexport type OperationType =\n    (\"Projection\"\n        | \"Read\"\n        | \"Join\"\n        | \"Union\"\n        | \"Generic\"\n        | \"Filter\"\n        | \"Sort\"\n        | \"Aggregate\"\n        | \"Write\"\n        | \"Alias\"\n        | \"Composite\"\n        )\n\nexport type ExpressionType =\n    (\"Binary\"\n        | \"Literal\"\n        | \"Alias\"\n        | \"UDF\"\n        | \"Generic\"\n        | \"GenericLeaf\"\n        | \"AttrRef\"\n        )\n\nexport type DataTypeType =\n    (\"Struct\"\n        | \"Array\"\n        | \"Simple\"\n        )\n\n\nexport function typeOfOperation(node: IOperation): OperationType | undefined {\n    return typeOfAnyAssumingPrefix(node, \"op\") as OperationType\n}\n\nexport function typeOfExpr(expr: IExpression): ExpressionType | undefined {\n    return typeOfAnyAssumingPrefix(expr, \"expr\") as ExpressionType\n}\n\nexport function typeOfDataType(dataType: IDataType): DataTypeType | undefined {\n    return typeOfAnyAssumingPrefix(dataType, \"dt\") as DataTypeType\n}\n\nfunction typeOfAnyAssumingPrefix(obj: any, expectedPrefix: string): string | undefined {\n    let typeSuffix = getNthLastIndexOf(obj._typeHint, \".\", 2)\n    let prefixWithType = typeSuffix && typeSuffix.split(\".\")\n    if (prefixWithType && prefixWithType.length == 2) {\n        const [prefix, type] = prefixWithType\n        return (prefix == expectedPrefix && type) || undefined\n    }\n    else\n        return undefined\n}\n\nfunction getNthLastIndexOf(str: string, search: string, n: number): string | undefined {\n    if(!str)\n        return undefined\n    else {\n        let pos = str.length\n        for (let i = 0; i < n; i++) {\n            pos = str.lastIndexOf(search, pos - 1)\n        }\n        return str.substring(pos + 1) || undefined\n    }\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component, Input} from \"@angular/core\";\nimport {IOperation} from \"../../../../generated-ts/lineage-model\";\nimport {typeOfOperation} from \"../../types\";\nimport {getIconForNodeType} from \"./operation-icon.utils\";\n\n@Component({\n    selector: \"operation-icon\",\n    template: \"<i class='fa {{faIconCode}}'></i>\",\n    styles: [\"i { color: steelblue; }\"]\n})\nexport class OperationIconComponent {\n    faIconCode: string\n\n    @Input() set operation(op: IOperation) {\n        this.faIconCode = op && getIconForNodeType(typeOfOperation(op)).name\n    }\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component, EventEmitter, Input, OnChanges, Output, SimpleChanges} from \"@angular/core\";\nimport {IAttribute, IOperation} from \"../../../../generated-ts/lineage-model\";\nimport {LineageStore} from \"../../lineage.store\";\nimport {OperationType, typeOfExpr, typeOfOperation} from \"../../types\";\nimport {IExpression} from \"../../../../generated-ts/operation-model\";\nimport {getIconForNodeType} from \"./operation-icon.utils\";\n\nimport * as _ from \"lodash\"\n\n@Component({\n    selector: \"operation-details\",\n    template: require('./operation-details.component.html'),\n    styles: [require('./operation-details.component.less')]\n})\nexport class OperationDetailsComponent implements OnChanges {\n\n    constructor(private lineageStore: LineageStore) {\n    }\n\n    @Input() operation: IOperation\n    @Input() selectedAttrIDs: string[]\n\n    @Output() attributeSelected = new EventEmitter<IAttribute>()\n\n    private operationType: OperationType\n\n    keys(object: { [key: string]: any }) {\n        return Object.keys(object)\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        this.operationType = typeOfOperation(this.operation)\n    }\n\n    getOperationIcon() {\n        return getIconForNodeType(this.operationType).name\n    }\n\n    //noinspection JSMethodCanBeStatic\n    getExprType(expr: IExpression) {\n        return typeOfExpr(expr)\n    }\n\n    getAttribute(id: string): IAttribute {\n        return this.lineageStore.lineageAccessors.getAttribute(id)\n    }\n\n    getDatasetAttributes(dsId: string): IAttribute[] {\n        return this.lineageStore.lineageAccessors.getDatasetAttributes(dsId)\n    }\n\n    getDroppedAttributesIfAny(): IAttribute[] | undefined {\n        const attributeIdsByDatasetId =\n            (dsId: string): string[] => this.lineageStore.lineageAccessors.getDataset(dsId).schema.attrs\n\n        const inputAttributeIds: string[] = _.flatMap(this.operation.mainProps.inputs, attributeIdsByDatasetId)\n        const outputAttributeIds: string[] = attributeIdsByDatasetId(this.operation.mainProps.output)\n\n        const removedAttributesSortedByName =\n            _(inputAttributeIds).difference(outputAttributeIds)\n                .map(attrId => this.lineageStore.lineageAccessors.getAttribute(attrId))\n                .sortBy(attr => attr.name)\n                .value()\n\n        return removedAttributesSortedByName.length\n            ? removedAttributesSortedByName\n            : undefined\n    }\n\n    selectAttribute(attrId: string) {\n        this.attributeSelected.emit(this.lineageStore.lineageAccessors.getAttribute(attrId))\n    }\n\n}","module.exports = \"<!--\\n  ~ Copyright 2017 ABSA Group Limited\\n  ~\\n  ~ Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n  ~ you may not use this file except in compliance with the License.\\n  ~ You may obtain a copy of the License at\\n  ~\\n  ~     http://www.apache.org/licenses/LICENSE-2.0\\n  ~\\n  ~ Unless required by applicable law or agreed to in writing, software\\n  ~ distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n  ~ See the License for the specific language governing permissions and\\n  ~ limitations under the License.\\n  -->\\n\\n<div>\\n    <details-panel-header\\n            [caption]=\\\"operation.mainProps.name\\\"\\n            [faIcon]=\\\"getOperationIcon()\\\"\\n            iconColor=\\\"steelblue\\\"></details-panel-header>\\n\\n    <div class=\\\"body\\\">\\n        <p-accordion [multiple]=\\\"true\\\">\\n\\n            <!-- Section: Read -->\\n            <section *ngIf=\\\"operationType == 'Read'\\\">\\n                <p-accordionTab [selected]=\\\"true\\\">\\n                    <p-header>\\n                        <details-section-header\\n                                caption=\\\"Read {{ operation.sourceType }}\\\"\\n                                faIcon=\\\"fa-table\\\"\\n                                iconColor=\\\"black\\\"></details-section-header>\\n                    </p-header>\\n                    <ul>\\n                        <li *ngFor=\\\"let source of operation.sources\\\"\\n                            title=\\\"{{ source.path }}\\\">{{ source.path }}\\n                        </li>\\n                    </ul>\\n                </p-accordionTab>\\n            </section>\\n\\n            <!-- Section: Write -->\\n            <section *ngIf=\\\"operationType == 'Write'\\\">\\n                <p-accordionTab [selected]=\\\"true\\\">\\n                    <p-header>\\n                        <details-section-header\\n                                caption=\\\"Write to {{ operation.destinationType }}\\\"\\n                                faIcon=\\\"fa-floppy-o\\\"\\n                                iconColor=\\\"steelblue\\\"></details-section-header>\\n                    </p-header>\\n                    <ul>\\n                        <li title=\\\"{{ operation.path }}\\\">{{ operation.path }}</li>\\n                    </ul>\\n                </p-accordionTab>\\n            </section>\\n\\n            <!-- Section: Filter -->\\n            <section *ngIf=\\\"operationType == 'Filter'\\\">\\n                <p-accordionTab [selected]=\\\"true\\\">\\n                    <p-header>\\n                        <details-section-header\\n                                caption=\\\"Filter by\\\"\\n                                faIcon=\\\"fa-filter\\\"\\n                                iconColor=\\\"steelblue\\\"></details-section-header>\\n                    </p-header>\\n                    <ul>\\n                        <li>\\n                            <expression-inline [expr]=\\\"operation.condition\\\"></expression-inline>\\n                        </li>\\n                    </ul>\\n                </p-accordionTab>\\n            </section>\\n\\n            <!-- Section: Sort -->\\n            <section *ngIf=\\\"operationType == 'Sort'\\\">\\n                <p-accordionTab [selected]=\\\"true\\\">\\n                    <p-header>\\n                        <details-section-header\\n                                caption=\\\"Sort by\\\"\\n                                faIcon=\\\"fa-sort-amount-desc\\\"\\n                                iconColor=\\\"steelblue\\\"></details-section-header>\\n                    </p-header>\\n                    <ul class=\\\"sort-orders\\\">\\n                        <li *ngFor=\\\"let order of operation.orders\\\">\\n                            <i class=\\\"fa {{order.direction == 'ASC' ? 'fa-long-arrow-down' : 'fa-long-arrow-up'}}\\\"\\n                               title=\\\"{{order.direction}}\\\"></i>\\n                            <expression-inline [expr]=\\\"order.expression\\\"></expression-inline>\\n                        </li>\\n                    </ul>\\n                </p-accordionTab>\\n            </section>\\n\\n            <!-- Section: Aggregate -->\\n            <section *ngIf=\\\"operationType == 'Aggregate'\\\">\\n                <p-accordionTab [selected]=\\\"true\\\">\\n                    <p-header>\\n                        <details-section-header\\n                                caption=\\\"Group by\\\"\\n                                faIcon=\\\"fa-object-group\\\"\\n                                iconColor=\\\"steelblue\\\"></details-section-header>\\n                    </p-header>\\n                    <ul>\\n                        <li *ngFor=\\\"let grExpr of operation.groupings\\\">\\n                            <expression-inline [expr]=\\\"grExpr\\\"></expression-inline>\\n                        </li>\\n                    </ul>\\n                </p-accordionTab>\\n                <p-accordionTab [selected]=\\\"true\\\">\\n                    <p-header>\\n                        <details-section-header\\n                                caption=\\\"Aggregations\\\"\\n                                faIcon=\\\"fa-calculator\\\"\\n                                iconColor=\\\"steelblue\\\"></details-section-header>\\n                    </p-header>\\n                    <ul>\\n                        <ng-template ngFor let-name [ngForOf]=\\\"keys(operation.aggregations)\\\">\\n                            <li>\\n                                <expression-inline [expr]=\\\"operation.aggregations[name]\\\"></expression-inline>\\n                            </li>\\n                        </ng-template>\\n                    </ul>\\n                </p-accordionTab>\\n            </section>\\n\\n            <!-- Section: Projection -->\\n            <section *ngIf=\\\"operationType == 'Projection'\\\">\\n                <p-accordionTab *ngIf=\\\"getDroppedAttributesIfAny(); let droppedAttrs\\\" [selected]=\\\"true\\\">\\n                    <p-header>\\n                        <details-section-header\\n                                caption=\\\"Dropped Attributes\\\"\\n                                faIcon=\\\"fa-columns\\\"\\n                                iconColor=\\\"steelblue\\\"></details-section-header>\\n                    </p-header>\\n                    <ul>\\n                        <li *ngFor=\\\"let attr of droppedAttrs\\\">\\n                            <span class=\\\"expr-attr-removal\\\"\\n                                  title=\\\"Removed attribute '{{ attr.name }}'\\\">\\n                                <i>a</i>\\n                                <span>{{ attr.name }}</span>\\n                            </span>\\n                        </li>\\n                    </ul>\\n                </p-accordionTab>\\n\\n                <p-accordionTab *ngIf=\\\"operation.transformations?.length\\\" [selected]=\\\"true\\\">\\n                    <p-header>\\n                        <details-section-header\\n                                caption=\\\"Transformations\\\"\\n                                faIcon=\\\"fa-cogs\\\"\\n                                iconColor=\\\"steelblue\\\"></details-section-header>\\n                    </p-header>\\n                    <ul>\\n                        <li *ngFor=\\\"let expr of operation.transformations\\\">\\n                            <span class=\\\"expr-lambda\\\">\\n                                <i title=\\\"Expression\\\">λ=</i>\\n                                <expression-inline [expr]=\\\"expr\\\"></expression-inline>\\n                            </span>\\n                        </li>\\n                    </ul>\\n                </p-accordionTab>\\n            </section>\\n\\n            <!-- Section: Join -->\\n            <section *ngIf=\\\"operationType == 'Join'\\\">\\n                <p-accordionTab [selected]=\\\"true\\\">\\n                    <p-header>\\n                        <details-section-header\\n                                caption=\\\"{{ operation.joinType }} join {{ operation.condition ? 'on' : '' }}\\\"\\n                                faIcon=\\\"fa-code-fork\\\"\\n                                iconColor=\\\"steelblue\\\"></details-section-header>\\n                    </p-header>\\n                    <ul *ngIf=\\\"operation.condition\\\">\\n                        <li title=\\\"Expression\\\">\\n                            <expression-inline [expr]=\\\"operation.condition\\\"></expression-inline>\\n                        </li>\\n                    </ul>\\n                </p-accordionTab>\\n            </section>\\n\\n            <!-- Section: Union -->\\n            <section *ngIf=\\\"operationType == 'Union'\\\">\\n            </section>\\n\\n            <!-- Section: Generic -->\\n            <section *ngIf=\\\"operationType == 'Generic'\\\">\\n                <p-accordionTab [selected]=\\\"true\\\">\\n                    <p-header>\\n                        <details-section-header\\n                                caption=\\\"Operation source code\\\"\\n                                faIcon=\\\"fa-code\\\"\\n                                iconColor=\\\"steelblue\\\"></details-section-header>\\n                    </p-header>\\n                    <code class=\\\"small\\\" title=\\\"Internal operation representation\\\">{{operation.rawString}}</code>\\n                </p-accordionTab>\\n            </section>\\n\\n            <!-- Section: Input -->\\n            <ng-container *ngIf=\\\"operationType != 'Read'\\\">\\n                <section *ngFor=\\\"let input of operation.mainProps.inputs\\\">\\n                    <p-accordionTab [selected]=\\\"true\\\">\\n                        <p-header>\\n                            <details-section-header\\n                                    caption=\\\"Input\\\"\\n                                    faIcon=\\\"fa-arrow-circle-right\\\"\\n                                    iconColor=\\\"green\\\"></details-section-header>\\n                        </p-header>\\n                        <attribute-list\\n                                [attrs]=\\\"getDatasetAttributes(input)\\\"\\n                                (attrClicked)=\\\"selectAttribute($event)\\\"\\n                                [selectedAttrIDs]=\\\"selectedAttrIDs\\\">\\n                        </attribute-list>\\n                    </p-accordionTab>\\n                </section>\\n            </ng-container>\\n\\n            <!-- Section: Output -->\\n            <ng-container *ngIf=\\\"operationType != 'Write'\\\">\\n                <section *ngIf=\\\"operation.mainProps.output\\\">\\n                    <p-accordionTab [selected]=\\\"true\\\">\\n                        <p-header>\\n                            <details-section-header\\n                                    caption=\\\"Output\\\"\\n                                    faIcon=\\\"fa-arrow-circle-left\\\"\\n                                    iconColor=\\\"firebrick\\\"></details-section-header>\\n                        </p-header>\\n                        <attribute-list\\n                                [attrs]=\\\"getDatasetAttributes(operation.mainProps.output)\\\"\\n                                (attrClicked)=\\\"selectAttribute($event)\\\"\\n                                [selectedAttrIDs]=\\\"selectedAttrIDs\\\">\\n                        </attribute-list>\\n                    </p-accordionTab>\\n                </section>\\n            </ng-container>\\n\\n        </p-accordion>\\n    </div>\\n</div>\"","module.exports = \":host>div{position:relative;height:100%}.body{height:calc(100% - 48px)}ul{padding:5px 0 0 0}ul.sort-orders i{color:#337ab7}ul>li{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:2px 0;font-size:small}ul i{width:17px;display:inline-block;font-weight:800;font-style:normal;cursor:default}ul .expr-lambda>i{font-family:serif;color:lightseagreen}ul .expr-attr-removal>i{color:#337ab7}ul .expr-attr-removal>span{color:silver;text-decoration:line-through}section{border-left:1px solid whitesmoke}:host/deep/.ui-accordion .ui-accordion-header{height:27px;border-radius:0;border-color:whitesmoke}:host/deep/.ui-accordion .ui-accordion-header a{padding-top:.33em;text-decoration:none;outline:none}:host/deep/.ui-accordion .ui-accordion-header.ui-state-active{border-left:none;border-bottom:none}:host/deep/.ui-accordion .ui-accordion-content{padding:0 .3em 1em 1em}\"","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component, Input, EventEmitter, Output} from \"@angular/core\";\nimport {IAttribute} from \"../../../generated-ts/lineage-model\";\nimport * as _ from \"lodash\"\n\n@Component({\n    selector: 'details-section-header',\n    template: `\n        <div>\n            <i class=\"fa\" [ngClass]=\"faIcon\" [ngStyle]=\"{color: iconColor}\"></i>\n            {{caption}}\n        </div>\n    `,\n    styles: [`\n        :host {\n            display: inline-block;\n        }\n        i {\n            padding: 0 2px 0 5px;            \n        }\n    `]\n})\nexport class DetailsSectionHeaderComponent {\n    @Input() caption: string\n    @Input() faIcon: string\n    @Input() iconColor: string\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component, Input} from \"@angular/core\";\n\n@Component({\n    selector: 'details-panel-header',\n    template: `\n        <i class=\"fa fa-2x\"\n           [ngClass]=\"faIcon\"\n           [ngStyle]=\"{color: iconColor}\"></i>\n        <b>{{caption}}</b>\n    `,\n    styles: [`\n        :host {\n            display: block;\n            height: 48px;\n        }\n        i {\n            position: absolute; \n            top: 11px; \n            left: 12px; \n            text-shadow: 1px 1px white;\n        }\n        b {\n            text-align: center; \n            display: block; \n            padding-top: 15px;\n        }\n    `]\n})\nexport class DetailsPanelHeaderComponent {\n    @Input() caption: string\n    @Input() faIcon: string\n    @Input() iconColor: string\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component, Input, OnChanges} from \"@angular/core\";\nimport {MatDialog} from \"@angular/material\";\nimport {ExpressionDialogComponent} from \"./expression-dialog.component\";\nimport {IExpression} from \"../../../../generated-ts/expression-model\";\nimport {ExpressionRenderService} from \"./expression-render.service\";\n\n@Component({\n    selector: \"expression-inline\",\n    template: `\n        <a href=\"\" (click)=\"openExprViewDialog($event)\">\n            <code title=\"{{ exprString }}\">{{ exprString }}</code>\n        </a>\n    `,\n    styles: [`\n        code {\n            padding: 0;\n        }\n    `],\n    providers: [ExpressionRenderService]\n})\nexport class ExpressionInlineComponent implements OnChanges {\n    @Input() expr: IExpression\n\n    exprString: string\n\n    constructor(private dialog: MatDialog,\n                private expressionRenderer: ExpressionRenderService) {\n    }\n\n    ngOnChanges(): void {\n        this.exprString = this.expressionRenderer.getText(this.expr)\n    }\n\n    openExprViewDialog(e: Event) {\n        e.preventDefault()\n        this.dialog.open(ExpressionDialogComponent, <any>{\n            data: {\n                expr: this.expr,\n                exprString: this.exprString,\n                expressionRenderer: this.expressionRenderer\n            }\n        })\n    }\n}","module.exports = \":host/deep/.node-wrapper{position:relative;display:inline-block}:host/deep/.node-wrapper ::before{content:\\\"\\\";position:absolute;height:13px;width:7px}:host/deep/.tree-children{padding-left:5px}:host/deep/.tree-node-children{padding-left:15px}:host/deep/.tree-node{padding-left:10px;border-left:1px dotted #23527c}:host/deep/.node-content-wrapper{padding-top:10px;padding-left:20px;display:inline-block;box-shadow:none;opacity:1 !important;cursor:pointer}:host/deep/.node-content-wrapper ::before{left:-10px;border-bottom:1px dotted #23527c;width:10px}:host/deep/.toggle-children-wrapper.toggle-children-wrapper-collapsed::after{position:absolute;top:15px;display:inline-block;font:normal normal normal 15px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:\\\"\\\\f0fe\\\"}:host/deep/.toggle-children-wrapper.toggle-children-wrapper-expanded::after{position:absolute;top:15px;display:inline-block;font:normal normal normal 15px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:\\\"\\\\f146\\\"}:host/deep/tree-viewport{overflow:hidden}\"","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component, EventEmitter, Input, Output, ViewChild} from \"@angular/core\";\nimport {IAttribute} from \"../../../../generated-ts/lineage-model\";\nimport {IArray, IDataType, IStruct} from \"../../../../generated-ts/datatype-model\";\nimport {typeOfDataType} from \"../../types\";\nimport {IActionMapping, ITreeOptions, TreeComponent} from \"angular-tree-component\";\nimport {ITreeNode} from 'angular-tree-component/dist/defs/api';\nimport * as _ from 'lodash';\nimport {LineageStore} from \"../../lineage.store\";\n\n@Component({\n    selector: \"attribute-list\",\n    template: require('./attribute-list.component.html'),\n    styles: [require('./attribute-list.component.less')]\n})\nexport class AttributeListComponent {\n\n    @Input() set attrs(attrs: IAttribute[]) {\n        this.attrTree = attrs.map(a => this.buildAttrTree(a))\n    }\n\n    @Input() set selectedAttrIDs(ids: string[]) {\n        this.selectedIds = ids\n        this.highlightSelected()\n    }\n\n    @Input() expandRoot: boolean = false\n\n    @Output() attrClicked = new EventEmitter<string>()\n\n    attrTree: INodeData[]\n\n    @ViewChild('tree') treeComponent: TreeComponent;\n\n    readonly actionMapping: IActionMapping = {\n        mouse: {\n            click: (tree, node, $event) => this.onNodeClicked(node)\n        }\n    }\n\n    readonly treeOptions: ITreeOptions = {\n        actionMapping: this.actionMapping,\n        allowDrag: false,\n        allowDrop: false,\n    }\n\n    constructor(private lineageStore: LineageStore) {\n    }\n\n    onTreeInit() {\n        this.highlightSelected()\n    }\n\n    onNodeClicked(node: ITreeNode) {\n        this.attrClicked.emit(node.data.attributeId)\n    }\n\n    private selectedIds: string[]\n\n    private buildAttrTree(attr: IAttribute): INodeData {\n        const attributeId = attr.id\n        const getDataType = _.bind(this.lineageStore.lineageAccessors.getDataType, this.lineageStore.lineageAccessors)\n\n        function buildChildren(dt: IDataType): (INodeData[] | undefined) {\n            let dtt = typeOfDataType(dt)\n            return (dtt == \"Simple\") ? undefined\n                : (dtt == \"Struct\") ? buildChildrenForStructType(<IStruct> dt)\n                    : buildChildren(getDataType((<IArray> dt).elementDataTypeId))\n        }\n\n        function buildChildrenForStructType(sdt: IStruct): INodeData[] {\n            return sdt.fields.map(f => buildNode(getDataType(f.dataTypeId), f.name, false))\n        }\n\n        function buildNode(dt: IDataType, name: string, isExpanded: boolean) {\n            return {\n                attributeId: attributeId,\n                name: name,\n                type: dt,\n                children: buildChildren(dt),\n                isExpanded: isExpanded\n            }\n        }\n\n        return buildNode(getDataType(attr.dataTypeId), attr.name, this.expandRoot)\n    }\n\n    private highlightSelected(): void {\n        if (this.treeComponent && this.treeComponent.treeModel.roots) {\n            let treeModel = this.treeComponent.treeModel\n            treeModel.roots.forEach((node: ITreeNode) => {\n                node.setIsActive(this.isSelected(node, this.selectedIds), true)\n            })\n        }\n    }\n\n    private isSelected(node: ITreeNode, ids: string[]): boolean {\n        let id = node.data.attributeId\n        return id != null && _.includes(ids, id)\n    }\n\n}\n\ninterface INodeData {\n    name: string,\n    type: IDataType,\n    attributeId: string,\n    children: INodeData[],\n    isExpanded: boolean\n}\n","module.exports = \"<!--\\n  ~ Copyright 2017 ABSA Group Limited\\n  ~\\n  ~ Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n  ~ you may not use this file except in compliance with the License.\\n  ~ You may obtain a copy of the License at\\n  ~\\n  ~     http://www.apache.org/licenses/LICENSE-2.0\\n  ~\\n  ~ Unless required by applicable law or agreed to in writing, software\\n  ~ distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n  ~ See the License for the specific language governing permissions and\\n  ~ limitations under the License.\\n  -->\\n\\n<tree-root #tree [nodes]=\\\"attrTree\\\" [options]=\\\"treeOptions\\\" (initialized)=\\\"onTreeInit()\\\">\\n    <ng-template #treeNodeTemplate let-node>\\n        <div>\\n            <span class=\\\"fld-name\\\">{{ node.data.name }}</span>\\n            <div class=\\\"fld-type\\\">\\n                <span>:</span>\\n                <data-type-view [node]=\\\"node\\\">\\n                </data-type-view>\\n            </div>\\n        </div>\\n    </ng-template>\\n</tree-root>\\n\"","module.exports = \".fld-type{position:absolute;top:3px;right:0;width:70px}data-type-view{width:53px;display:inline-block}:host/deep/.node-wrapper{position:relative}:host/deep/.tree-children{padding-left:20px}:host/deep/.tree-node:hover{background-color:#f7f7f7}:host/deep/.tree-node.tree-node-active{color:#fff;background:#337ab7}:host/deep/.tree-node.tree-node-active:hover,:host/deep/.tree-node.tree-node-active .tree-node:hover{background-color:#3072ab}:host/deep/.node-content-wrapper{background:transparent;box-shadow:none;opacity:1 !important;padding:5px 0 3px 0;cursor:pointer}:host/deep/tree-node-expander{display:none}:host/deep/tree-viewport{overflow:hidden}\"","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component, Input} from \"@angular/core\";\nimport {TreeNode} from \"angular-tree-component\";\nimport {typeOfDataType} from \"../../../types\";\nimport {IArray, IDataType} from \"../../../../../generated-ts/datatype-model\";\nimport {LineageAccessors, LineageStore} from \"../../../lineage.store\";\n\n@Component({\n    selector: \"data-type-view\",\n    template: require('./data-type-view.component.html'),\n    styles: [require('./data-type-view.component.less')]\n})\nexport class DataTypeViewComponent {\n    @Input() node: TreeNode\n\n    private lineageAccessors: LineageAccessors\n\n    constructor(lineageStore: LineageStore) {\n        this.lineageAccessors = lineageStore.lineageAccessors\n    }\n\n    typeOfDataType(dt: IDataType): string {\n        return typeOfDataType(dt)\n    }\n\n    getArrayElementType(arrayDT: IArray): IDataType {\n        return this.lineageAccessors.getDataType(arrayDT.elementDataTypeId)\n    }\n\n    toggleExpanded(e: Event) {\n        this.node.toggleExpanded()\n        DataTypeViewComponent.suppressBrowserNativeBehaviour(e)\n    }\n\n    private static suppressBrowserNativeBehaviour(event:Event) {\n        event.stopPropagation()\n        let btn = <HTMLButtonElement> event.srcElement\n        btn.blur()\n    }\n}","module.exports = \"<!--\\n  ~ Copyright 2017 ABSA Group Limited\\n  ~\\n  ~ Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n  ~ you may not use this file except in compliance with the License.\\n  ~ You may obtain a copy of the License at\\n  ~\\n  ~     http://www.apache.org/licenses/LICENSE-2.0\\n  ~\\n  ~ Unless required by applicable law or agreed to in writing, software\\n  ~ distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n  ~ See the License for the specific language governing permissions and\\n  ~ limitations under the License.\\n  -->\\n\\n<div title=\\\"{{ node.data.type.nullable ? 'Optional' : 'Required' }}\\\">\\n    <ng-container [ngTemplateOutlet]=\\\"dtView\\\"\\n                  [ngTemplateOutletContext]=\\\"{dt:node.data.type}\\\"></ng-container>\\n</div>\\n\\n<ng-template #dtView let-dt=\\\"dt\\\">\\n    <ng-container [ngSwitch]=\\\"typeOfDataType(dt)\\\">\\n        <div *ngSwitchCase=\\\"'Struct'\\\" class=\\\"struct-type\\\">\\n            <button class=\\\"btn btn-default btn-xs\\\"\\n                    [ngClass]=\\\"{'active':node.isExpanded}\\\"\\n                    (click)=\\\"toggleExpanded($event)\\\">\\n                &#123; ... &#125;\\n            </button>\\n        </div>\\n        <div *ngSwitchCase=\\\"'Simple'\\\" class=\\\"simple-type\\\">\\n            {{ dt.name }}\\n        </div>\\n        <div *ngSwitchCase=\\\"'Array'\\\" class=\\\"array-type\\\">\\n            <b>[</b>\\n            <ng-container [ngTemplateOutlet]=\\\"dtView\\\"\\n                          [ngTemplateOutletContext]=\\\"{dt:getArrayElementType(dt)}\\\"></ng-container>\\n            <b>]</b>\\n        </div>\\n    </ng-container>\\n</ng-template>\"","module.exports = \":host{text-align:right}:host div{display:inline-block}.simple-type{font-style:italic;color:lightseagreen}.array-type b:nth-of-type(1){margin-right:2px}.array-type b:nth-of-type(2){margin-left:3px}button{font-size:xx-small;outline:none !important}\"","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {NgModule} from \"@angular/core\";\nimport {HttpClientModule} from \"@angular/common/http\";\n\nimport \"@angular/material/prebuilt-themes/indigo-pink.css\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"bootstrap/dist/css/bootstrap-theme.min.css\";\nimport \"font-awesome/css/font-awesome.min.css\";\nimport {PersistentDatasetResolver} from \"./dataset.resolver\";\nimport {DatasetService} from \"./dataset.service\";\nimport {DatasetLineageOverviewResolver} from \"./lineage-overview/lineage-overview.resolver\";\nimport {DatasetLineageOverviewComponent} from \"./lineage-overview/lineage-overview.component\";\nimport {MiscModule} from \"../misc/misc.module\";\nimport {MaterialModule} from \"../material-extension/material.module\";\nimport {LineageOverviewGraphComponent} from \"./lineage-overview/lienage-overview-graph.component\";\nimport {CommonModule} from \"@angular/common\";\nimport {DetailsModule} from \"../lineage/details/details.module\";\n\n\n@NgModule({\n    imports: [\n        HttpClientModule,\n        MaterialModule,\n        MiscModule,\n        CommonModule,\n        DetailsModule\n    ],\n    declarations: [\n        DatasetLineageOverviewComponent,\n        LineageOverviewGraphComponent\n    ],\n    providers: [\n        DatasetService,\n        PersistentDatasetResolver,\n        DatasetLineageOverviewResolver\n    ]\n})\nexport class DatasetModule {\n\n}","module.exports = \"<!--\\n  ~ Copyright 2017 ABSA Group Limited\\n  ~\\n  ~ Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n  ~ you may not use this file except in compliance with the License.\\n  ~ You may obtain a copy of the License at\\n  ~\\n  ~     http://www.apache.org/licenses/LICENSE-2.0\\n  ~\\n  ~ Unless required by applicable law or agreed to in writing, software\\n  ~ distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n  ~ See the License for the specific language governing permissions and\\n  ~ limitations under the License.\\n  -->\\n\\n<div>\\n    <mat-grid-list cols=\\\"3\\\">\\n        <mat-grid-tile colspan=\\\"2\\\">\\n            <lineage-overview-graph #graph\\n                                    [lineage$]=\\\"lineageStore.lineage$\\\"\\n                                    [selectedNode$]=\\\"selectedNode$\\\"\\n                                    (nodeSelected)=\\\"selectNode($event.id, $event.type)\\\"\\n                                    (nodeActioned)=\\\"gotoPartialLineage($event.id)\\\">\\n            </lineage-overview-graph>\\n            <div class=\\\"graph-footer\\\">\\n                <button mat-button (click)=\\\"graph.collapseNodes()\\\" title=\\\"Collapse groups of nodes\\\">\\n                    <mat-icon>fullscreen_exit</mat-icon>\\n                </button>\\n                <button mat-button (click)=\\\"graph.fit()\\\" title=\\\"Fit to screen\\\">\\n                    <mat-icon>filter_none</mat-icon>\\n                </button>\\n            </div>\\n        </mat-grid-tile>\\n        <mat-grid-tile>\\n            <div class=\\\"details-container\\\">\\n\\n                <!-- Data Source Info -->\\n\\n                <div *ngIf=\\\"selectedDataSourceDescription\\\">\\n                    <div style=\\\"height: 280px\\\">\\n                        <details-panel-header\\n                                [caption]=\\\"selectedDataSourceDescription.source.path\\\"\\n                                faIcon=\\\"fa-file\\\"\\n                                iconColor=\\\"steelblue\\\">\\n                        </details-panel-header>\\n                        <hr>\\n                        <h5>Type: <b>{{selectedDataSourceDescription.source.type}}</b></h5>\\n                        <h5>Timestamp: <b>{{selectedDataSourceDescription.timestamp | date:'long'}}</b></h5>\\n                        <hr>\\n                        <div style=\\\"text-align: center\\\">\\n                            <button mat-raised-button (click)=\\\"gotoPartialLineage(selectedDataSourceDescription.source.datasetsIds[0])\\\">\\n                                Show detailed lineage graph\\n                            </button>\\n                        </div>\\n                        <hr>\\n                        <h3>Schema:</h3>\\n                    </div>\\n                    <div style=\\\"height: calc(100% - 280px); overflow-y: auto;\\\">\\n                        <attribute-list [attrs]=\\\"selectedDataSourceDescription.schema.attrs\\\">\\n                        </attribute-list>\\n                    </div>\\n                </div>\\n\\n                <!-- Composite Operation Info -->\\n\\n                <div *ngIf=\\\"selectedOperation\\\">\\n                    <details-panel-header\\n                            [caption]=\\\"selectedOperation.appName\\\"\\n                            faIcon=\\\"fa-cogs\\\"\\n                            iconColor=\\\"steelblue\\\">\\n                    </details-panel-header>\\n                    <hr>\\n                    <h5>Application ID: <b>{{selectedOperation.appId}}</b></h5>\\n                    <h5>Timestamp: <b>{{selectedOperation.timestamp | date:'long'}}</b></h5>\\n                    <hr>\\n                    <div style=\\\"text-align: center\\\">\\n                        <button mat-raised-button (click)=\\\"gotoPartialLineage(selectedOperation.mainProps.id)\\\">\\n                            Show detailed lineage graph\\n                        </button>\\n                    </div>\\n                    <hr>\\n                    <h3>Sources:</h3>\\n                    <ul>\\n                        <li *ngFor=\\\"let src of selectedOperation.sources\\\">\\n                            <b>{{src.type}}</b> : {{src.path}}\\n                            <div *ngIf=\\\"src.datasetsIds?.length\\\">\\n                                <a *ngFor=\\\"let dsId of src.datasetsIds\\\"\\n                                   href=\\\"javascript:void(0)\\\"\\n                                   (click)=\\\"selectNode(dsId, 'datasource')\\\">\\n                                    {{dsId}}<br/>\\n                                </a>\\n                            </div>\\n                        </li>\\n                    </ul>\\n                </div>\\n            </div>\\n        </mat-grid-tile>\\n    </mat-grid-list>\\n</div>\\n\\n<version></version>\"","module.exports = \":host{height:100%;width:100%}:host>div{height:100%}:host>div mat-grid-list{height:100%}:host>div mat-grid-tile{height:100%}:host>div lineage-overview-graph{display:block;height:100%;width:100%}:host>div .graph-footer{position:absolute;right:25px;bottom:20px;background:white;opacity:.8;border-radius:100px;box-shadow:0 0 100px 50px white}:host>div .graph-footer .mat-button{min-width:0}:host>div .details-container{height:100%;width:100%;background:whitesmoke}:host>div .details-container>div{height:100%;width:100%}\"","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Component, ElementRef, EventEmitter, Input, NgZone, OnDestroy, OnInit, Output} from \"@angular/core\";\nimport {IDataLineage} from \"../../../generated-ts/lineage-model\";\nimport \"vis/dist/vis.min.css\";\nimport * as vis from \"vis\";\nimport * as _ from \"lodash\";\nimport {combineLatest, concat, Observable, Subscription} from \"rxjs\";\nimport {IComposite, ITypedMetaDataSource} from \"../../../generated-ts/operation-model\";\nimport {typeOfOperation} from \"../../lineage/types\";\nimport {visOptions} from \"./vis-options\";\nimport {\n    GraphNode,\n    GraphNodeTypesByIdPrefixes,\n    ID_PREFIX_LENGTH,\n    ID_PREFIXES,\n    VisDatasetNode,\n    VisNode,\n    VisNodeType,\n    VisProcessNode\n} from \"./lineage-overview.model\";\nimport {ClusterManager} from \"../../visjs/cluster-manager\";\nimport {VisClusterNode, VisModel} from \"../../visjs/vis-model\";\nimport {getIconForNodeType, Icon} from \"../../lineage/details/operation/operation-icon.utils\";\nimport {distinctUntilChanged, filter, first, pairwise} from \"rxjs/operators\";\nimport {VisNetworkService} from \"../../visjs/vis-network.service\";\n\n@Component({\n    selector: 'lineage-overview-graph',\n    template: '',\n    providers: [\n        VisNetworkService\n    ]\n})\nexport class LineageOverviewGraphComponent implements OnInit, OnDestroy {\n\n    @Input() lineage$: Observable<IDataLineage>\n    @Input() selectedNode$: Observable<GraphNode>\n\n    @Output() nodeSelected = new EventEmitter<GraphNode>()\n    @Output() nodeActioned = new EventEmitter<GraphNode>()\n\n    private selectedNode: GraphNode\n    private clusterManager: ClusterManager<VisNode, vis.Edge>\n\n    private subscriptions: Subscription[] = []\n\n    constructor(private container: ElementRef,\n                private visNetworkService: VisNetworkService,\n                private zone: NgZone) {\n    }\n\n    ngOnInit(): void {\n        const lineageContainsDataset = (lin: IDataLineage, dsId: string) => _.some(lin.datasets, {id: dsId}),\n            reactOnChange = (prevLineage: IDataLineage, nextLineage: IDataLineage, selectedNode: GraphNode) => {\n                if (!this.visNetworkService.network || nextLineage !== prevLineage)\n                    this.rebuildGraph(nextLineage)\n                this.selectedNode = selectedNode\n                this.refreshSelectedNode(selectedNode)\n            }\n\n        const lineagePairs$ =\n            concat(this.lineage$.pipe(first()), this.lineage$).pipe(pairwise())\n\n        this.subscriptions.unshift(combineLatest([lineagePairs$, this.selectedNode$])\n            .pipe(\n                filter(([[, lineage], selectedNode]) => lineageContainsDataset(lineage, selectedNode.id)),\n                distinctUntilChanged(([[, lin0], node0], [[, lin1], node1]) => lin0.id == lin1.id && _.isEqual(node0, node1)))\n            .subscribe(([[prevLineage, nextLineage], selectedNode]) => reactOnChange(prevLineage, nextLineage, selectedNode)))\n    }\n\n    ngOnDestroy(): void {\n        this.subscriptions.forEach(s => s.unsubscribe())\n    }\n\n    public fit() {\n        this.zone.runOutsideAngular(() => {\n            this.visNetworkService.network.fit()\n        })\n    }\n\n    public collapseNodes() {\n        this.zone.runOutsideAngular(() => {\n            this.clusterManager.collapseAllClusters()\n        })\n    }\n\n    private static eventToClickableNode(event: any): GraphNode {\n        const nodeIdWithPrefix = event.nodes.length && event.nodes[0]\n        return LineageOverviewGraphComponent.isClickableNodeId(nodeIdWithPrefix)\n            && {\n                id: nodeIdWithPrefix.substring(ID_PREFIX_LENGTH),\n                type: GraphNodeTypesByIdPrefixes[nodeIdWithPrefix.substring(0, ID_PREFIX_LENGTH)]\n            }\n    }\n\n    private static isClickableNodeId(nodeId: string): boolean {\n        const nonClickablePrefixes = [ID_PREFIXES.datasource + ID_PREFIXES.extra, ID_PREFIXES.datasource_cluster]\n        return nodeId && !_.some(nonClickablePrefixes, prf => nodeId.startsWith(prf))\n    }\n\n    private rebuildGraph(lineage: IDataLineage) {\n        this.zone.runOutsideAngular(() => {\n            const graph = LineageOverviewGraphComponent.buildVisModel(lineage)\n            const network = this.visNetworkService.createNetwork(() =>\n                new vis.Network(this.container.nativeElement, graph, visOptions))\n\n            this.clusterManager = new ClusterManager<VisNode, vis.Edge>(graph, network, (nodes,) =>\n                _(nodes)\n                    .filter((node: VisNode) => node.nodeType === VisNodeType.Dataset)\n                    .filter((dsNode: VisDatasetNode) => dsNode.dataSource.datasetsIds.length > 1) // means there were appends to the source\n                    .groupBy((dsNode: VisDatasetNode) => dsNode.dataSource.datasetsIds[0]) // the first write/overwrite followed by subsequent appends\n                    .values()\n                    .map((nodes, i) => new VisClusterNode(`${ID_PREFIXES.datasource_cluster}${i}`, `${nodes[0].label} (${nodes.length})`, nodes))\n                    .value())\n\n            this.clusterManager.rebuildClusters()\n            this.clusterManager.collapseAllClusters()\n\n            network.on(\"click\", event => {\n                const node = LineageOverviewGraphComponent.eventToClickableNode(event)\n                if (node)\n                    this.zone.run(() => this.nodeSelected.emit(node))\n                else {\n                    this.refreshSelectedNode(this.selectedNode)\n                    const clickedNode = event.nodes[0]\n                    if (network.isCluster(clickedNode)) {\n                        network.openCluster(clickedNode)\n                    }\n                }\n            })\n\n            network.on(\"doubleClick\", event => {\n                if (event.nodes.length == 1) {\n                    const node = LineageOverviewGraphComponent.eventToClickableNode(event)\n                    if (node)\n                        this.zone.run(() => this.nodeActioned.emit(node))\n                }\n            })\n\n            const canvasElement = this.container.nativeElement.getElementsByTagName(\"canvas\")[0]\n            network.on('blurNode', () => canvasElement.style.cursor = 'default')\n            network.on('hoverNode', (event) => {\n                if (LineageOverviewGraphComponent.isClickableNodeId(event.node))\n                    canvasElement.style.cursor = 'pointer'\n            })\n            network.on(\"beforeDrawing\", ctx => {\n                network.getSelectedNodes().forEach(nodeId => {\n                    const nodePosition = network.getPositions(nodeId)\n                    ctx.fillStyle = \"#f7a263\"\n                    ctx.circle(nodePosition[nodeId].x, nodePosition[nodeId].y, 65)\n                    ctx.fill()\n                })\n            })\n        })\n    }\n\n    private refreshSelectedNode(selectedNode: GraphNode) {\n        this.zone.runOutsideAngular(() => {\n            const network = this.visNetworkService.network\n            network.unselectAll()\n            network.selectNodes([ID_PREFIXES[selectedNode.type] + selectedNode.id])\n        })\n    }\n\n    private static buildVisModel(lineage: IDataLineage): VisModel<VisNode, vis.Edge> {\n        const getIdentifiableDataSourcesOf =\n            (op: IComposite): ITypedMetaDataSource[] =>\n                _.flatMap(op.sources, (src, i) =>\n                    _.isEmpty(src.datasetsIds)\n                        ? _.assign({}, src, {datasetsIds: [ID_PREFIXES.extra + i + \"_\" + op.mainProps.id]})\n                        : src)\n\n        const recombineByDatasetIdAndLongestAppendSequence =\n            (typedMetadataSources: ITypedMetaDataSource[]): [string, ITypedMetaDataSource][] =>\n                <any[]>_(typedMetadataSources)\n                    .flatMap((src: ITypedMetaDataSource) => src.datasetsIds.map(dsId => [dsId, src]))\n                    .groupBy(_.head).values()\n                    .map((pairs: [string, ITypedMetaDataSource][]) => _.sortBy(pairs, ([, src]) => -src.datasetsIds.length)[0])\n                    .value()\n\n\n        const dataSources =\n                _.flatMap(lineage.operations, (op: IComposite) =>\n                    getIdentifiableDataSourcesOf(op).concat(op.destination)),\n\n            datasetNodes: VisNode[] =\n                recombineByDatasetIdAndLongestAppendSequence(dataSources)\n                    .map(([datasetId, src]) => {\n                        const lastPathItemName = src.path.substring(src.path.replace(/\\/$/, '').lastIndexOf(\"/\") + 1)\n                        const label = LineageOverviewGraphComponent.wrapText(src.type + \"\\n\" + lastPathItemName)\n                        return new VisDatasetNode(\n                            src,\n                            ID_PREFIXES.datasource + datasetId,\n                            src.type + \":\" + src.path,\n                            label,\n                            new Icon(\"fa-file\", \"\\uf15b\", \"FontAwesome\")\n                                .toVisNodeIcon(datasetId.startsWith(ID_PREFIXES.extra) ? \"#c0cdd6\" : \"#337ab7\")\n                        )\n                    }),\n\n            processNodes: VisNode[] = lineage.operations.map((op: IComposite) =>\n                new VisProcessNode(\n                    op,\n                    ID_PREFIXES.operation + op.mainProps.id,\n                    LineageOverviewGraphComponent.wrapText(op.appName),\n                    getIconForNodeType(typeOfOperation(op)).toVisNodeIcon(\"#337ab7\")\n                )),\n\n            nodes = processNodes.concat(datasetNodes),\n\n            edges: vis.Edge[] = _.flatMap(lineage.operations, (op: IComposite) => {\n                const opNodeId = ID_PREFIXES.operation + op.mainProps.id\n                const inputEdges: vis.Edge[] =\n                        recombineByDatasetIdAndLongestAppendSequence(getIdentifiableDataSourcesOf(op))\n                            .map(([datasetId]) => {\n                                const dsNodeId = ID_PREFIXES.datasource + datasetId\n                                return {\n                                    id: dsNodeId + \"_\" + opNodeId,\n                                    from: dsNodeId,\n                                    to: opNodeId\n                                }\n                            }),\n                    outputDsNodeId = ID_PREFIXES.datasource + op.mainProps.output,\n                    outputEdge: vis.Edge = {\n                        id: opNodeId + \"_\" + outputDsNodeId,\n                        from: opNodeId,\n                        to: outputDsNodeId\n                    }\n                return inputEdges.concat(outputEdge)\n            })\n\n        return new VisModel(\n            new vis.DataSet<VisNode>(nodes),\n            new vis.DataSet<vis.Edge>(edges)\n        )\n    }\n\n    static wrapText(text: string): string {\n        const textSize = 13\n        return text.split('\\n').map(\n            line => {\n                if (line.length < textSize) {\n                    return line\n                }\n                return line.substring(0, textSize - 2) + \"\\n\" + this.wrapText(line.substring(textSize - 2))\n            }\n        ).join(\"\\n\")\n    }\n}\n\n","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Options} from \"vis\";\n\nexport const visOptions: Options = {\n\n    autoResize: true,\n    interaction: {\n        hover: true,\n        selectConnectedEdges: false,\n        hoverConnectedEdges: false\n    },\n    layout: {\n        hierarchical: {\n            enabled: true,\n            sortMethod: 'directed',\n            direction: 'UD',\n            parentCentralization: true,\n            nodeSpacing: 200,\n            levelSeparation: 200\n        }\n    },\n    physics: {\n        enabled: true,\n        hierarchicalRepulsion: {\n            nodeDistance: 270,\n            springLength: 170,\n            springConstant: 10,\n            damping: 1\n        }\n    },\n\n    edges: {\n        color: {\n            color: '#E0E0E0',\n            hover: '#E0E0E0',\n            highlight: 'E0E0E0'\n        },\n        shadow: false,\n        width: 10,\n        arrows: \"to\",\n        font: {\n            color: '#343434',\n            background: '#ffffff',\n            strokeWidth: 0\n        }\n    },\n    nodes: {\n        shape: 'icon',\n        shadow: false,\n        // margin: 10,\n        labelHighlightBold: false,\n        font: {\n            color: '#343434',\n            size: 20\n        }\n    }\n}\n","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as vis from \"vis\";\nimport {IComposite, ITypedMetaDataSource} from \"../../../generated-ts/operation-model\";\nimport {VisNodeIcon} from \"../../visjs/vis-model\";\n\nexport interface GraphNode {\n    type: GraphNodeType\n    id: string\n}\n\nexport enum VisNodeType {\n    Process,\n    Dataset\n}\n\nexport abstract class VisNode implements vis.Node {\n    protected constructor(public nodeType: VisNodeType,\n                public id: string,\n                public label: string,\n                public icon: VisNodeIcon) {\n    }\n}\n\nexport class VisProcessNode extends VisNode {\n    constructor(public operation: IComposite,\n                id: string,\n                label: string,\n                icon: VisNodeIcon) {\n        super(VisNodeType.Process, id, label, icon)\n    }\n}\n\nexport class VisDatasetNode extends VisNode {\n    constructor(public dataSource: ITypedMetaDataSource,\n                id: string,\n                title: string,\n                label: string,\n                icon: VisNodeIcon) {\n        super(VisNodeType.Dataset, id, label, icon)\n    }\n}\n\nexport const ID_PREFIX_LENGTH = 3\n\nexport const ID_PREFIXES = {\n    operation: \"op_\",\n    datasource: \"ds_\",\n    extra: \"ex_\",\n    datasource_cluster: \"cl_\",\n}\n\nexport const GraphNodeTypesByIdPrefixes: { [key: string]: GraphNodeType } = {\n    op_: \"operation\",\n    ds_: \"datasource\",\n    cl_: \"datasource_cluster\",\n}\n\nexport type GraphNodeType = (\n    \"operation\"\n    | \"datasource\"\n    | \"datasource_cluster\"\n    )\n","import {NgModule} from \"@angular/core\";\nimport {HTTP_INTERCEPTORS} from \"@angular/common/http\";\nimport {AppComponent} from \"../app.component\";\nimport {RetryPopupDialogComponent} from \"./retry-popup-dialog.component\";\nimport {XHRTimeoutInterceptor} from \"./xhr-timeout-interceptor.service\";\nimport {MatButtonModule, MatDialogModule, MatIconModule} from \"@angular/material\";\n\n/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n@NgModule({\n    imports: [\n        MatButtonModule,\n        MatDialogModule\n    ],\n    providers: [\n        {provide: HTTP_INTERCEPTORS, useClass: XHRTimeoutInterceptor, multi: true}\n    ],\n    declarations: [\n        RetryPopupDialogComponent\n    ],\n    entryComponents: [\n        RetryPopupDialogComponent\n    ],\n})\n\nexport class XHRTimeoutRectifierModule {\n}","module.exports = \"<!--\\n  ~ Copyright 2017 ABSA Group Limited\\n  ~\\n  ~ Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n  ~ you may not use this file except in compliance with the License.\\n  ~ You may obtain a copy of the License at\\n  ~\\n  ~     http://www.apache.org/licenses/LICENSE-2.0\\n  ~\\n  ~ Unless required by applicable law or agreed to in writing, software\\n  ~ distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n  ~ See the License for the specific language governing permissions and\\n  ~ limitations under the License.\\n  -->\\n\\n<h2 mat-dialog-title><i class=\\\"fa fa-clock-o fa-2x\\\"></i> The request has timed out</h2>\\n<mat-dialog-content>\\n    <p>\\n        The server might be under high load or experiencing network issues.<br>\\n        Your request took much longer time than usual and has been rejected by the server.<br>\\n        You may retry, but under the current circumstances the server may require significant\\n        amount of time to complete your request.\\n    </p>\\n    <strong>Do you want to retry and wait longer?</strong>\\n</mat-dialog-content>\\n<mat-dialog-actions>\\n    <button mat-raised-button [mat-dialog-close]=\\\"true\\\" tabindex=\\\"-1\\\">Yes, I'm willing to wait</button>\\n    <button mat-raised-button mat-dialog-close color=\\\"primary\\\">No, I'll try later</button>\\n</mat-dialog-actions>\"","module.exports = \".mat-dialog-title{color:crimson}.mat-dialog-title i{vertical-align:sub;margin-right:12px}\"","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest} from \"@angular/common/http\";\nimport {Injectable} from \"@angular/core\";\nimport {Observable, throwError} from \"rxjs\";\nimport {catchError, flatMap} from \"rxjs/operators\";\nimport {MatDialog, MatDialogConfig} from \"@angular/material\";\nimport {RetryPopupDialogComponent} from \"./retry-popup-dialog.component\";\n\n@Injectable()\nexport class XHRTimeoutInterceptor implements HttpInterceptor {\n\n    constructor(private dialog: MatDialog) {\n    }\n\n    intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n        const self = this\n        return next\n            .handle(req)\n            .pipe(catchError((res: HttpErrorResponse) => {\n                if (res.status == 598) {\n                    const dialogConfig = new MatDialogConfig()\n                    dialogConfig.disableClose = true\n                    return self.dialog\n                        .open(RetryPopupDialogComponent, dialogConfig)\n                        .afterClosed()\n                        .pipe(flatMap(result =>\n                            result\n                                ? next.handle(req.clone({setHeaders: {\"X-SPLINE-TIMEOUT\": \"-1\"}}))\n                                : throwError(res)))\n                } else {\n                    return throwError(res)\n                }\n            }))\n    }\n}","/*\n * Copyright 2019 ABSA Group Limited\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {NgModule} from \"@angular/core\";\nimport {VisNetworkService} from \"./vis-network.service\";\n\n@NgModule({\n    providers: [\n        VisNetworkService\n    ]\n})\nexport class VisModule {\n}","/*\n * Copyright 2017 ABSA Group Limited\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {Injectable} from \"@angular/core\";\nimport {IAttribute, IDataLineage, IDataType, IMetaDataset, IOperation} from \"../../generated-ts/lineage-model\";\nimport {Observable, ReplaySubject, Subject} from \"rxjs\";\nimport * as _ from \"lodash\";\nimport {typeOfOperation} from \"./types\";\n\n@Injectable()\nexport class LineageStore {\n\n    private _lineage$: Subject<IDataLineage> = new ReplaySubject(1)\n\n    public get lineage$(): Observable<IDataLineage> {\n        return this._lineage$\n    }\n\n    public set lineage(lineage: IDataLineage) {\n        this._lineageAccessors = new LineageAccessors(lineage)\n        this._lineage$.next(lineage)\n    }\n\n    private _lineageAccessors: LineageAccessors\n\n    public get lineageAccessors(): LineageAccessors {\n        return this._lineageAccessors\n    }\n}\n\nexport class LineageAccessors {\n    private readonly operationById: { [id: string]: IOperation }\n    private readonly datasetById: { [id: string]: IMetaDataset }\n    private readonly attributeById: { [id: string]: IAttribute }\n    private readonly attributesByDatasetId: { [id: string]: IAttribute[] }\n    private readonly operationIdsByAttributeId: { [id: string]: string }\n    private readonly dataTypesById: { [id: string]: IDataType }\n\n    constructor(public lineage: IDataLineage) {\n        this.operationById = _.mapValues(_.groupBy(lineage.operations, \"mainProps.id\"), _.first)\n        this.datasetById = _.mapValues(_.groupBy(lineage.datasets, \"id\"), _.first)\n        this.attributeById = _.mapValues(_.groupBy(lineage.attributes, \"id\"), _.first)\n        this.dataTypesById = _.mapValues(_.groupBy(lineage.dataTypes, \"id\"), _.first)\n        this.attributesByDatasetId =\n            _.mapValues(this.datasetById, ds => ds.schema.attrs.map(id => this.attributeById[id]))\n\n        this.operationIdsByAttributeId = (<any>_(lineage.operations))\n            .flatMap((op: IOperation) => {\n                let opInputIds =\n                        typeOfOperation(op) != \"Read\"\n                            ? op.mainProps.inputs\n                            : [], // Read operation reads from external datasets that are not part of the current lineage and can be ignored.\n                    opOutputId = op.mainProps.output,\n                    opDatasetIds = opInputIds.concat(opOutputId),\n                    opAttrIds = _.uniq(_.flatMap(opDatasetIds, dsId => this.datasetById[dsId].schema.attrs))\n                return opAttrIds.map(attrId => [attrId, op.mainProps.id])\n            })\n            .groupBy(_.first)\n            .mapValues(_.partial(_.map, _, _.last))\n            .value()\n    }\n\n    public getOperation(opId: string): IOperation {\n        return this.operationById[opId]\n    }\n\n    public getDataset(dsId: string): IMetaDataset {\n        return this.datasetById[dsId]\n    }\n\n    public getDatasetAttributes(dsId: string): IAttribute[] {\n        return this.attributesByDatasetId[dsId]\n    }\n\n    public getAttribute(attrId: string): IAttribute {\n        return this.attributeById[attrId]\n    }\n\n    public getDataType(typeId: string): IDataType {\n        return this.dataTypesById[typeId]\n    }\n\n    public getOperationIdsByAnyAttributeId(...attrIds: string[]): string[] {\n        return _.uniq(_.flatMap(attrIds, attrId => this.operationIdsByAttributeId[attrId]))\n    }\n\n}"],"sourceRoot":""}